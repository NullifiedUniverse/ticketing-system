{"version":3,"file":"static/js/477.e620b184.chunk.js","mappings":"2OAKA,MAqHA,EArHuBA,IAAkB,IAAjB,QAAEC,GAASD,EAC/B,MAAM,EAAEE,IAAMC,EAAAA,EAAAA,KAGd,IAAKF,IAAYG,MAAMC,QAAQJ,GAC3B,OACIK,EAAAA,EAAAA,KAAA,OAAKC,UAAU,kEAAiEC,SAAC,sBAOzF,MAAMC,EAAWR,EAAQS,QAAQR,GACxBA,EAAES,gBAA8C,IAA5BT,EAAES,eAAeC,OAEnCV,EAAES,eACJE,OAAOC,GAAkB,aAAbA,EAAEC,QACdC,IAAIF,GACYA,EAAEG,UAAUC,SAAW,IAAIC,KAA4B,IAAvBL,EAAEG,UAAUC,UAAmB,IAAIC,KAAKL,EAAEG,YALhC,IAQhEG,KAAK,CAACC,EAAGC,IAAMD,EAAIC,GAEtB,GAAwB,IAApBb,EAASG,OACT,OACIN,EAAAA,EAAAA,KAAA,OAAKC,UAAU,kEAAiEC,SAAC,mCAOzF,MAAMe,EAAU,IACVC,EAAU,IAAIC,IAEpB,GAAIhB,EAASG,OAAS,EAAG,CACrB,MAAMc,EAAQ,IAAIP,KAAKQ,KAAKC,MAAMnB,EAAS,GAAGoB,UAAYN,GAAWA,GAC/DO,EAAM,IAAIX,KAAKQ,KAAKI,KAAKtB,EAASA,EAASG,OAAS,GAAGiB,UAAYN,GAAWA,GAGpF,IAAK,IAAIrB,EAAIwB,EAAMG,UAAW3B,GAAK4B,EAAID,UAAW3B,GAAKqB,EACnDC,EAAQQ,IAAI9B,EAAG,GAInBO,EAASwB,QAAQC,IACb,MAAMC,EAAMR,KAAKC,MAAMM,EAAEL,UAAYN,GAAWA,EAChDC,EAAQQ,IAAIG,GAAMX,EAAQY,IAAID,IAAQ,GAAK,IAEnD,CAGA,MAAME,EAAOjC,MAAMkC,KAAKd,EAAQe,WAAWvB,IAAIwB,IAAA,IAAEC,EAAMC,GAAMF,EAAA,MAAM,CAC/DC,KAAM,IAAItB,KAAKsB,GAAME,mBAAmB,GAAI,CAAEC,KAAM,UAAWC,OAAQ,YACvEH,MAAOA,KAGX,OACII,EAAAA,EAAAA,MAAA,OAAKvC,UAAU,8DAA6DC,SAAA,EACxEF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,6GACfD,EAAAA,EAAAA,KAAA,MAAIC,UAAU,mGAAkGC,SAAEN,EAAE,iBAEpHI,EAAAA,EAAAA,KAACyC,EAAAA,EAAmB,CAACC,MAAM,OAAOC,OAAO,OAAMzC,UAC3CsC,EAAAA,EAAAA,MAACI,EAAAA,EAAS,CAACb,KAAMA,EAAMc,OAAQ,CAAEC,IAAK,GAAIC,MAAO,GAAIC,KAAM,EAAGC,OAAQ,IAAK/C,SAAA,EACvEsC,EAAAA,EAAAA,MAAA,QAAAtC,SAAA,EACIsC,EAAAA,EAAAA,MAAA,kBAAgBU,GAAG,aAAaC,GAAG,IAAIC,GAAG,IAAIC,GAAG,IAAIC,GAAG,IAAGpD,SAAA,EACvDF,EAAAA,EAAAA,KAAA,QAAMuD,OAAO,KAAKC,UAAU,UAAUC,YAAa,MACnDzD,EAAAA,EAAAA,KAAA,QAAMuD,OAAO,MAAMC,UAAU,UAAUC,YAAa,QAExDjB,EAAAA,EAAAA,MAAA,kBAAgBU,GAAG,kBAAkBC,GAAG,KAAKC,GAAG,KAAKC,GAAG,OAAOC,GAAG,KAAIpD,SAAA,EAClEF,EAAAA,EAAAA,KAAA,QAAMuD,OAAO,KAAKC,UAAU,UAAStD,UACjCF,EAAAA,EAAAA,KAAA,WAAS0D,cAAc,aAAaC,OAAO,0DAA0DC,IAAI,MAAMC,YAAY,kBAE/H7D,EAAAA,EAAAA,KAAA,QAAMuD,OAAO,MAAMC,UAAU,UAAStD,UAClCF,EAAAA,EAAAA,KAAA,WAAS0D,cAAc,aAAaC,OAAO,0DAA0DC,IAAI,MAAMC,YAAY,kBAE/H7D,EAAAA,EAAAA,KAAA,QAAMuD,OAAO,OAAOC,UAAU,UAAStD,UACnCF,EAAAA,EAAAA,KAAA,WAAS0D,cAAc,aAAaC,OAAO,0DAA0DC,IAAI,MAAMC,YAAY,wBAIvI7D,EAAAA,EAAAA,KAAC8D,EAAAA,EAAa,CAACC,gBAAgB,MAAMC,OAAO,OAAOC,UAAU,KAC7DjE,EAAAA,EAAAA,KAACkE,EAAAA,EAAK,CACFC,QAAQ,OACRH,OAAO,UACPI,KAAM,CAAEC,KAAM,UAAWC,SAAU,IACnCC,UAAU,EACVC,UAAU,EACVC,GAAI,MAERzE,EAAAA,EAAAA,KAAC0E,EAAAA,EAAK,CACFV,OAAO,UACPI,KAAM,CAAEC,KAAM,UAAWC,SAAU,IACnCC,UAAU,EACVC,UAAU,EACVG,eAAe,KAEnB3E,EAAAA,EAAAA,KAAC4E,EAAAA,EAAO,CACJC,aAAc,CAAEC,gBAAiB,UAAWC,YAAa,UAAWC,aAAc,OAAQC,MAAO,QACjGC,UAAW,CAAED,MAAO,QACpBE,OAAQ,CAAEnB,OAAQ,YAAaoB,YAAa,MAEhDpF,EAAAA,EAAAA,KAACqF,EAAAA,EAAI,CACDC,KAAK,WACLnB,QAAQ,QACRH,OAAO,wBACPoB,YAAa,EACbG,YAAa,EACblB,KAAK,6B","sources":["components/AnalyticsChart.js"],"sourcesContent":["\nimport React from 'react';\nimport { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\nimport { useLanguage } from '../context/LanguageContext';\n\nconst AnalyticsChart = ({ tickets }) => {\n    const { t } = useLanguage();\n\n    // 1. Process Data\n    if (!tickets || !Array.isArray(tickets)) {\n        return (\n            <div className=\"glass-panel h-64 flex items-center justify-center text-gray-500\">\n                No data available\n            </div>\n        );\n    }\n\n    // Get all check-in timestamps\n    const checkIns = tickets.flatMap(t => {\n        if (!t.checkInHistory || t.checkInHistory.length === 0) return [];\n        // Filter for 'check-in' actions only\n        return t.checkInHistory\n            .filter(h => h.action === 'check-in')\n            .map(h => {\n                const date = h.timestamp._seconds ? new Date(h.timestamp._seconds * 1000) : new Date(h.timestamp);\n                return date;\n            });\n    }).sort((a, b) => a - b);\n\n    if (checkIns.length === 0) {\n        return (\n            <div className=\"glass-panel h-64 flex items-center justify-center text-gray-500\">\n                No check-in data available yet\n            </div>\n        );\n    }\n\n    // 2. Binning (e.g., by 15 minute intervals)\n    const binSize = 15 * 60 * 1000; // 15 mins\n    const dataMap = new Map();\n\n    if (checkIns.length > 0) {\n        const start = new Date(Math.floor(checkIns[0].getTime() / binSize) * binSize);\n        const end = new Date(Math.ceil(checkIns[checkIns.length - 1].getTime() / binSize) * binSize);\n\n        // Initialize bins\n        for (let t = start.getTime(); t <= end.getTime(); t += binSize) {\n            dataMap.set(t, 0);\n        }\n\n        // Fill bins\n        checkIns.forEach(d => {\n            const bin = Math.floor(d.getTime() / binSize) * binSize;\n            dataMap.set(bin, (dataMap.get(bin) || 0) + 1);\n        });\n    }\n\n    // 3. Format for Recharts\n    const data = Array.from(dataMap.entries()).map(([time, count]) => ({\n        time: new Date(time).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }),\n        count: count\n    }));\n\n    return (\n        <div className=\"glass-panel h-72 w-full p-2 sm:p-6 relative overflow-hidden\">\n            <div className=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 opacity-20\"></div>\n            <h3 className=\"text-gray-400 text-sm font-bold uppercase tracking-widest mb-6 pl-2 border-l-4 border-purple-500\">{t('chartTitle')}</h3>\n\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\n                <AreaChart data={data} margin={{ top: 10, right: 10, left: 0, bottom: 20 }}>\n                    <defs>\n                        <linearGradient id=\"colorCount\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                            <stop offset=\"5%\" stopColor=\"#ffffff\" stopOpacity={0.1} />\n                            <stop offset=\"95%\" stopColor=\"#ffffff\" stopOpacity={0} />\n                        </linearGradient>\n                        <linearGradient id=\"rainbowGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n                            <stop offset=\"0%\" stopColor=\"#ff0000\">\n                                <animate attributeName=\"stop-color\" values=\"#ff0000;#ffff00;#00ff00;#00ffff;#0000ff;#ff00ff;#ff0000\" dur=\"10s\" repeatCount=\"indefinite\" />\n                            </stop>\n                            <stop offset=\"50%\" stopColor=\"#00ff00\">\n                                <animate attributeName=\"stop-color\" values=\"#00ff00;#00ffff;#0000ff;#ff00ff;#ff0000;#ffff00;#00ff00\" dur=\"10s\" repeatCount=\"indefinite\" />\n                            </stop>\n                            <stop offset=\"100%\" stopColor=\"#0000ff\">\n                                <animate attributeName=\"stop-color\" values=\"#0000ff;#ff00ff;#ff0000;#ffff00;#00ff00;#00ffff;#0000ff\" dur=\"10s\" repeatCount=\"indefinite\" />\n                            </stop>\n                        </linearGradient>\n                    </defs>\n                    <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#333\" vertical={false} />\n                    <XAxis\n                        dataKey=\"time\"\n                        stroke=\"#525252\"\n                        tick={{ fill: '#a3a3a3', fontSize: 11 }}\n                        tickLine={false}\n                        axisLine={false}\n                        dy={10}\n                    />\n                    <YAxis\n                        stroke=\"#525252\"\n                        tick={{ fill: '#a3a3a3', fontSize: 11 }}\n                        tickLine={false}\n                        axisLine={false}\n                        allowDecimals={false}\n                    />\n                    <Tooltip\n                        contentStyle={{ backgroundColor: '#0a0a0a', borderColor: '#262626', borderRadius: '12px', color: '#fff' }}\n                        itemStyle={{ color: '#fff' }}\n                        cursor={{ stroke: '#ffffff20', strokeWidth: 2 }}\n                    />\n                    <Area\n                        type=\"monotone\"\n                        dataKey=\"count\"\n                        stroke=\"url(#rainbowGradient)\"\n                        strokeWidth={3}\n                        fillOpacity={1}\n                        fill=\"url(#colorCount)\"\n                    />\n                </AreaChart>\n            </ResponsiveContainer>\n        </div>\n    );\n};\n\nexport default AnalyticsChart;\n"],"names":["_ref","tickets","t","useLanguage","Array","isArray","_jsx","className","children","checkIns","flatMap","checkInHistory","length","filter","h","action","map","timestamp","_seconds","Date","sort","a","b","binSize","dataMap","Map","start","Math","floor","getTime","end","ceil","set","forEach","d","bin","get","data","from","entries","_ref2","time","count","toLocaleTimeString","hour","minute","_jsxs","ResponsiveContainer","width","height","AreaChart","margin","top","right","left","bottom","id","x1","y1","x2","y2","offset","stopColor","stopOpacity","attributeName","values","dur","repeatCount","CartesianGrid","strokeDasharray","stroke","vertical","XAxis","dataKey","tick","fill","fontSize","tickLine","axisLine","dy","YAxis","allowDecimals","Tooltip","contentStyle","backgroundColor","borderColor","borderRadius","color","itemStyle","cursor","strokeWidth","Area","type","fillOpacity"],"sourceRoot":""}