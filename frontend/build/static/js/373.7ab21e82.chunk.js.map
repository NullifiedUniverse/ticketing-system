{"version":3,"file":"static/js/373.7ab21e82.chunk.js","mappings":"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","sources":["components/EmailDashboard.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport Layout from './Layout';\nimport Modal from './Modal';\nimport SmartButton from './SmartButton';\nimport { getTickets, sendTicketEmail, sendBatchEmails } from '../services/api';\nimport { useModal } from '../hooks/useModal';\nimport { useEvent } from '../context/EventContext';\nimport { useLanguage } from '../context/LanguageContext';\nimport { containerStagger, fadeInUp, EASING } from '../utils/animations';\n\nconst EmailDashboard = () => {\n    const { eventId } = useEvent();\n    const { t } = useLanguage();\n    const [tickets, setTickets] = useState([]);\n    const [loading, setLoading] = useState(false);\n    const [sending, setSending] = useState(false);\n    const [showSettings, setShowSettings] = useState(false);\n    const [selectedTicketIds, setSelectedTicketIds] = useState(new Set());\n\n    const [bgFilename, setBgFilename] = useState(() => localStorage.getItem('email_bgFilename') || null);\n    const [config, setConfig] = useState(() => {\n        try {\n            const saved = localStorage.getItem('email_config');\n            return saved ? JSON.parse(saved) : {\n                qrSize: 1150, qrX: 220, qrY: 1110,\n                fontSize: 150, nameX: 400, nameY: 925,\n                messageBefore: '',\n                messageAfter: '',\n                emailSubject: '',\n                senderName: '',\n                bodyTextColor: '#555555',\n                footerTextColor: '#aaaaaa'\n            };\n        } catch {\n            return {\n                qrSize: 1150, qrX: 220, qrY: 1110,\n                fontSize: 150, nameX: 400, nameY: 925,\n                messageBefore: '',\n                messageAfter: '',\n                emailSubject: '',\n                senderName: '',\n                bodyTextColor: '#555555',\n                footerTextColor: '#aaaaaa'\n            };\n        }\n    });\n\n    // Persistence\n    useEffect(() => {\n        const timer = setTimeout(() => {\n            localStorage.setItem('email_config', JSON.stringify(config));\n            if (bgFilename) localStorage.setItem('email_bgFilename', bgFilename);\n        }, 500); // Debounce 500ms\n        return () => clearTimeout(timer);\n    }, [config, bgFilename]);\n\n    const { modalContent, showModal, hideModal, showErrorModal, showConfirmModal } = useModal();\n\n    const fetchTickets = useCallback(async () => {\n        if (!eventId) return;\n        setLoading(true);\n        try {\n            const data = await getTickets(eventId);\n            setTickets(data);\n            setSelectedTicketIds(new Set()); // Reset selection on refresh\n        } catch (err) {\n            console.error(\"Failed to fetch tickets\", err);\n            showErrorModal(`${t('errorCsvEmpty')}: ${err.message}`);\n        } finally {\n            setLoading(false);\n        }\n    }, [eventId, showErrorModal, t]);\n\n    useEffect(() => {\n        if (eventId) {\n            fetchTickets();\n        } else {\n            setTickets([]);\n        }\n    }, [eventId, fetchTickets]);\n\n    // Intelligent Sorting: Error > Unsent > Sent\n    const sortedTickets = useMemo(() => {\n        return [...tickets].sort((a, b) => {\n            const getPriority = (t) => {\n                if (t.emailStatus === 'error') return 0;\n                if (!t.emailStatus || t.emailStatus !== 'sent') return 1;\n                return 2;\n            };\n            return getPriority(a) - getPriority(b);\n        });\n    }, [tickets]);\n\n    const handleFileChange = async (e) => {\n        const file = e.target.files[0];\n        if (file) {\n            try {\n                const result = await import('../services/api').then(m => m.uploadBackground(file));\n                setBgFilename(result.filename || result);\n            } catch (err) {\n                showErrorModal(`${t('errorUploadFailed')}: ${err.message}`);\n            }\n        }\n    };\n\n    const handleConfigChange = (e) => {\n        const { name, value } = e.target;\n        setConfig(prev => ({\n            ...prev,\n            [name]: ['messageBefore', 'messageAfter', 'emailSubject', 'senderName', 'bodyTextColor', 'footerTextColor'].includes(name) ? value : (parseInt(value) || 0)\n        }));\n    };\n\n    const toggleSelectAll = () => {\n        if (selectedTicketIds.size === tickets.length) {\n            setSelectedTicketIds(new Set());\n        } else {\n            setSelectedTicketIds(new Set(tickets.map(t => t.id)));\n        }\n    };\n\n    const toggleSelection = (id) => {\n        const newSet = new Set(selectedTicketIds);\n        if (newSet.has(id)) newSet.delete(id);\n        else newSet.add(id);\n        setSelectedTicketIds(newSet);\n    };\n\n    const selectUnsent = () => {\n        const unsent = tickets.filter(t => t.emailStatus !== 'sent').map(t => t.id);\n        if (unsent.length > 0) {\n            setSelectedTicketIds(new Set(unsent));\n        } else {\n            alert(\"All tickets have been sent!\");\n        }\n    };\n\n    const handleSendOne = async (ticket) => {\n        if (!ticket.attendeeEmail) return showErrorModal(\"This ticket has no email address.\");\n\n        setSending(true);\n        try {\n            await sendTicketEmail(eventId, ticket.id, bgFilename, config, config.messageBefore, config.messageAfter, config.emailSubject, config.senderName);\n            alert(t('emailSent', ticket.attendeeEmail));\n        } catch (err) {\n            showErrorModal(`${t('importFailed')}: ${err.message}`);\n        } finally {\n            setSending(false);\n        }\n    };\n\n    const handleBatchSend = async () => {\n        const targetTickets = selectedTicketIds.size > 0\n            ? tickets.filter(t => selectedTicketIds.has(t.id))\n            : tickets;\n\n        if (targetTickets.length === 0) return showErrorModal(\"No tickets available to send.\");\n\n        showConfirmModal(\n            t('modalSendBatchTitle'),\n            t('modalSendBatchBody', targetTickets.length),\n            async () => {\n                hideModal();\n                setSending(true);\n                try {\n                    const res = await sendBatchEmails(\n                        eventId,\n                        bgFilename,\n                        config,\n                        config.messageBefore,\n                        config.messageAfter,\n                        config.emailSubject,\n                        config.senderName,\n                        selectedTicketIds.size > 0 ? Array.from(selectedTicketIds) : null // Pass IDs if selected\n                    );\n\n                    let msg = `Batch Complete!\\nSuccess: ${res.result.success}\\nFailed: ${res.result.failed}`;\n                    if (res.result.errors && res.result.errors.length > 0) {\n                        msg += `\\n\\nErrors:\\n${res.result.errors.join('\\n')}`;\n                    }\n                    alert(msg);\n                    fetchTickets(); // Refresh statuses\n                } catch (err) {\n                    showErrorModal(`${t('importFailed')}: ${err.message}`);\n                } finally {\n                    setSending(false);\n                }\n            }\n        );\n    };\n\n    const formatPreviewText = (text) => {\n        if (!text) return '';\n        let formatted = text\n            // Sanitize\n            .replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#039;\")\n            // Newlines\n            .replace(/\\n/g, '<br>')\n            // Shortcodes\n            .replace(/\\[color[:=]([^\\]]+)\\](.*?)\\[\\/color\\]/gi, '<span style=\"color: $1\">$2</span>')\n            .replace(/\\[b\\](.*?)\\[\\/b\\]/gi, '<strong>$1</strong>');\n        return formatted;\n    };\n\n    const handlePreview = async (ticket) => {\n        setLoading(true);\n        try {\n            const imageSrc = await import('../services/api').then(m => m.getEmailPreview(eventId, ticket.id, bgFilename, config));\n\n            const msgBefore = config.messageBefore || t('emailDefaultMsgBefore', eventId);\n            const msgAfter = config.messageAfter || t('emailDefaultMsgAfter');\n\n            const content = (\n                <div className=\"p-0 bg-gray-50 text-gray-800 rounded-xl max-w-2xl mx-auto border shadow-lg max-h-[80vh] overflow-y-auto\">\n                    <div className=\"bg-white p-8 text-center\">\n                        <h2 className=\"text-xl font-bold mb-4 text-gray-900\">Ticket Preview</h2>\n                        <p className=\"text-gray-600 mb-6\" dangerouslySetInnerHTML={{ __html: formatPreviewText(msgBefore) }}></p>\n                        <div className=\"mb-6\">\n                            <img\n                                src={imageSrc}\n                                alt={`Ticket Preview for ${ticket.attendeeName}`}\n                                loading=\"lazy\"\n                                className=\"w-full h-auto rounded shadow-lg border\"\n                            />\n                        </div>\n                        <p className=\"text-gray-600 mb-6\" dangerouslySetInnerHTML={{ __html: formatPreviewText(msgAfter) }}></p>\n                        <p className=\"text-xs text-gray-400 mt-8 pt-4 border-t\">Ticket ID: {ticket.id}</p>\n                    </div>\n                </div>\n            );\n\n            showModal({ type: 'custom', title: t('btnSimulate'), body: content, contentComponent: () => content });\n        } catch (err) {\n            showErrorModal(`Preview failed: ${err.message}`);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    if (!eventId) {\n        return (\n            <Layout>\n                <div className=\"flex-1 flex items-center justify-center text-gray-500 h-full\">\n                    {t('errorNoEventSelected')}\n                </div>\n                <Modal isOpen={!!modalContent} onClose={hideModal} content={modalContent || {}} />\n            </Layout>\n        );\n    }\n\n    return (\n        <Layout>\n            <div className=\"flex-1 flex flex-col h-full relative overflow-hidden\">\n                <div className=\"fixed inset-0 pointer-events-none ambient-glow -z-10\"></div>\n\n                <div className=\"p-4 pt-16 md:p-8 flex flex-col h-full max-w-7xl mx-auto w-full\">\n\n                    <div className=\"flex flex-col md:flex-row justify-between items-end mb-8 pb-4 border-b border-white/10 gap-4 shrink-0\">\n                        <div>\n                            <h1 className=\"text-3xl font-bold text-white rainbow-text tracking-tight\">{t('emailTitle')}</h1>\n                            <p className=\"text-gray-400 mt-1 flex items-center gap-2\">\n                                {t('emailManageCommunications')}\n                                <span className=\"glass-panel px-2 py-0.5 rounded text-purple-300 font-mono text-sm\">{eventId}</span>\n                            </p>\n                        </div>\n                        <div className=\"flex gap-3 flex-wrap\">\n                            <SmartButton\n                                variant=\"glass\"\n                                onClick={selectUnsent}\n                                className=\"px-4 py-3 text-sm\"\n                            >\n                                Select Unsent\n                            </SmartButton>\n                            <SmartButton\n                                variant=\"glass\"\n                                onClick={() => setShowSettings(!showSettings)}\n                                className=\"px-6 py-3\"\n                                icon=\"âš™ï¸\"\n                            >\n                                {t('btnSettings')}\n                            </SmartButton>\n                            <SmartButton\n                                variant=\"primary\"\n                                onClick={handleBatchSend}\n                                disabled={sending || loading}\n                                loading={sending}\n                                loadingText=\"Sending...\"\n                                className=\"px-6 py-3\"\n                                icon=\"ðŸš€\"\n                            >\n                                {selectedTicketIds.size > 0 ? `Send to ${selectedTicketIds.size}` : t('btnBatch')}\n                            </SmartButton>\n                        </div>\n                    </div>\n\n                    <AnimatePresence>\n                        {showSettings && (\n                            <motion.div\n                                initial={{ height: 0, opacity: 0, marginBottom: 0 }}\n                                animate={{ height: 'auto', opacity: 1, marginBottom: 32, transition: { ease: EASING.gentle, duration: 0.4 } }}\n                                exit={{ height: 0, opacity: 0, marginBottom: 0, transition: { ease: EASING.gentle, duration: 0.3 } }}\n                                className=\"overflow-hidden relative z-50 shrink-0\"\n                            >\n                                <div className=\"glass-panel p-6 rounded-3xl border border-white/10 bg-white/5 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6\">\n                                    <div className=\"col-span-1 md:col-span-2 xl:col-span-1\">\n                                        <label className=\"block text-xs font-bold text-gray-400 uppercase mb-2\">{t('labelBg')}</label>\n                                        <input type=\"file\" onChange={handleFileChange} className=\"block w-full text-sm text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 file:text-violet-700 hover:file:bg-violet-100\" />\n                                        {bgFilename && <p className=\"text-xs text-green-400 mt-1 truncate\">Active: {bgFilename}</p>}\n                                    </div>\n\n                                    <div className=\"col-span-1 md:col-span-1 xl:col-span-2\">\n                                        <label className=\"block text-xs font-bold text-gray-400 uppercase mb-2\">{t('labelSubject')}</label>\n                                        <input\n                                            type=\"text\"\n                                            name=\"emailSubject\"\n                                            value={config.emailSubject}\n                                            onChange={handleConfigChange}\n                                            placeholder={t('emailSubjectPlaceholder')}\n                                            className=\"w-full bg-black/50 border border-gray-700 rounded-lg px-3 py-2 text-white focus:border-blue-500 outline-none text-sm\"\n                                        />\n                                    </div>\n                                    <div className=\"col-span-1 md:col-span-1 xl:col-span-1\">\n                                        <label className=\"block text-xs font-bold text-gray-400 uppercase mb-2\">{t('labelSender')}</label>\n                                        <input\n                                            type=\"text\"\n                                            name=\"senderName\"\n                                            value={config.senderName}\n                                            onChange={handleConfigChange}\n                                            placeholder={t('emailSenderPlaceholder')}\n                                            className=\"w-full bg-black/50 border border-gray-700 rounded-lg px-3 py-2 text-white focus:border-blue-500 outline-none text-sm\"\n                                        />\n                                    </div>\n\n                                    <div className=\"col-span-1 md:col-span-2 xl:col-span-2\">\n                                        <label className=\"block text-xs font-bold text-gray-400 uppercase mb-2\">{t('labelPreamble')}</label>\n                                        <textarea\n                                            name=\"messageBefore\"\n                                            value={config.messageBefore}\n                                            onChange={handleConfigChange}\n                                            placeholder={t('emailPreamblePlaceholder')}\n                                            className=\"w-full bg-black/50 border border-gray-700 rounded-lg px-3 py-2 text-white focus:border-blue-500 outline-none h-24 text-sm resize-none\"\n                                        />\n                                    </div>\n                                    <div className=\"col-span-1 md:col-span-2 xl:col-span-2\">\n                                        <label className=\"block text-xs font-bold text-gray-400 uppercase mb-2\">{t('labelFinePrint')}</label>\n                                        <textarea\n                                            name=\"messageAfter\"\n                                            value={config.messageAfter}\n                                            onChange={handleConfigChange}\n                                            placeholder={t('emailFinePrintPlaceholder')}\n                                            className=\"w-full bg-black/50 border border-gray-700 rounded-lg px-3 py-2 text-white focus:border-blue-500 outline-none h-24 text-sm resize-none\"\n                                        />\n                                    </div>\n\n                                    <div className=\"col-span-1 md:col-span-2 xl:col-span-2 grid grid-cols-2 gap-4\">\n                                        <div>\n                                            <label className=\"block text-xs font-bold text-gray-400 uppercase mb-2\">Body Color</label>\n                                            <div className=\"flex items-center gap-2\">\n                                                <input\n                                                    type=\"color\"\n                                                    name=\"bodyTextColor\"\n                                                    value={config.bodyTextColor || '#555555'}\n                                                    onChange={handleConfigChange}\n                                                    className=\"w-10 h-10 rounded border border-gray-700 bg-transparent cursor-pointer\"\n                                                />\n                                                <input\n                                                    type=\"text\"\n                                                    name=\"bodyTextColor\"\n                                                    value={config.bodyTextColor || '#555555'}\n                                                    onChange={handleConfigChange}\n                                                    className=\"w-full bg-black/50 border border-gray-700 rounded-lg px-3 py-2 text-white focus:border-blue-500 outline-none text-sm\"\n                                                />\n                                            </div>\n                                        </div>\n                                        <div>\n                                            <label className=\"block text-xs font-bold text-gray-400 uppercase mb-2\">Footer Color</label>\n                                            <div className=\"flex items-center gap-2\">\n                                                <input\n                                                    type=\"color\"\n                                                    name=\"footerTextColor\"\n                                                    value={config.footerTextColor || '#aaaaaa'}\n                                                    onChange={handleConfigChange}\n                                                    className=\"w-10 h-10 rounded border border-gray-700 bg-transparent cursor-pointer\"\n                                                />\n                                                <input\n                                                    type=\"text\"\n                                                    name=\"footerTextColor\"\n                                                    value={config.footerTextColor || '#aaaaaa'}\n                                                    onChange={handleConfigChange}\n                                                    className=\"w-full bg-black/50 border border-gray-700 rounded-lg px-3 py-2 text-white focus:border-blue-500 outline-none text-sm\"\n                                                />\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    <div className=\"col-span-1 md:col-span-2 xl:col-span-2 grid grid-cols-3 gap-4\">\n                                        {['qrSize', 'qrX', 'qrY', 'fontSize', 'nameX', 'nameY'].map(key => (\n                                            <div key={key}>\n                                                <label className=\"block text-xs font-bold text-gray-400 uppercase mb-2\">{key}</label>\n                                                <input\n                                                    type=\"number\" name={key} value={config[key]} onChange={handleConfigChange}\n                                                    className=\"w-full bg-black/50 border border-gray-700 rounded-lg px-3 py-2 text-white focus:border-blue-500 outline-none\"\n                                                />\n                                            </div>\n                                        ))}\n                                    </div>\n                                </div>\n                            </motion.div>\n                        )}\n                    </AnimatePresence>\n\n                    <div className=\"glass-panel rounded-3xl overflow-hidden border border-white/5 flex-1 flex flex-col min-h-0\">\n                        <div className=\"overflow-y-auto overflow-x-auto custom-scrollbar flex-1\">\n                            <table className=\"w-full text-left border-collapse relative\">\n                                <thead className=\"bg-gray-950/95 backdrop-blur text-gray-400 text-xs uppercase tracking-wider sticky top-0 z-10 shadow-sm\">\n                                    <tr>\n                                        <th className=\"p-4 w-10\">\n                                            <input\n                                                type=\"checkbox\"\n                                                checked={tickets.length > 0 && selectedTicketIds.size === tickets.length}\n                                                onChange={toggleSelectAll}\n                                                className=\"rounded border-gray-600 bg-transparent focus:ring-indigo-500\"\n                                            />\n                                        </th>\n                                        <th className=\"p-4\">{t('colAttendee')}</th>\n                                        <th className=\"p-4\">{t('colEmail')}</th>\n                                        <th className=\"p-4\">{t('colStatus')}</th>\n                                        <th className=\"p-4 text-right\">{t('colActions')}</th>\n                                    </tr>\n                                </thead>\n                                <motion.tbody\n                                    variants={containerStagger}\n                                    initial=\"hidden\"\n                                    animate=\"visible\"\n                                    className=\"divide-y divide-white/5\"\n                                >\n                                    {sortedTickets.map(ticket => (\n                                        <motion.tr\n                                            key={ticket.id}\n                                            variants={fadeInUp}\n                                            layout\n                                            className={`hover:bg-white/5 transition-colors ${selectedTicketIds.has(ticket.id) ? 'bg-indigo-500/10' : ''}`}\n                                            onClick={() => toggleSelection(ticket.id)}\n                                        >\n                                            <td className=\"p-4\">\n                                                <input\n                                                    type=\"checkbox\"\n                                                    checked={selectedTicketIds.has(ticket.id)}\n                                                    onChange={() => { }} // Handled by row click\n                                                    className=\"rounded border-gray-600 bg-transparent focus:ring-indigo-500 pointer-events-none\"\n                                                />\n                                            </td>\n                                            <td className=\"p-4 font-medium selectable\">{ticket.attendeeName}</td>\n                                            <td className=\"p-4 text-gray-400 selectable\">{ticket.attendeeEmail}</td>\n                                            <td className=\"p-4\">\n                                                <span className={`px-2 py-1 rounded text-xs font-bold ${ticket.status === 'checked-in' ? 'bg-green-500/20 text-green-400' : 'bg-blue-500/20 text-blue-400'}`}>\n                                                    {ticket.status}\n                                                </span>\n                                                {ticket.emailStatus === 'sent' && <span className=\"ml-2 text-xs\">âœ… Sent</span>}\n                                            </td>\n                                            <td className=\"p-4 text-right space-x-2 flex justify-end\" onClick={e => e.stopPropagation()}>\n                                                <SmartButton\n                                                    variant=\"secondary\"\n                                                    onClick={() => handlePreview(ticket)}\n                                                    className=\"w-auto py-1.5 px-3 text-xs bg-gray-800 border-white/10\"\n                                                >\n                                                    {t('btnSimulate')}\n                                                </SmartButton>\n                                                <SmartButton\n                                                    variant=\"secondary\"\n                                                    onClick={() => handleSendOne(ticket)}\n                                                    disabled={sending}\n                                                    loading={sending} // This might be wrong if 'sending' is global. Usually row actions have individual loading state.\n                                                    // But the original code used global 'sending'. I'll stick to it.\n                                                    className=\"w-auto py-1.5 px-3 text-xs bg-indigo-600/20 text-indigo-300 border-indigo-500/30 hover:bg-indigo-600/40\"\n                                                >\n                                                    {t('btnHarass')}\n                                                </SmartButton>\n                                            </td>\n                                        </motion.tr>\n                                    ))}\n                                </motion.tbody>\n                            </table>\n\n                            {tickets.length === 0 && !loading && (\n                                <div className=\"p-12 text-center text-gray-500\">{t('emptyEmail')}</div>\n                            )}\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <Modal isOpen={!!modalContent} onClose={hideModal} content={modalContent || {}} />\n        </Layout>\n    );\n};\n\nexport default EmailDashboard;\n"],"names":["EmailDashboard","eventId","useEvent","t","useLanguage","tickets","setTickets","useState","loading","setLoading","sending","setSending","showSettings","setShowSettings","selectedTicketIds","setSelectedTicketIds","Set","bgFilename","setBgFilename","localStorage","getItem","config","setConfig","saved","JSON","parse","qrSize","qrX","qrY","fontSize","nameX","nameY","messageBefore","messageAfter","emailSubject","senderName","bodyTextColor","footerTextColor","_unused","useEffect","timer","setTimeout","setItem","stringify","clearTimeout","modalContent","showModal","hideModal","showErrorModal","showConfirmModal","useModal","fetchTickets","useCallback","async","data","getTickets","err","console","error","concat","message","sortedTickets","useMemo","sort","a","b","getPriority","emailStatus","handleConfigChange","e","name","value","target","prev","_objectSpread","includes","parseInt","formatPreviewText","text","replace","_jsxs","Layout","children","className","_jsx","SmartButton","variant","onClick","selectUnsent","unsent","filter","map","id","length","alert","icon","targetTickets","size","has","res","sendBatchEmails","Array","from","msg","result","success","failed","errors","join","disabled","loadingText","AnimatePresence","motion","div","initial","height","opacity","marginBottom","animate","transition","ease","EASING","gentle","duration","exit","type","onChange","file","files","then","m","uploadBackground","filename","placeholder","key","checked","toggleSelectAll","tbody","variants","containerStagger","ticket","tr","fadeInUp","layout","newSet","delete","add","toggleSelection","attendeeName","attendeeEmail","status","stopPropagation","imageSrc","getEmailPreview","msgBefore","msgAfter","content","dangerouslySetInnerHTML","__html","src","alt","title","body","contentComponent","handlePreview","sendTicketEmail","handleSendOne","Modal","isOpen","onClose"],"sourceRoot":""}