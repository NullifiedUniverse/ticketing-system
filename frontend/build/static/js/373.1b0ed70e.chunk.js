"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[373],{28:(e,t,a)=>{a.d(t,{A:()=>x});var l=a(2555),s=(a(5043),a(9570)),n=a(2465),i=a(1614),r=a(2136),o=a(5683),c=a(3840),d=a(579);const x=e=>{let{isOpen:t,onClose:a,content:x}=e;const{t:m}=(0,r.o)();return(0,d.jsx)(s.N,{children:t&&(0,d.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{duration:.2}},className:"fixed inset-0 bg-black/80 backdrop-blur-md flex justify-center items-center z-50 p-4",onClick:a,children:(0,d.jsxs)(n.P.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},transition:o.Ux.spring,className:"glass-panel w-full max-w-md border border-white/10",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"p-6 border-b border-purple-500/20 flex justify-between items-center",children:[(0,d.jsx)("h3",{className:"text-xl font-bold text-white tracking-wider",children:(null===x||void 0===x?void 0:x.title)||m("modalDefaultTitle")}),(0,d.jsx)(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.9},onClick:a,"aria-label":"Close Modal",className:"text-gray-400 hover:text-white text-2xl w-8 h-8 flex items-center justify-center rounded-full hover:bg-white/10 transition-colors",children:"\xd7"})]}),(0,d.jsxs)("div",{className:"p-6 text-center",children:[x.contentComponent?x.contentComponent():(0,d.jsx)("p",{className:"text-gray-300 mb-6",children:x.body}),("qr-code"===x.type||"setup-qr"===x.type)&&(0,d.jsx)("div",{className:"flex justify-center bg-white p-4 rounded-lg",children:(0,d.jsx)(i.Xe,{value:x.qrValue,size:256,level:"H"})}),"alert"===x.type&&(0,d.jsx)("div",{className:"flex justify-center gap-4 mt-4",children:(0,d.jsx)(c.A,{onClick:a,className:"w-auto px-6 py-2",children:m("btnOk")})}),"confirm"===x.type&&(0,d.jsxs)("div",{className:"flex justify-center gap-4 mt-4",children:[(0,d.jsx)(c.A,{variant:"secondary",onClick:a,className:"w-auto px-6 py-2 bg-gray-700 hover:bg-gray-600 border-none",children:m("btnCancel")}),(0,d.jsx)(c.A,{onClick:()=>{x.onConfirm(),a()},className:"w-auto px-6 py-2",children:m("btnConfirm")})]}),"prompt"===x.type&&(0,d.jsxs)("div",{className:"flex flex-col items-center gap-4 mt-4",children:[(0,d.jsx)("input",{type:"text",id:"prompt-input",className:"w-full bg-black border border-gray-700 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-purple-500 focus:outline-none transition-all"}),(0,d.jsxs)("div",{className:"flex justify-center gap-4 mt-4",children:[(0,d.jsx)(c.A,{variant:"secondary",onClick:a,className:"w-auto px-6 py-2 bg-gray-700 hover:bg-gray-600 border-none",children:m("btnCancel")}),(0,d.jsx)(c.A,{onClick:()=>{const e=document.getElementById("prompt-input");x.onConfirm(e.value),a()},className:"w-auto px-6 py-2",children:m("btnConfirm")})]})]}),"edit-ticket"===x.type&&(0,d.jsxs)("div",{className:"flex flex-col items-center gap-4 mt-4",children:[(0,d.jsx)("input",{type:"text",id:"edit-name-input",defaultValue:x.ticket.attendeeName,className:"w-full bg-black border border-gray-700 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-purple-500 focus:outline-none transition-all"}),(0,d.jsx)("input",{type:"email",id:"edit-email-input",defaultValue:x.ticket.attendeeEmail,className:"w-full bg-black border border-gray-700 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-purple-500 focus:outline-none transition-all"}),(0,d.jsxs)("div",{className:"flex justify-center gap-4 mt-4",children:[(0,d.jsx)(c.A,{variant:"secondary",onClick:a,className:"w-auto px-6 py-2 bg-gray-700 hover:bg-gray-600 border-none",children:m("btnCancel")}),(0,d.jsx)(c.A,{onClick:()=>{const e=document.getElementById("edit-name-input"),t=document.getElementById("edit-email-input");x.onConfirm((0,l.A)((0,l.A)({},x.ticket),{},{attendeeName:e.value,attendeeEmail:t.value})),a()},className:"w-auto px-6 py-2",children:m("btnSave")})]})]})]})]})})})}},373:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var l=a(2555),s=a(5043),n=a(9570),i=a(2465),r=a(570),o=a(28),c=a(3840),d=a(1200),x=a(6555),m=a(6089),p=a(2136),h=a(5683),u=a(579);const g=()=>{const{eventId:e}=(0,m._)(),{t:t}=(0,p.o)(),[g,b]=(0,s.useState)([]),[f,v]=(0,s.useState)(!1),[y,j]=(0,s.useState)(!1),[w,N]=(0,s.useState)(!1),[k,C]=(0,s.useState)(new Set),[S,A]=(0,s.useState)(null),[P,E]=(0,s.useState)({qrSize:1150,qrX:220,qrY:1110,fontSize:150,nameX:400,nameY:925,messageBefore:"",messageAfter:"",emailSubject:"",senderName:""}),{modalContent:M,showModal:z,hideModal:B,showErrorModal:T,showConfirmModal:L}=(0,x.h)(),I=(0,s.useCallback)(async()=>{if(e){v(!0);try{const t=await(0,d.oP)(e);b(t),C(new Set)}catch(a){console.error("Failed to fetch tickets",a),T("".concat(t("errorCsvEmpty"),": ").concat(a.message))}finally{v(!1)}}},[e,T,t]);(0,s.useEffect)(()=>{e?I():b([])},[e,I]);const _=(0,s.useMemo)(()=>[...g].sort((e,t)=>{const a=e=>"error"===e.emailStatus?0:e.emailStatus&&"sent"===e.emailStatus?2:1;return a(e)-a(t)}),[g]),q=e=>{const{name:t,value:a}=e.target;E(e=>(0,l.A)((0,l.A)({},e),{},{[t]:["messageBefore","messageAfter","emailSubject","senderName"].includes(t)?a:parseInt(a)||0}))};return e?(0,u.jsxs)(r.A,{children:[(0,u.jsxs)("div",{className:"flex-1 flex flex-col h-full relative overflow-hidden",children:[(0,u.jsx)("div",{className:"fixed inset-0 pointer-events-none ambient-glow -z-10"}),(0,u.jsxs)("div",{className:"p-8 flex flex-col h-full max-w-7xl mx-auto w-full",children:[(0,u.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-end mb-8 pb-4 border-b border-white/10 gap-4 shrink-0",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"text-3xl font-bold text-white rainbow-text tracking-tight",children:t("emailTitle")}),(0,u.jsxs)("p",{className:"text-gray-400 mt-1 flex items-center gap-2",children:[t("emailManageCommunications"),(0,u.jsx)("span",{className:"glass-panel px-2 py-0.5 rounded text-purple-300 font-mono text-sm",children:e})]})]}),(0,u.jsxs)("div",{className:"flex gap-3",children:[(0,u.jsx)(c.A,{variant:"glass",onClick:()=>{const e=g.filter(e=>"sent"!==e.emailStatus).map(e=>e.id);e.length>0?C(new Set(e)):alert("All tickets have been sent!")},className:"px-4 py-3 text-sm",children:"Select Unsent"}),(0,u.jsx)(c.A,{variant:"glass",onClick:()=>N(!w),className:"px-6 py-3",icon:"\u2699\ufe0f",children:t("btnSettings")}),(0,u.jsx)(c.A,{variant:"primary",onClick:async()=>{const a=k.size>0?g.filter(e=>k.has(e.id)):g;if(0===a.length)return T("No tickets available to send.");L(t("modalSendBatchTitle"),t("modalSendBatchBody",a.length),async()=>{B(),j(!0);try{const t=await(0,d.IL)(e,S,P,P.messageBefore,P.messageAfter,P.emailSubject,P.senderName,k.size>0?Array.from(k):null);let a="Batch Complete!\nSuccess: ".concat(t.result.success,"\nFailed: ").concat(t.result.failed);t.result.errors&&t.result.errors.length>0&&(a+="\n\nErrors:\n".concat(t.result.errors.join("\n"))),alert(a),I()}catch(a){T("".concat(t("importFailed"),": ").concat(a.message))}finally{j(!1)}})},disabled:y||f,loading:y,loadingText:"Sending...",className:"px-6 py-3",icon:"\ud83d\ude80",children:k.size>0?"Send to ".concat(k.size):t("btnBatch")})]})]}),(0,u.jsx)(n.N,{children:w&&(0,u.jsx)(i.P.div,{initial:{height:0,opacity:0,marginBottom:0},animate:{height:"auto",opacity:1,marginBottom:32,transition:{ease:h.Ux.gentle,duration:.4}},exit:{height:0,opacity:0,marginBottom:0,transition:{ease:h.Ux.gentle,duration:.3}},className:"overflow-hidden relative z-50 shrink-0",children:(0,u.jsxs)("div",{className:"glass-panel p-6 rounded-3xl border border-white/10 bg-white/5 grid grid-cols-1 md:grid-cols-2 lg:col-span-4 gap-6",children:[(0,u.jsxs)("div",{className:"col-span-1 md:col-span-2 lg:col-span-4",children:[(0,u.jsx)("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:t("labelBg")}),(0,u.jsx)("input",{type:"file",onChange:async e=>{const l=e.target.files[0];if(l)try{const e=await Promise.resolve().then(a.bind(a,1200)).then(e=>e.uploadBackground(l));A(e.filename||e)}catch(s){T("".concat(t("errorUploadFailed"),": ").concat(s.message))}},className:"block w-full text-sm text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 file:text-violet-700 hover:file:bg-violet-100"}),S&&(0,u.jsxs)("p",{className:"text-xs text-green-400 mt-1",children:["Active: ",S]})]}),(0,u.jsxs)("div",{className:"col-span-1 md:col-span-2 lg:col-span-2",children:[(0,u.jsx)("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:t("labelSubject")}),(0,u.jsx)("input",{type:"text",name:"emailSubject",value:P.emailSubject,onChange:q,placeholder:t("emailSubjectPlaceholder"),className:"w-full bg-black/50 border border-gray-700 rounded-lg px-3 py-2 text-white focus:border-blue-500 outline-none text-sm"})]}),(0,u.jsxs)("div",{className:"col-span-1 md:col-span-2 lg:col-span-2",children:[(0,u.jsx)("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:t("labelSender")}),(0,u.jsx)("input",{type:"text",name:"senderName",value:P.senderName,onChange:q,placeholder:t("emailSenderPlaceholder"),className:"w-full bg-black/50 border border-gray-700 rounded-lg px-3 py-2 text-white focus:border-blue-500 outline-none text-sm"})]}),(0,u.jsxs)("div",{className:"col-span-1 md:col-span-2 lg:col-span-2",children:[(0,u.jsx)("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:t("labelPreamble")}),(0,u.jsx)("textarea",{name:"messageBefore",value:P.messageBefore,onChange:q,placeholder:t("emailPreamblePlaceholder"),className:"w-full bg-black/50 border border-gray-700 rounded-lg px-3 py-2 text-white focus:border-blue-500 outline-none h-24 text-sm resize-none"})]}),(0,u.jsxs)("div",{className:"col-span-1 md:col-span-2 lg:col-span-2",children:[(0,u.jsx)("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:t("labelFinePrint")}),(0,u.jsx)("textarea",{name:"messageAfter",value:P.messageAfter,onChange:q,placeholder:t("emailFinePrintPlaceholder"),className:"w-full bg-black/50 border border-gray-700 rounded-lg px-3 py-2 text-white focus:border-blue-500 outline-none h-24 text-sm resize-none"})]}),["qrSize","qrX","qrY","fontSize","nameX","nameY"].map(e=>(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-2",children:e}),(0,u.jsx)("input",{type:"number",name:e,value:P[e],onChange:q,className:"w-full bg-black/50 border border-gray-700 rounded-lg px-3 py-2 text-white focus:border-blue-500 outline-none"})]},e))]})})}),(0,u.jsx)("div",{className:"glass-panel rounded-3xl overflow-hidden border border-white/5 flex-1 flex flex-col min-h-0",children:(0,u.jsxs)("div",{className:"overflow-y-auto custom-scrollbar flex-1",children:[(0,u.jsxs)("table",{className:"w-full text-left border-collapse relative",children:[(0,u.jsx)("thead",{className:"bg-gray-950/95 backdrop-blur text-gray-400 text-xs uppercase tracking-wider sticky top-0 z-10 shadow-sm",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"p-4 w-10",children:(0,u.jsx)("input",{type:"checkbox",checked:g.length>0&&k.size===g.length,onChange:()=>{k.size===g.length?C(new Set):C(new Set(g.map(e=>e.id)))},className:"rounded border-gray-600 bg-transparent focus:ring-indigo-500"})}),(0,u.jsx)("th",{className:"p-4",children:t("colAttendee")}),(0,u.jsx)("th",{className:"p-4",children:t("colEmail")}),(0,u.jsx)("th",{className:"p-4",children:t("colStatus")}),(0,u.jsx)("th",{className:"p-4 text-right",children:t("colActions")})]})}),(0,u.jsx)(i.P.tbody,{variants:h.tl,initial:"hidden",animate:"visible",className:"divide-y divide-white/5",children:_.map(l=>(0,u.jsxs)(i.P.tr,{variants:h.tE,layout:!0,className:"hover:bg-white/5 transition-colors ".concat(k.has(l.id)?"bg-indigo-500/10":""),onClick:()=>(e=>{const t=new Set(k);t.has(e)?t.delete(e):t.add(e),C(t)})(l.id),children:[(0,u.jsx)("td",{className:"p-4",children:(0,u.jsx)("input",{type:"checkbox",checked:k.has(l.id),onChange:()=>{},className:"rounded border-gray-600 bg-transparent focus:ring-indigo-500 pointer-events-none"})}),(0,u.jsx)("td",{className:"p-4 font-medium selectable",children:l.attendeeName}),(0,u.jsx)("td",{className:"p-4 text-gray-400 selectable",children:l.attendeeEmail}),(0,u.jsxs)("td",{className:"p-4",children:[(0,u.jsx)("span",{className:"px-2 py-1 rounded text-xs font-bold ".concat("checked-in"===l.status?"bg-green-500/20 text-green-400":"bg-blue-500/20 text-blue-400"),children:l.status}),"sent"===l.emailStatus&&(0,u.jsx)("span",{className:"ml-2 text-xs",children:"\u2705 Sent"})]}),(0,u.jsxs)("td",{className:"p-4 text-right space-x-2 flex justify-end",onClick:e=>e.stopPropagation(),children:[(0,u.jsx)(c.A,{variant:"secondary",onClick:()=>(async l=>{v(!0);try{const s=await Promise.resolve().then(a.bind(a,1200)).then(t=>t.getEmailPreview(e,l.id,S,P)),n=P.messageBefore||t("emailDefaultMsgBefore",e),i=P.messageAfter||t("emailDefaultMsgAfter"),r=(0,u.jsx)("div",{className:"p-0 bg-gray-50 text-gray-800 rounded-xl max-w-2xl mx-auto border shadow-lg max-h-[80vh] overflow-y-auto",children:(0,u.jsxs)("div",{className:"bg-white p-8 text-center",children:[(0,u.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-900"}),(0,u.jsx)("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap",children:n}),(0,u.jsx)("div",{className:"mb-6",children:(0,u.jsx)("img",{src:s,alt:"Ticket Preview for ".concat(l.attendeeName),loading:"lazy",className:"w-full h-auto rounded shadow-lg border"})}),(0,u.jsx)("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap",children:i}),(0,u.jsxs)("p",{className:"text-xs text-gray-400 mt-8 pt-4 border-t",children:["Ticket ID: ",l.id]})]})});z({type:"custom",title:t("btnSimulate"),body:r,contentComponent:()=>r})}catch(s){T("Preview failed: ".concat(s.message))}finally{v(!1)}})(l),className:"w-auto py-1.5 px-3 text-xs bg-gray-800 border-white/10",children:t("btnSimulate")}),(0,u.jsx)(c.A,{variant:"secondary",onClick:()=>(async a=>{if(!a.attendeeEmail)return T("This ticket has no email address.");j(!0);try{await(0,d.z9)(e,a.id,S,P,P.messageBefore,P.messageAfter,P.emailSubject,P.senderName),alert(t("emailSent",a.attendeeEmail))}catch(l){T("".concat(t("importFailed"),": ").concat(l.message))}finally{j(!1)}})(l),disabled:y,loading:y,className:"w-auto py-1.5 px-3 text-xs bg-indigo-600/20 text-indigo-300 border-indigo-500/30 hover:bg-indigo-600/40",children:t("btnHarass")})]})]},l.id))})]}),0===g.length&&!f&&(0,u.jsx)("div",{className:"p-12 text-center text-gray-500",children:t("emptyEmail")})]})})]})]}),(0,u.jsx)(o.A,{isOpen:!!M,onClose:B,content:M||{}})]}):(0,u.jsxs)(r.A,{children:[(0,u.jsx)("div",{className:"flex-1 flex items-center justify-center text-gray-500 h-full",children:t("errorNoEventSelected")}),(0,u.jsx)(o.A,{isOpen:!!M,onClose:B,content:M||{}})]})}},570:(e,t,a)=>{a.d(t,{A:()=>g});var l=a(5043),s=a(2465),n=a(9570),i=a(6089),r=a(2136),o=a(5683),c=a(3840),d=a(579);const x=e=>{let{onNewEvent:t,onDeleteEvent:a,onRaffle:x}=e;const{events:m,loading:p,eventId:h,selectEvent:u}=(0,i._)(),{t:g,cycleLanguage:b,language:f}=(0,r.o)(),[v,y]=(0,l.useState)(!1);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"xl:hidden fixed top-4 left-4 z-50",children:(0,d.jsx)(s.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>y(!v),"aria-label":v?"Close Sidebar":"Open Sidebar",className:"bg-gray-900/80 backdrop-blur text-white p-2.5 rounded-xl border border-gray-700 shadow-lg",children:v?(0,d.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):(0,d.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),(0,d.jsx)("div",{className:"fixed z-50 w-72 bg-gradient-to-b from-slate-900/80 to-slate-950/80 backdrop-blur-2xl border border-white/10 shadow-2xl transform transition-all duration-300 ease-out xl:translate-x-0 xl:top-4 xl:left-4 xl:bottom-4 xl:rounded-[2.5rem] inset-y-0 left-0 ".concat(v?"translate-x-0":"-translate-x-full"),children:(0,d.jsxs)("div",{className:"p-6 flex flex-col h-full relative overflow-hidden",children:[(0,d.jsx)("div",{className:"absolute top-0 left-0 w-full h-32 bg-violet-600/10 blur-3xl -z-10 pointer-events-none"}),(0,d.jsx)(s.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-8 mt-2 flex justify-between items-center",children:(0,d.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-2 cursor-pointer",onClick:()=>window.location.hash="",children:[(0,d.jsx)("span",{className:"w-8 h-8 bg-gradient-to-br from-violet-500 via-fuchsia-500 to-pink-500 rounded-lg flex items-center justify-center text-lg shadow-lg shadow-violet-500/20",children:"\ud83c\udfab"}),(0,d.jsx)("span",{className:"rainbow-text font-extrabold tracking-tight",children:g("appTitle")})]})}),(0,d.jsxs)(c.A,{variant:"glass",onClick:b,className:"mb-6 w-full py-2 px-3 text-xs font-bold text-slate-400 uppercase tracking-wider justify-between group",children:[(0,d.jsx)("span",{children:"Language"}),(0,d.jsx)("span",{className:"text-white group-hover:text-violet-300 transition-colors",children:"en"===f?"\ud83c\uddfa\ud83c\uddf8 EN":"\ud83c\uddf9\ud83c\uddfc TW"})]}),(0,d.jsxs)("div",{className:"flex-grow overflow-y-auto pr-2 custom-scrollbar",children:[(0,d.jsx)("h3",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-4 px-2",children:g("yourEvents")}),p&&(0,d.jsx)("div",{className:"flex justify-center py-4",children:(0,d.jsx)("div",{className:"w-6 h-6 border-2 border-pink-500 border-t-transparent rounded-full animate-spin"})}),(0,d.jsx)(s.P.div,{variants:o.tl,initial:"hidden",animate:"visible",className:"space-y-1",children:m.map(e=>{const t=h===e.id;return(0,d.jsxs)(s.P.div,{variants:o.tE,className:"relative group flex items-center",children:[(0,d.jsxs)("button",{onClick:()=>{var t;t=e.id,u(t),y(!1),y(!1)},className:"relative w-full text-left px-4 py-3.5 rounded-xl transition-all duration-300 ".concat(t?"text-white font-bold":"text-slate-400 hover:text-slate-200 hover:bg-white/5"),children:[t&&(0,d.jsx)(s.P.div,{layoutId:"activeEventBackground",className:"absolute inset-0 bg-gradient-to-r from-white/10 to-transparent border border-white/10 rounded-xl shadow-lg backdrop-blur-sm",initial:!1,transition:{type:"spring",stiffness:500,damping:30}}),t&&(0,d.jsx)(s.P.div,{layoutId:"activeEventIndicator",className:"absolute left-0 top-0 bottom-0 my-auto w-1 h-6 bg-gradient-to-b from-violet-500 via-fuchsia-500 to-pink-500 rounded-r-full shadow-[0_0_15px_rgba(168,85,247,0.6)]",initial:!1,transition:{type:"spring",stiffness:500,damping:30}}),(0,d.jsx)("span",{className:"relative z-10 truncate block pl-3 transition-transform duration-200 group-hover:translate-x-1",children:e.name||e.id})]}),(0,d.jsx)(s.P.button,{whileHover:{scale:1.1,color:"#ef4444"},whileTap:{scale:.9},onClick:t=>{t.stopPropagation(),a(e.id)},className:"absolute right-2 z-20 p-2 text-slate-500 opacity-0 group-hover:opacity-100 transition-all duration-200 hover:bg-white/10 rounded-lg",title:"Delete Event",children:(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},e.id)})}),h&&(0,d.jsxs)(s.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"mt-8 mb-4 px-1",children:[(0,d.jsx)("h3",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3 px-2",children:g("quickTools")}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,d.jsxs)(c.A,{variant:"glass",onClick:x,className:"p-3 h-20 flex-col gap-2",children:[(0,d.jsx)("div",{className:"text-xl group-hover:scale-110 transition-transform duration-300 drop-shadow-[0_0_8px_rgba(255,255,255,0.3)]",children:"\ud83c\udfb2"}),(0,d.jsx)("div",{className:"text-[10px] text-slate-400 font-medium",children:g("raffle")})]}),(0,d.jsxs)(c.A,{variant:"glass",onClick:()=>window.location.hash="#email",className:"p-3 h-20 flex-col gap-2",children:[(0,d.jsx)("div",{className:"text-xl group-hover:scale-110 transition-transform duration-300 drop-shadow-[0_0_8px_rgba(255,255,255,0.3)]",children:"\u2709\ufe0f"}),(0,d.jsx)("div",{className:"text-[10px] text-slate-400 font-medium",children:g("email")})]})]})]})]}),(0,d.jsx)("div",{className:"mt-auto pt-6 border-t border-white/5",children:(0,d.jsxs)(c.A,{onClick:t,className:"w-full py-3.5 px-4 shadow-lg",children:[(0,d.jsx)("span",{className:"text-xl font-light relative z-10 leading-none pb-1",children:"+"}),(0,d.jsx)("span",{className:"font-medium relative z-10",children:g("createEvent")})]})}),(0,d.jsx)("div",{className:"text-[10px] text-slate-600 text-center mt-6 pb-2 select-none opacity-50",children:g("sidebarFooter")})]})}),(0,d.jsx)(n.N,{children:v&&(0,d.jsx)(s.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 lg:hidden",onClick:()=>y(!1)})})]})};var m=a(28);const p=e=>{let{children:t,className:a=""}=e;return(0,d.jsx)(s.P.div,{initial:{opacity:0,y:20,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.98},transition:{duration:.4,ease:[.22,1,.36,1]},className:"w-full h-full flex flex-col ".concat(a),children:t})};var h=a(6555),u=a(1200);const g=e=>{let{children:t}=e;const{eventId:a,selectEvent:l,triggerRefresh:s,fetchEvents:n}=(0,i._)(),{modalContent:o,hideModal:c,showErrorModal:g,showPromptModal:b,showConfirmModal:f,showModal:v}=(0,h.h)(),{t:y}=(0,r.o)();return(0,d.jsxs)("div",{className:"flex h-screen bg-transparent text-slate-200 font-sans overflow-hidden",children:[(0,d.jsx)(x,{currentEventId:a,onSelectEvent:l,onNewEvent:()=>{b(y("modalPromptTitle"),"Enter a unique ID for the new event (e.g., concert-2025).",async e=>{if(e){const a=e.trim().toLowerCase().replace(/\s+/g,"-");try{await(0,u.lh)(a),l(a),s()}catch(t){g("Failed to create event: ".concat(t.message))}}c()})},onDeleteEvent:e=>{f(y("modalDeleteEventTitle"),y("modalDeleteEventBody",e),async()=>{try{await(0,u.SX)(e),a===e&&l(null),n(),c()}catch(t){g("Failed to delete event: "+t.message)}})},onRaffle:async()=>{if(a)try{const e=await(0,u.ah)(a);v({type:"alert",title:y("raffleWinnerTitle"),contentComponent:()=>(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"text-6xl mb-4 animate-bounce",children:"\ud83c\udfc6"}),(0,d.jsx)("h3",{className:"text-2xl font-bold text-white mb-2",children:e.winner.name}),(0,d.jsx)("p",{className:"text-gray-400",children:e.winner.email}),(0,d.jsxs)("div",{className:"mt-6 text-xs text-gray-600 uppercase tracking-widest",children:[y("poolSize")," ",e.poolSize]})]})})}catch(e){g(e.message)}},refreshTrigger:0}),(0,d.jsx)("div",{className:"flex-1 flex flex-col min-w-0 relative xl:ml-80 transition-all duration-300 h-full",children:(0,d.jsx)(p,{children:t})}),(0,d.jsx)(m.A,{isOpen:!!o,onClose:c,content:o||{}})]})}},3840:(e,t,a)=>{a.d(t,{A:()=>o});var l=a(5043),s=a(9570),n=a(2465),i=a(5683),r=a(579);const o=e=>{let{children:t,onClick:a,variant:o="primary",className:c="",disabled:d=!1,loading:x=!1,icon:m,loadingText:p,type:h="button",title:u}=e;const[g,b]=(0,l.useState)("idle"),f=x?"loading":g,v={primary:"btn-primary",glass:"glass-interactive text-slate-200 hover:text-white",danger:"btn-danger",secondary:"btn-neutral"},y=v[o]||v.primary;return(0,r.jsx)(n.P.button,{type:h,disabled:d||"loading"===f,onClick:"submit"===h?void 0:async e=>{if("loading"!==f&&!d&&a)try{x||b("loading"),await a(e),x||(b("success"),navigator.vibrate&&navigator.vibrate([10,30,10]),setTimeout(()=>b("idle"),2e3))}catch(t){console.error("Button Action Failed:",t),x||(b("error"),navigator.vibrate&&navigator.vibrate(100),setTimeout(()=>b("idle"),2e3))}},onTapStart:()=>{!d&&"idle"===f&&navigator.vibrate&&navigator.vibrate(15)},title:u,variants:i.XW,whileHover:"idle"!==f||d?"rest":"hover",whileTap:"idle"!==f||d?"rest":"tap",className:"".concat("w-full py-3.5 px-4 rounded-xl font-bold transition-all flex items-center justify-center gap-2 shadow-lg relative overflow-hidden focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 focus:outline-none"," ").concat(y," ").concat(d?"opacity-50 cursor-not-allowed grayscale":""," ").concat(c),children:(0,r.jsx)(s.N,{mode:"wait",children:"loading"===f?(0,r.jsxs)(n.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),p&&(0,r.jsx)("span",{children:p})]},"loading"):"success"===f?(0,r.jsxs)(n.P.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},className:"flex items-center gap-2 text-white",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),(0,r.jsx)("span",{children:"Done"})]},"success"):"error"===f?(0,r.jsxs)(n.P.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"flex items-center gap-2 text-red-200",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),(0,r.jsx)("span",{children:"Error"})]},"error"):(0,r.jsxs)(n.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"flex items-center gap-2",children:[t,m&&(0,r.jsx)("span",{className:"text-lg",children:m})]},"idle")})})}},6555:(e,t,a)=>{a.d(t,{h:()=>n});var l=a(5043),s=a(2136);const n=()=>{const[e,t]=(0,l.useState)(null),{t:a}=(0,s.o)(),n=(0,l.useCallback)(e=>{t(e)},[]),i=(0,l.useCallback)(()=>{t(null)},[]),r=(0,l.useCallback)(e=>{n({type:"alert",title:a("modalError"),body:e})},[n,a]),o=(0,l.useCallback)((e,t,a)=>{n({type:"confirm",title:e,body:t,onConfirm:a})},[n]),c=(0,l.useCallback)((e,t,a)=>{n({type:"prompt",title:e,body:t,onConfirm:a})},[n]),d=(0,l.useCallback)((e,t,a)=>{n({type:"qr-code",title:e,body:t,qrValue:a})},[n]);return{modalContent:e,showModal:n,hideModal:i,showErrorModal:r,showConfirmModal:o,showPromptModal:c,showQrCodeModal:d}}}}]);
//# sourceMappingURL=373.1b0ed70e.chunk.js.map