"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[598],{28:(e,t,a)=>{a.d(t,{A:()=>h});var s=a(2555),n=(a(5043),a(9570)),l=a(2465),i=a(1614),r=a(2136),o=a(5683),c=a(3840),d=a(579);const h=e=>{let{isOpen:t,onClose:a,content:h}=e;const{t:x}=(0,r.o)();return(0,d.jsx)(n.N,{children:t&&(0,d.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{duration:.2}},className:"fixed inset-0 bg-black/80 backdrop-blur-md flex justify-center items-center z-50 p-4",onClick:a,children:(0,d.jsxs)(l.P.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},transition:o.Ux.spring,className:"glass-panel w-full max-w-md border border-white/10",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"p-6 border-b border-purple-500/20 flex justify-between items-center",children:[(0,d.jsx)("h3",{className:"text-xl font-bold text-white tracking-wider",children:(null===h||void 0===h?void 0:h.title)||x("modalDefaultTitle")}),(0,d.jsx)(l.P.button,{whileHover:{scale:1.05},whileTap:{scale:.9},onClick:a,"aria-label":"Close Modal",className:"text-gray-400 hover:text-white text-2xl w-8 h-8 flex items-center justify-center rounded-full hover:bg-white/10 transition-colors",children:"\xd7"})]}),(0,d.jsxs)("div",{className:"p-6 text-center",children:[h.contentComponent?h.contentComponent():(0,d.jsx)("p",{className:"text-gray-300 mb-6",children:h.body}),("qr-code"===h.type||"setup-qr"===h.type)&&(0,d.jsx)("div",{className:"flex justify-center bg-white p-4 rounded-lg",children:(0,d.jsx)(i.Xe,{value:h.qrValue,size:256,level:"H"})}),"alert"===h.type&&(0,d.jsx)("div",{className:"flex justify-center gap-4 mt-4",children:(0,d.jsx)(c.A,{onClick:a,className:"w-auto px-6 py-2",children:x("btnOk")})}),"confirm"===h.type&&(0,d.jsxs)("div",{className:"flex justify-center gap-4 mt-4",children:[(0,d.jsx)(c.A,{variant:"secondary",onClick:a,className:"w-auto px-6 py-2 bg-gray-700 hover:bg-gray-600 border-none",children:x("btnCancel")}),(0,d.jsx)(c.A,{onClick:()=>{h.onConfirm(),a()},className:"w-auto px-6 py-2",children:x("btnConfirm")})]}),"prompt"===h.type&&(0,d.jsxs)("div",{className:"flex flex-col items-center gap-4 mt-4",children:[(0,d.jsx)("input",{type:"text",id:"prompt-input",className:"w-full bg-black border border-gray-700 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-purple-500 focus:outline-none transition-all"}),(0,d.jsxs)("div",{className:"flex justify-center gap-4 mt-4",children:[(0,d.jsx)(c.A,{variant:"secondary",onClick:a,className:"w-auto px-6 py-2 bg-gray-700 hover:bg-gray-600 border-none",children:x("btnCancel")}),(0,d.jsx)(c.A,{onClick:()=>{const e=document.getElementById("prompt-input");h.onConfirm(e.value),a()},className:"w-auto px-6 py-2",children:x("btnConfirm")})]})]}),"edit-ticket"===h.type&&(0,d.jsxs)("div",{className:"flex flex-col items-center gap-4 mt-4",children:[(0,d.jsx)("input",{type:"text",id:"edit-name-input",defaultValue:h.ticket.attendeeName,className:"w-full bg-black border border-gray-700 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-purple-500 focus:outline-none transition-all"}),(0,d.jsx)("input",{type:"email",id:"edit-email-input",defaultValue:h.ticket.attendeeEmail,className:"w-full bg-black border border-gray-700 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-purple-500 focus:outline-none transition-all"}),(0,d.jsxs)("div",{className:"flex justify-center gap-4 mt-4",children:[(0,d.jsx)(c.A,{variant:"secondary",onClick:a,className:"w-auto px-6 py-2 bg-gray-700 hover:bg-gray-600 border-none",children:x("btnCancel")}),(0,d.jsx)(c.A,{onClick:()=>{const e=document.getElementById("edit-name-input"),t=document.getElementById("edit-email-input");h.onConfirm((0,s.A)((0,s.A)({},h.ticket),{},{attendeeName:e.value,attendeeEmail:t.value})),a()},className:"w-auto px-6 py-2",children:x("btnSave")})]})]})]})]})})})}},570:(e,t,a)=>{a.d(t,{A:()=>v});var s=a(5043),n=a(2465),l=a(9570),i=a(6089),r=a(2136),o=a(5683),c=a(3840),d=a(579);const h=e=>{let{onNewEvent:t,onDeleteEvent:a,onRaffle:h}=e;const{events:x,loading:m,eventId:p,selectEvent:u}=(0,i._)(),{t:v,cycleLanguage:g,language:f}=(0,r.o)(),[b,j]=(0,s.useState)(!1);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"xl:hidden fixed top-4 left-4 z-50",children:(0,d.jsx)(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>j(!b),"aria-label":b?"Close Sidebar":"Open Sidebar",className:"bg-gray-900/80 backdrop-blur text-white p-2.5 rounded-xl border border-gray-700 shadow-lg",children:b?(0,d.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):(0,d.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),(0,d.jsx)("div",{className:"fixed z-50 w-72 bg-gradient-to-b from-slate-900/80 to-slate-950/80 backdrop-blur-2xl border border-white/10 shadow-2xl transform transition-all duration-300 ease-out xl:translate-x-0 xl:top-4 xl:left-4 xl:bottom-4 xl:rounded-[2.5rem] inset-y-0 left-0 ".concat(b?"translate-x-0":"-translate-x-full"),children:(0,d.jsxs)("div",{className:"p-6 flex flex-col h-full relative overflow-hidden",children:[(0,d.jsx)("div",{className:"absolute top-0 left-0 w-full h-32 bg-violet-600/10 blur-3xl -z-10 pointer-events-none"}),(0,d.jsx)(n.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-8 mt-2 flex justify-between items-center",children:(0,d.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-2 cursor-pointer",onClick:()=>window.location.hash="",children:[(0,d.jsx)("span",{className:"w-8 h-8 bg-gradient-to-br from-violet-500 via-fuchsia-500 to-pink-500 rounded-lg flex items-center justify-center text-lg shadow-lg shadow-violet-500/20",children:"\ud83c\udfab"}),(0,d.jsx)("span",{className:"rainbow-text font-extrabold tracking-tight",children:v("appTitle")})]})}),(0,d.jsxs)(c.A,{variant:"glass",onClick:g,className:"mb-6 w-full py-2 px-3 text-xs font-bold text-slate-400 uppercase tracking-wider justify-between group",children:[(0,d.jsx)("span",{children:"Language"}),(0,d.jsx)("span",{className:"text-white group-hover:text-violet-300 transition-colors",children:"en"===f?"\ud83c\uddfa\ud83c\uddf8 EN":"\ud83c\uddf9\ud83c\uddfc TW"})]}),(0,d.jsxs)("div",{className:"flex-grow overflow-y-auto pr-2 custom-scrollbar",children:[(0,d.jsx)("h3",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-4 px-2",children:v("yourEvents")}),m&&(0,d.jsx)("div",{className:"flex justify-center py-4",children:(0,d.jsx)("div",{className:"w-6 h-6 border-2 border-pink-500 border-t-transparent rounded-full animate-spin"})}),(0,d.jsx)(n.P.div,{variants:o.tl,initial:"hidden",animate:"visible",className:"space-y-1",children:x.map(e=>{const t=p===e.id;return(0,d.jsxs)(n.P.div,{variants:o.tE,className:"relative group flex items-center",children:[(0,d.jsxs)("button",{onClick:()=>{var t;t=e.id,u(t),j(!1),j(!1)},className:"relative w-full text-left px-4 py-3.5 rounded-xl transition-all duration-300 ".concat(t?"text-white font-bold":"text-slate-400 hover:text-slate-200 hover:bg-white/5"),children:[t&&(0,d.jsx)(n.P.div,{layoutId:"activeEventBackground",className:"absolute inset-0 bg-gradient-to-r from-white/10 to-transparent border border-white/10 rounded-xl shadow-lg backdrop-blur-sm",initial:!1,transition:{type:"spring",stiffness:500,damping:30}}),t&&(0,d.jsx)(n.P.div,{layoutId:"activeEventIndicator",className:"absolute left-0 top-0 bottom-0 my-auto w-1 h-6 bg-gradient-to-b from-violet-500 via-fuchsia-500 to-pink-500 rounded-r-full shadow-[0_0_15px_rgba(168,85,247,0.6)]",initial:!1,transition:{type:"spring",stiffness:500,damping:30}}),(0,d.jsx)("span",{className:"relative z-10 truncate block pl-3 transition-transform duration-200 group-hover:translate-x-1",children:e.name||e.id})]}),(0,d.jsx)(n.P.button,{whileHover:{scale:1.1,color:"#ef4444"},whileTap:{scale:.9},onClick:t=>{t.stopPropagation(),a(e.id)},className:"absolute right-2 z-20 p-2 text-slate-500 opacity-0 group-hover:opacity-100 transition-all duration-200 hover:bg-white/10 rounded-lg",title:"Delete Event",children:(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},e.id)})}),p&&(0,d.jsxs)(n.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"mt-8 mb-4 px-1",children:[(0,d.jsx)("h3",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3 px-2",children:v("quickTools")}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,d.jsxs)(c.A,{variant:"glass",onClick:h,className:"p-3 h-20 flex-col gap-2",children:[(0,d.jsx)("div",{className:"text-xl group-hover:scale-110 transition-transform duration-300 drop-shadow-[0_0_8px_rgba(255,255,255,0.3)]",children:"\ud83c\udfb2"}),(0,d.jsx)("div",{className:"text-[10px] text-slate-400 font-medium",children:v("raffle")})]}),(0,d.jsxs)(c.A,{variant:"glass",onClick:()=>window.location.hash="#email",className:"p-3 h-20 flex-col gap-2",children:[(0,d.jsx)("div",{className:"text-xl group-hover:scale-110 transition-transform duration-300 drop-shadow-[0_0_8px_rgba(255,255,255,0.3)]",children:"\u2709\ufe0f"}),(0,d.jsx)("div",{className:"text-[10px] text-slate-400 font-medium",children:v("email")})]})]})]})]}),(0,d.jsx)("div",{className:"mt-auto pt-6 border-t border-white/5",children:(0,d.jsxs)(c.A,{onClick:t,className:"w-full py-3.5 px-4 shadow-lg",children:[(0,d.jsx)("span",{className:"text-xl font-light relative z-10 leading-none pb-1",children:"+"}),(0,d.jsx)("span",{className:"font-medium relative z-10",children:v("createEvent")})]})}),(0,d.jsx)("div",{className:"text-[10px] text-slate-600 text-center mt-6 pb-2 select-none opacity-50",children:v("sidebarFooter")})]})}),(0,d.jsx)(l.N,{children:b&&(0,d.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 lg:hidden",onClick:()=>j(!1)})})]})};var x=a(28);const m=e=>{let{children:t,className:a=""}=e;return(0,d.jsx)(n.P.div,{initial:{opacity:0,y:20,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.98},transition:{duration:.4,ease:[.22,1,.36,1]},className:"w-full h-full flex flex-col ".concat(a),children:t})};var p=a(6555),u=a(1200);const v=e=>{let{children:t}=e;const{eventId:a,selectEvent:s,triggerRefresh:n,fetchEvents:l}=(0,i._)(),{modalContent:o,hideModal:c,showErrorModal:v,showPromptModal:g,showConfirmModal:f,showModal:b}=(0,p.h)(),{t:j}=(0,r.o)();return(0,d.jsxs)("div",{className:"flex h-screen bg-transparent text-slate-200 font-sans overflow-hidden",children:[(0,d.jsx)(h,{currentEventId:a,onSelectEvent:s,onNewEvent:()=>{g(j("modalPromptTitle"),"Enter a unique ID for the new event (e.g., concert-2025).",async e=>{if(e){const a=e.trim().toLowerCase().replace(/\s+/g,"-");try{await(0,u.lh)(a),s(a),n()}catch(t){v("Failed to create event: ".concat(t.message))}}c()})},onDeleteEvent:e=>{f(j("modalDeleteEventTitle"),j("modalDeleteEventBody",e),async()=>{try{await(0,u.SX)(e),a===e&&s(null),l(),c()}catch(t){v("Failed to delete event: "+t.message)}})},onRaffle:async()=>{if(a)try{const e=await(0,u.ah)(a);b({type:"alert",title:j("raffleWinnerTitle"),contentComponent:()=>(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"text-6xl mb-4 animate-bounce",children:"\ud83c\udfc6"}),(0,d.jsx)("h3",{className:"text-2xl font-bold text-white mb-2",children:e.winner.name}),(0,d.jsx)("p",{className:"text-gray-400",children:e.winner.email}),(0,d.jsxs)("div",{className:"mt-6 text-xs text-gray-600 uppercase tracking-widest",children:[j("poolSize")," ",e.poolSize]})]})})}catch(e){v(e.message)}},refreshTrigger:0}),(0,d.jsx)("div",{className:"flex-1 flex flex-col min-w-0 relative xl:ml-80 transition-all duration-300 h-full",children:(0,d.jsx)(m,{children:t})}),(0,d.jsx)(x.A,{isOpen:!!o,onClose:c,content:o||{}})]})}},1598:(e,t,a)=>{a.r(t),a.d(t,{default:()=>E});var s=a(2555),n=a(5043),l=a(9570),i=a(2465),r=a(570),o=a(1200),c=a(2136),d=a(3840),h=a(579);const x=e=>{let{eventId:t,onTicketCreated:a,onApiError:s}=e;const[l,r]=(0,n.useState)(""),[x,m]=(0,n.useState)(""),[p,u]=(0,n.useState)(!1),{t:v}=(0,c.o)();return(0,h.jsxs)(i.P.div,{layout:!0,className:"glass-panel p-6 relative overflow-hidden group",children:[(0,h.jsx)("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-32 h-32 bg-gradient-to-tr from-violet-500/20 via-pink-500/20 to-blue-500/20 rounded-full blur-3xl group-hover:scale-110 transition-transform duration-500"}),(0,h.jsxs)("div",{className:"relative z-10",children:[(0,h.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,h.jsx)("div",{className:"p-3 bg-gradient-to-br from-violet-500/20 to-pink-500/20 rounded-xl text-white",children:(0,h.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})})}),(0,h.jsx)("h2",{className:"text-xl font-bold text-white",children:v("createTitle")})]}),(0,h.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u(!0);try{const e=await(0,o.Z2)(t,l,x);a(e),r(""),m("")}catch(n){s(n.message)}finally{u(!1)}},className:"space-y-4",children:[(0,h.jsxs)("div",{className:"space-y-2",children:[(0,h.jsx)("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider ml-1",children:v("labelIdentity")}),(0,h.jsx)(i.P.input,{whileFocus:{scale:1.01,borderColor:"#ec4899"},type:"text",placeholder:v("placeholderIdentity"),value:l,onChange:e=>r(e.target.value),required:!0,className:"w-full bg-black/50 border border-gray-700 rounded-xl px-4 py-3 text-white placeholder-gray-600 focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none transition-all hover:border-gray-600"})]}),(0,h.jsxs)("div",{className:"space-y-2",children:[(0,h.jsx)("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider ml-1",children:v("labelEmail")}),(0,h.jsx)(i.P.input,{whileFocus:{scale:1.01,borderColor:"#ec4899"},type:"email",placeholder:v("placeholderEmail"),value:x,onChange:e=>m(e.target.value),required:!0,className:"w-full bg-black/50 border border-gray-700 rounded-xl px-4 py-3 text-white placeholder-gray-600 focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none transition-all hover:border-gray-600"})]}),(0,h.jsx)(d.A,{type:"submit",loading:p,icon:"\u2728",loadingText:v("btnProcessing")||"Processing...",children:v("btnCreate")})]})]})]})},m=e=>{let{status:t}=e;const a={"checked-in":{style:"bg-green-500/10 text-green-400 border-green-500/20",icon:(0,h.jsx)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}),label:"CHECKED IN"},"on-leave":{style:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",icon:(0,h.jsx)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),label:"ON LEAVE"},valid:{style:"bg-blue-500/10 text-blue-400 border-blue-500/20",icon:(0,h.jsx)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),label:"VALID"}}[t]||{style:"bg-gray-700 text-gray-400",icon:null,label:t};return(0,h.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 text-[10px] font-bold rounded-md border ".concat(a.style," transition-colors"),children:[a.icon,a.label]})};var p=a(5683);const u=(0,n.memo)(e=>{let{ticket:t,index:a,onCheckIn:s,onShowQR:n,onEdit:l,onDelete:r}=e;const{t:o}=(0,c.o)();return(0,h.jsxs)(i.P.tr,{layout:!0,variants:p.tE,initial:"hidden",animate:"visible",exit:"exit",className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[(0,h.jsx)("td",{className:"p-4 text-slate-500 font-mono text-xs",children:a}),(0,h.jsx)("td",{className:"p-4",children:(0,h.jsx)(m,{status:t.status})}),(0,h.jsxs)("td",{className:"p-4 font-medium text-slate-200 selectable",children:[t.attendeeName,(0,h.jsx)("br",{}),(0,h.jsx)("span",{className:"text-slate-500 text-sm selectable",children:t.attendeeEmail})]}),(0,h.jsx)("td",{className:"p-4 text-right",children:(0,h.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,h.jsx)(i.P.button,{variants:p.XW,whileHover:"hover",whileTap:"tap",onClick:()=>n(t.id,t.attendeeName),className:"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:o("btnMark"),"aria-label":"View QR Code",children:(0,h.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})}),"checked-in"!==t.status&&(0,h.jsxs)(i.P.button,{variants:p.XW,whileHover:"hover",whileTap:"tap",onClick:()=>s(t),className:"px-3 py-1.5 animated-gradient-bg text-white text-xs font-bold rounded-lg flex items-center gap-1.5",title:o("btnCapture"),"aria-label":"Check In",children:[(0,h.jsx)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),o("btnCapture").toUpperCase()]}),(0,h.jsx)(i.P.button,{variants:p.XW,whileHover:"hover",whileTap:"tap",onClick:()=>l(t),className:"p-2 text-sky-400 hover:text-sky-300 hover:bg-sky-500/10 rounded-lg transition-colors",title:o("btnRetcon"),"aria-label":"Edit Ticket",children:(0,h.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,h.jsx)(i.P.button,{variants:p.XW,whileHover:"hover",whileTap:"tap",onClick:()=>r(t),className:"p-2 text-rose-400 hover:text-rose-300 hover:bg-rose-500/10 rounded-lg transition-colors",title:o("btnPurge"),"aria-label":"Delete Ticket",children:(0,h.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]})}),v=e=>{let{ticket:t,index:a,onCheckIn:s,onShowQR:n,onEdit:l,onDelete:r}=e;return(0,h.jsxs)(i.P.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},className:"glass-panel p-5 mb-6 relative overflow-hidden border-l-0 rounded-3xl",children:[(0,h.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1.5 ".concat("checked-in"===t.status?"bg-emerald-500 shadow-[0_0_15px_rgba(16,185,129,0.6)]":"bg-violet-500 shadow-[0_0_15px_rgba(139,92,246,0.6)]")}),(0,h.jsxs)("div",{className:"flex justify-between items-start mb-3 pl-3",children:[(0,h.jsxs)("div",{children:[(0,h.jsxs)("h3",{className:"font-bold text-white text-lg tracking-tight selectable",children:[(0,h.jsxs)("span",{className:"text-slate-500 mr-2 text-sm",children:["#",a]}),t.attendeeName]}),(0,h.jsx)("p",{className:"text-slate-400 text-sm selectable",children:t.attendeeEmail})]}),(0,h.jsx)(m,{status:t.status})]}),(0,h.jsxs)("div",{className:"flex gap-3 pl-3 pb-1 mt-4",children:[(0,h.jsx)("button",{onClick:()=>n(t.id,t.attendeeName),className:"flex-1 btn-neutral py-2.5 px-4 text-sm whitespace-nowrap","aria-label":"View QR Code",children:"QR Code"}),"checked-in"!==t.status&&(0,h.jsx)("button",{onClick:()=>s(t),className:"flex-1 btn-success py-2.5 px-4 text-sm whitespace-nowrap","aria-label":"Check In",children:"Check In"}),(0,h.jsxs)("div",{className:"flex gap-2",children:[(0,h.jsx)("button",{onClick:()=>l(t),className:"btn-neutral w-10 flex items-center justify-center text-sky-400 hover:text-sky-300","aria-label":"Edit Ticket",children:(0,h.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),(0,h.jsx)("button",{onClick:()=>r(t),className:"btn-neutral w-10 flex items-center justify-center text-rose-400 hover:text-rose-300","aria-label":"Delete Ticket",children:(0,h.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})};var g=a(7302);const f=()=>(0,h.jsxs)("div",{className:"glass-panel p-6 rounded-3xl border border-white/5 bg-slate-900/40 backdrop-blur-xl space-y-6",children:[(0,h.jsxs)("div",{className:"flex gap-4",children:[(0,h.jsx)(g.A,{height:"48px",width:"100%",className:"rounded-xl"}),(0,h.jsx)(g.A,{height:"48px",width:"120px",className:"rounded-xl"})]}),(0,h.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/5",children:[(0,h.jsx)(g.A,{height:"16px",width:"30px"}),(0,h.jsx)(g.A,{height:"16px",width:"60px"}),(0,h.jsx)(g.A,{height:"16px",width:"100px"}),(0,h.jsx)(g.A,{height:"16px",width:"80px"})]}),(0,h.jsx)("div",{className:"space-y-0",children:[...Array(5)].map((e,t)=>(0,h.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-white/5 last:border-0",children:[(0,h.jsxs)("div",{className:"flex items-center gap-4",children:[(0,h.jsx)(g.A,{height:"16px",width:"20px"}),(0,h.jsx)(g.A,{height:"24px",width:"80px",className:"rounded-full"}),(0,h.jsxs)("div",{children:[(0,h.jsx)(g.A,{height:"20px",width:"150px",className:"mb-2"}),(0,h.jsx)(g.A,{height:"14px",width:"200px"})]})]}),(0,h.jsxs)("div",{className:"flex gap-2",children:[(0,h.jsx)(g.A,{height:"36px",width:"36px",className:"rounded-xl"}),(0,h.jsx)(g.A,{height:"36px",width:"100px",className:"rounded-xl"}),(0,h.jsx)(g.A,{height:"36px",width:"36px",className:"rounded-xl"}),(0,h.jsx)(g.A,{height:"36px",width:"36px",className:"rounded-xl"})]})]},t))})]}),b={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},j=e=>{let{filteredTickets:t,isLoading:a,searchTerm:s,setSearchTerm:r,onCheckIn:o,onShowQR:d,onEdit:x,onDelete:m,onImport:p}=e;const{t:g}=(0,c.o)(),[j,w]=(0,n.useState)(50),[y,k]=(0,n.useState)(!1);(0,n.useEffect)(()=>{w(50)},[s]);const N=t.slice(0,j),C=j<t.length,L=n.useRef(null);(0,n.useEffect)(()=>{const e=new IntersectionObserver(e=>{e[0].isIntersecting&&C&&!y&&(k(!0),setTimeout(()=>{w(e=>e+50),k(!1)},500))},{threshold:.1}),t=L.current;return t&&e.observe(t),()=>{t&&e.unobserve(t)}},[C,y]);return(0,h.jsxs)(i.P.div,{variants:b,initial:"hidden",animate:"visible",className:"glass-panel p-6 rounded-3xl border border-white/5 bg-slate-900/40 backdrop-blur-xl",children:[(0,h.jsxs)("div",{className:"relative mb-6 flex flex-wrap gap-4",children:[(0,h.jsxs)("div",{className:"relative flex-1 min-w-[200px]",children:[(0,h.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,h.jsx)("svg",{className:"h-5 w-5 text-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,h.jsx)("input",{type:"text",placeholder:g("searchPlaceholder"),value:s,onChange:e=>r(e.target.value),className:"w-full glass-input pl-10 pr-10"}),s&&(0,h.jsx)("button",{onClick:()=>r(""),className:"absolute inset-y-0 right-0 pr-3 pl-3 flex items-center text-slate-500 hover:text-white transition-colors","aria-label":"Clear Search",children:(0,h.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,h.jsxs)("div",{className:"flex gap-2",children:[(0,h.jsxs)("label",{className:"glass-interactive px-4 py-3 text-white rounded-xl font-bold flex items-center gap-2 whitespace-nowrap cursor-pointer",children:[(0,h.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),g("qaImport"),(0,h.jsx)("input",{type:"file",accept:".csv",onChange:p,className:"hidden"})]}),(0,h.jsxs)("button",{onClick:()=>{const e=["ID,Name,Email,Status,LastActionTime,LastActionBy",...t.map(e=>{const t=e.checkInHistory&&e.checkInHistory.length>0?e.checkInHistory[e.checkInHistory.length-1]:null;return[e.id,'"'.concat(e.attendeeName,'"'),e.attendeeEmail,e.status,t?new Date(1e3*t.timestamp._seconds||t.timestamp).toLocaleString():"",t?t.scannedBy:""].join(",")})];!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"export.csv";if(!e||!e.length)return;const a="data:text/csv;charset=utf-8,"+e.join("\n"),s=encodeURI(a),n=document.createElement("a");n.setAttribute("href",s),n.setAttribute("download",t),document.body.appendChild(n),n.click(),document.body.removeChild(n)}(e,"tickets_export.csv")},className:"glass-interactive px-4 py-3 text-white rounded-xl font-bold flex items-center gap-2 whitespace-nowrap",children:[(0,h.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),g("btnExportCsv")]})]})]}),a?(0,h.jsx)(f,{}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,h.jsxs)("table",{className:"w-full text-left border-collapse relative",children:["                        ",(0,h.jsx)("thead",{className:"sticky top-0 bg-slate-950/70 backdrop-blur-xl z-10 border-b border-white/10 text-slate-400 text-sm uppercase tracking-wider shadow-sm",children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{className:"p-4 font-semibold rounded-tl-lg w-16",children:"#"}),(0,h.jsx)("th",{className:"p-4 font-semibold",children:g("colStatus")}),(0,h.jsx)("th",{className:"p-4 font-semibold",children:g("colAttendee")}),(0,h.jsx)("th",{className:"p-4 text-right font-semibold rounded-tr-lg",children:g("colActions")})]})}),(0,h.jsx)("tbody",{className:"divide-y divide-gray-800/50",children:(0,h.jsx)(l.N,{mode:"popLayout",children:N.map((e,t)=>(0,h.jsx)(u,{index:t+1,ticket:e,onCheckIn:o,onShowQR:d,onEdit:x,onDelete:m},e.id))})})]})}),(0,h.jsx)("div",{className:"md:hidden space-y-4",children:(0,h.jsx)(l.N,{mode:"popLayout",children:N.map((e,t)=>(0,h.jsx)(v,{index:t+1,ticket:e,onCheckIn:o,onShowQR:d,onEdit:x,onDelete:m},e.id))})}),(0,h.jsx)("div",{ref:L,className:"h-16 w-full flex justify-center items-center",children:y&&(0,h.jsx)("div",{className:"w-6 h-6 border-2 border-white/20 border-t-white rounded-full animate-spin"})}),!a&&0===t.length&&(0,h.jsxs)("div",{className:"text-center py-12",children:[(0,h.jsx)("div",{className:"text-4xl mb-3",children:"\ud83d\udd0d"}),(0,h.jsx)("h3",{className:"text-lg font-medium text-white",children:g("emptyTitle")}),(0,h.jsx)("p",{className:"text-gray-500",children:g("emptyDesc")})]})]})]})},w=e=>{let{status:t,error:a,isSyncing:s}=e;const{t:n}=(0,c.o)();let l="#22c55e",r=n("liveConnected"),o={scale:[1,1.2,1],opacity:[.7,1,.7]};return"error"===t?(l="#ef4444",r=n("liveOffline"),o={opacity:[1,.5,1]}):s&&(l="#3b82f6",r="Syncing...",o={scale:[1,1.3,1],opacity:[.8,1,.8]}),(0,h.jsxs)("div",{className:"relative group flex items-center gap-2",children:[(0,h.jsx)(i.P.div,{animate:o,transition:{duration:s?1:2,repeat:1/0,ease:"easeInOut"},className:"w-3 h-3 rounded-full",style:{backgroundColor:l,boxShadow:"0 0 8px ".concat(l)}}),(0,h.jsx)("span",{className:"text-sm text-gray-400",children:r}),"error"===t&&a&&(0,h.jsx)("div",{className:"absolute bottom-full mb-2 w-max max-w-xs bg-red-900 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none left-1/2 -translate-x-1/2 z-10 shadow-lg",children:a})]})};var y=a(28),k=a(7551);var N=a(6555);var C=a(6089);const L=(0,n.lazy)(()=>a.e(975).then(a.bind(a,7975))),S=(0,n.lazy)(()=>Promise.all([a.e(839),a.e(477)]).then(a.bind(a,7477))),E=()=>{const{modalContent:e,showModal:t,hideModal:d,showErrorModal:m,showConfirmModal:u,showQrCodeModal:v}=(0,N.h)(),{eventId:f}=(0,C._)(),{t:b}=(0,c.o)(),{layout:E,setLayout:A,searchHistory:T,addToSearchHistory:P,trackAction:M}=(()=>{const[e,t]=(0,n.useState)(()=>{try{const e=localStorage.getItem("dashboardLayout");return e?JSON.parse(e):{stats:!0,chart:!0}}catch(e){return{stats:!0,chart:!0}}}),[a,l]=(0,n.useState)(()=>{try{return JSON.parse(localStorage.getItem("searchHistory")||"[]")}catch(e){return[]}}),[i,r]=(0,n.useState)(()=>{try{return JSON.parse(localStorage.getItem("actionStats")||"{}")}catch(e){return{}}});(0,n.useEffect)(()=>{localStorage.setItem("dashboardLayout",JSON.stringify(e))},[e]);const o=(0,n.useCallback)(e=>{l(t=>{const a=[e,...t.filter(t=>t!==e)].slice(0,5);return localStorage.setItem("searchHistory",JSON.stringify(a)),a})},[]),c=(0,n.useCallback)(e=>{r(t=>{const a=(0,s.A)((0,s.A)({},t),{},{[e]:(t[e]||0)+1});return localStorage.setItem("actionStats",JSON.stringify(a)),a})},[]);return{layout:e,setLayout:t,searchHistory:a,addToSearchHistory:o,actionStats:i,trackAction:c}})(),[I,B]=(0,n.useState)(Date.now());(0,n.useEffect)(()=>{if(!f)return;const e=setInterval(async()=>{try{const e=await(0,o.qu)(f,I);if(e&&e.length>0){const a=e[e.length-1];B(a.timestamp),t({type:"alert",title:"\u26a0\ufe0f Scanner Reported Issue",body:"A volunteer reported an issue at ".concat(new Date(a.timestamp).toLocaleTimeString(),". Please check the gate."),onConfirm:d})}}catch(e){console.warn("Alert poll failed",e)}},5e3);return()=>clearInterval(e)},[f,I,t,d]);const{tickets:H,isLoading:W,isSyncing:z,connectionStatus:D,connectionError:V,handleTicketCreated:_,handleManualCheckIn:O,handleUpdateTicket:R,handleDeleteTicket:Q,stats:q}=((e,t)=>{const[a,l]=(0,n.useState)([]),[i,r]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),[h,x]=(0,n.useState)("disconnected"),[m,p]=(0,n.useState)(null),[u,v]=(0,n.useState)(5e3);(0,n.useEffect)(()=>{let e;const t=()=>{v(5e3),clearTimeout(e),e=setTimeout(()=>v(3e4),6e4)};return window.addEventListener("mousemove",t),window.addEventListener("keydown",t),window.addEventListener("click",t),t(),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("keydown",t),window.removeEventListener("click",t),clearTimeout(e)}},[]),(0,n.useEffect)(()=>{if(!e)return x("disconnected"),l([]),r(!1),void d(!1);const t=async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?d(!0):(r(!0),x("connecting"),p(null));try{const a=await(0,o.oP)(e),s=Array.isArray(a)?a:[];l(e=>JSON.stringify(e)===JSON.stringify(s)?e:s),t||x("connected")}catch(a){console.error("API Error:",a),t||(x("error"),p(a.message),l([]))}finally{t?d(!1):r(!1)}};t();const a=setInterval(()=>{t(!0)},u);return()=>clearInterval(a)},[e,u]);const g=(0,n.useCallback)(e=>{l(t=>[...t,e.ticket])},[]),f=(0,n.useCallback)(async a=>{if(e)try{await(0,o.Rf)(e,a.id,"check-in"),l(e=>e.map(e=>e.id===a.id?(0,s.A)((0,s.A)({},e),{},{status:"checked-in"}):e))}catch(n){t("Manual check-in failed.")}},[e,t]),b=(0,n.useCallback)(async a=>{try{await(0,o.EZ)(e,a.id,a),l(e=>e.map(e=>e.id===a.id?a:e))}catch(s){t("Failed to update ticket.")}},[e,t]),j=(0,n.useCallback)(async a=>{try{await(0,o.cC)(e,a.id),l(e=>e.filter(e=>e.id!==a.id))}catch(s){t("Failed to delete ticket.")}},[e,t]),w=(0,n.useMemo)(()=>({total:a.length,checkedIn:a.filter(e=>"checked-in"===e.status).length,onLeave:a.filter(e=>"on-leave"===e.status).length,valid:a.filter(e=>"valid"===e.status).length}),[a]);return{tickets:a,isLoading:i,connectionStatus:h,connectionError:m,handleTicketCreated:g,handleManualCheckIn:f,handleUpdateTicket:b,handleDeleteTicket:j,stats:w,isSyncing:c}})(f,m),[F,X]=(0,n.useState)(""),[J,U]=(0,n.useState)(""),[Z,K]=(0,n.useState)(!1),[Y,$]=(0,n.useState)(!1);(0,n.useEffect)(()=>{const e=setTimeout(()=>{U(F),F.trim().length>2&&P(F)},150);return()=>{clearTimeout(e)}},[F,P]);const G=(0,n.useMemo)(()=>H.filter(e=>{var t,a;return((null===(t=e.attendeeName)||void 0===t?void 0:t.toLowerCase())||"").includes(J.toLowerCase())||((null===(a=e.attendeeEmail)||void 0===a?void 0:a.toLowerCase())||"").includes(J.toLowerCase())||e.id.toLowerCase().includes(J.toLowerCase())}),[H,J]);return(0,h.jsxs)(r.A,{children:[(0,h.jsxs)("header",{className:"sticky top-6 z-30 mx-6 rounded-2xl glass-panel px-8 py-5 flex justify-between items-center mb-8",children:[(0,h.jsx)("div",{className:"w-8 xl:hidden"}),(0,h.jsxs)("div",{className:"flex items-center gap-4 overflow-hidden",children:[(0,h.jsx)("h2",{className:"text-xl font-bold text-white truncate flex items-center gap-3",children:f?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("span",{className:"text-slate-400 text-xs hidden sm:inline uppercase tracking-widest font-bold",children:b("headerEvent")}),(0,h.jsx)("span",{className:"text-white text-xl",children:f})]}):(0,h.jsx)("span",{className:"text-slate-500 italic",children:b("headerSelect")})}),(0,h.jsx)(w,{status:D,error:V,isSyncing:z})]}),f&&(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsxs)("div",{className:"relative group hidden md:block",children:[(0,h.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,h.jsx)("svg",{className:"h-4 w-4 text-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,h.jsx)("input",{type:"text",placeholder:b("searchPlaceholder")||"Search...",value:F,onChange:e=>X(e.target.value),onFocus:()=>K(!0),onBlur:()=>setTimeout(()=>K(!1),200),className:"glass-input pl-9 pr-4 py-2 w-48 focus:w-64 transition-all text-sm rounded-lg"}),(0,h.jsx)(l.N,{children:Z&&T.length>0&&(0,h.jsx)(i.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute top-full left-0 right-0 mt-2 bg-slate-800 border border-slate-700 rounded-lg shadow-xl overflow-hidden z-50",children:(0,h.jsxs)("div",{className:"p-2",children:[(0,h.jsx)("div",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mb-1 px-2",children:"Recent"}),T.map((e,t)=>(0,h.jsxs)("button",{onClick:()=>X(e),className:"w-full text-left px-3 py-2 text-sm text-slate-300 hover:bg-slate-700 rounded transition-colors flex items-center gap-2",children:[(0,h.jsx)("span",{className:"text-slate-500",children:"\u21ba"})," ",e]},t))]})})})]}),(0,h.jsx)(i.P.button,{variants:p.XW,whileHover:"hover",whileTap:"tap",onClick:()=>$(!Y),className:"glass-interactive px-4 py-2 text-sm font-medium transition-colors rounded-lg flex items-center gap-2 ".concat(Y?"bg-slate-700 text-white":"text-slate-300 hover:text-white"),title:"Customize Dashboard",children:(0,h.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})})}),(0,h.jsx)(i.P.button,{variants:p.XW,whileHover:"hover",whileTap:"tap",onClick:async()=>{try{const{url:e}=await(0,o.lI)();e?(await navigator.clipboard.writeText("".concat(e,"/scanner")),alert(b("alertLinkCopied"))):alert(b("errorBackendURL"))}catch(e){console.error(e)}},className:"glass-interactive px-4 py-2 text-sm font-medium text-slate-300 hover:text-white flex items-center gap-2 shadow-sm",title:b("copyScannerLink"),children:(0,h.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})}),(0,h.jsxs)(i.P.button,{variants:p.XW,whileHover:"hover",whileTap:"tap",onClick:async()=>{if(M("scanner"),f)try{const e=await(0,o.qg)(),{url:t,localUrl:a}=await(0,o.lI)();let s=t,n="";if(a&&t&&a!==t){window.confirm("\ud83d\ude80 ".concat(b("scannerSpeedOpt"),"\n\n").concat(b("scannerLocalQ",a),"\n\n\u2705 ").concat(b("scannerLocalYes"),"\n\u274c ").concat(b("scannerLocalNo")))?(s=a,n=" [".concat(b("scannerLocalMode"),"]")):n=" [".concat(b("scannerPublicMode"),"]")}else!t&&a&&(s=a,n=" [".concat(b("scannerLocalOnly"),"]"));if(!s)throw new Error(b("errorBackendURL"));const l="".concat(b("headerEvent")," ").concat(f).concat(n,". ").concat(b("scannerConfigPrompt")),i={eventId:f,apiBaseUrl:s,token:e};v(b("qaScanner"),l,JSON.stringify(i))}catch(e){console.error(e),m("".concat(b("setupFailed"),": ").concat(e.message,"."))}else m(b("errorNoEventSelected"))},className:"animated-gradient-bg px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2",children:[(0,h.jsx)("span",{className:"text-lg",children:"\ud83d\udcf1"}),(0,h.jsx)("span",{className:"hidden sm:inline",children:b("qaScanner")})]})]})]}),(0,h.jsx)("main",{className:"flex-1 overflow-y-auto p-6 md:p-10 custom-scrollbar relative",children:(0,h.jsx)(l.N,{mode:"wait",children:f?(0,h.jsxs)(i.P.div,{variants:p.tl,initial:"hidden",animate:"visible",exit:{opacity:0,y:20,transition:{duration:.2}},className:"max-w-7xl mx-auto space-y-10 pb-24",children:[(0,h.jsx)(l.N,{children:Y&&(0,h.jsx)(i.P.div,{initial:{height:0,opacity:0,marginBottom:0},animate:{height:"auto",opacity:1,marginBottom:32},exit:{height:0,opacity:0,marginBottom:0},className:"overflow-hidden",children:(0,h.jsx)(k.A,{title:"Customize Layout",icon:"\ud83c\udfa8",className:"bg-slate-800/80",children:(0,h.jsx)("div",{className:"flex gap-6 p-2",children:["stats","chart"].map(e=>(0,h.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)("input",{type:"checkbox",checked:E[e],onChange:()=>A((0,s.A)((0,s.A)({},E),{},{[e]:!E[e]})),className:"sr-only peer"}),(0,h.jsx)("div",{className:"w-10 h-6 bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),(0,h.jsx)("span",{className:"text-sm font-medium text-white capitalize",children:e})]},e))})})})}),(0,h.jsx)(l.N,{children:E.stats&&(0,h.jsx)(i.P.section,{variants:p.tE,initial:"hidden",animate:"visible",exit:{opacity:0,height:0,overflow:"hidden"},children:(0,h.jsx)(n.Suspense,{fallback:(0,h.jsx)(g.A,{height:"120px",className:"rounded-3xl"}),children:(0,h.jsx)(L,{stats:q})})},"stats")}),(0,h.jsx)(l.N,{children:E.chart&&(0,h.jsx)(i.P.section,{variants:p.tE,initial:"hidden",animate:"visible",exit:{opacity:0,height:0,overflow:"hidden"},children:(0,h.jsx)(n.Suspense,{fallback:(0,h.jsx)(g.A,{height:"300px",className:"rounded-3xl"}),children:(0,h.jsx)(S,{tickets:H})})},"chart")}),(0,h.jsxs)(i.P.div,{variants:p.tE,className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[(0,h.jsx)("div",{className:"xl:col-span-1 space-y-8",children:(0,h.jsx)(x,{eventId:f,onTicketCreated:e=>{_(e),v(b("modalQrCodeTitle"),"".concat(b("modalQrCodeBodyPrefix")," ").concat(e.ticket.attendeeName),e.ticket.id)},onApiError:m})}),(0,h.jsx)("div",{className:"xl:col-span-2",children:(0,h.jsx)(j,{filteredTickets:G,isLoading:W,searchTerm:F,setSearchTerm:X,onCheckIn:e=>{u(b("modalCheckInTitle"),b("modalCheckInBody",e.attendeeName),async()=>{await O(e),d()})},onShowQR:(e,t)=>v(b("modalQrCodeTitle"),"".concat(b("modalQrCodeBodyPrefix")," ").concat(t),e),onEdit:e=>{t({type:"edit-ticket",title:b("modalEditTicketTitle"),body:b("modalEditTicketBody",e.attendeeName),ticket:e,onConfirm:async e=>{await R(e),d()}})},onDelete:e=>{u(b("modalDeleteTicketTitle"),b("modalDeleteTicketBody",e.attendeeName),async()=>{await Q(e),d()})},onImport:e=>{M("import");const t=e.target.files[0];if(!t)return;const s=new FileReader;s.onload=async e=>{const t=e.target.result;try{const e=(e=>{if(!e)return[];const t=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n").filter(e=>e.trim());if(t.length<2)return[];const a=e=>{const t=[];let a="",s=!1;for(let n=0;n<e.length;n++){const l=e[n];'"'===l?s&&'"'===e[n+1]?(a+='"',n++):s=!s:","!==l||s?a+=l:(t.push(a.trim()),a="")}return t.push(a.trim()),t.map(e=>e.replace(/^"|"$/g,""))};let s=-1,n=-1,l=-1;for(let r=0;r<Math.min(5,t.length);r++){const e=a(t[r].toLowerCase()),i=e.findIndex(e=>e.includes("name")||e.includes("\u59d3\u540d")||e.includes("attendee")),o=e.findIndex(e=>e.includes("email")||e.includes("mail")||e.includes("\u4fe1\u7bb1"));if(-1!==i&&-1!==o){s=r,n=i,l=o;break}}-1===s&&(s=t[0].includes("@")?-1:0,n=0,l=1);const i=[];for(let r=s+1;r<t.length;r++){const e=a(t[r]);if(e.length>=2){const t=e[n],a=e[l];t&&a&&a.includes("@")&&i.push({attendeeName:t,attendeeEmail:a})}}return i})(t);if(0===e.length)throw new Error(b("errorNoValidAttendees"));u(b("qaImport"),b("importPrompt",e.length),async()=>{try{const t=await Promise.resolve().then(a.bind(a,1200)).then(t=>t.importAttendees(f,e));alert(t.message)}catch(t){m("".concat(b("importFailed"),": ").concat(t.message))}finally{d()}})}catch(s){m("".concat(b("errorCsvParse"),": ").concat(s.message))}},s.readAsText(t),e.target.value=null}},f)})]})]},"dashboard"):(0,h.jsx)(i.P.div,{className:"h-full flex flex-col items-center justify-center p-4",exit:{opacity:0,scale:.95,filter:"blur(10px)",transition:{duration:.3}},children:(0,h.jsxs)(i.P.div,{variants:p.lV,initial:"hidden",animate:"visible",whileHover:"hover",className:"glass-panel p-12 rounded-[2.5rem] max-w-lg w-full text-center border border-white/10 relative overflow-hidden",children:[(0,h.jsx)("div",{className:"absolute inset-0 bg-gradient-to-tr from-violet-500/10 via-transparent to-pink-500/10 pointer-events-none"}),(0,h.jsx)("div",{className:"text-8xl mb-6 opacity-30 animate-pulse grayscale filter blur-sm",children:"\ud83c\udf9f\ufe0f"}),(0,h.jsx)("h3",{className:"text-3xl font-black text-white mb-3 tracking-tight",children:b("limboTitle")}),(0,h.jsx)("p",{className:"text-lg text-slate-400 leading-relaxed",children:b("limboDesc")})]})},"limbo")})}),(0,h.jsx)(y.A,{isOpen:!!e,onClose:d,content:e||{}})]})}},3840:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(5043),n=a(9570),l=a(2465),i=a(5683),r=a(579);const o=e=>{let{children:t,onClick:a,variant:o="primary",className:c="",disabled:d=!1,loading:h=!1,icon:x,loadingText:m,type:p="button",title:u}=e;const[v,g]=(0,s.useState)("idle"),f=h?"loading":v,b={primary:"btn-primary",glass:"glass-interactive text-slate-200 hover:text-white",danger:"btn-danger",secondary:"btn-neutral"},j=b[o]||b.primary;return(0,r.jsx)(l.P.button,{type:p,disabled:d||"loading"===f,onClick:"submit"===p?void 0:async e=>{if("loading"!==f&&!d&&a)try{h||g("loading"),await a(e),h||(g("success"),navigator.vibrate&&navigator.vibrate([10,30,10]),setTimeout(()=>g("idle"),2e3))}catch(t){console.error("Button Action Failed:",t),h||(g("error"),navigator.vibrate&&navigator.vibrate(100),setTimeout(()=>g("idle"),2e3))}},onTapStart:()=>{!d&&"idle"===f&&navigator.vibrate&&navigator.vibrate(15)},title:u,variants:i.XW,whileHover:"idle"!==f||d?"rest":"hover",whileTap:"idle"!==f||d?"rest":"tap",className:"".concat("w-full py-3.5 px-4 rounded-xl font-bold transition-all flex items-center justify-center gap-2 shadow-lg relative overflow-hidden focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 focus:outline-none"," ").concat(j," ").concat(d?"opacity-50 cursor-not-allowed grayscale":""," ").concat(c),children:(0,r.jsx)(n.N,{mode:"wait",children:"loading"===f?(0,r.jsxs)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),m&&(0,r.jsx)("span",{children:m})]},"loading"):"success"===f?(0,r.jsxs)(l.P.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},className:"flex items-center gap-2 text-white",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),(0,r.jsx)("span",{children:"Done"})]},"success"):"error"===f?(0,r.jsxs)(l.P.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"flex items-center gap-2 text-red-200",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),(0,r.jsx)("span",{children:"Error"})]},"error"):(0,r.jsxs)(l.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"flex items-center gap-2",children:[t,x&&(0,r.jsx)("span",{className:"text-lg",children:x})]},"idle")})})}},6555:(e,t,a)=>{a.d(t,{h:()=>l});var s=a(5043),n=a(2136);const l=()=>{const[e,t]=(0,s.useState)(null),{t:a}=(0,n.o)(),l=(0,s.useCallback)(e=>{t(e)},[]),i=(0,s.useCallback)(()=>{t(null)},[]),r=(0,s.useCallback)(e=>{l({type:"alert",title:a("modalError"),body:e})},[l,a]),o=(0,s.useCallback)((e,t,a)=>{l({type:"confirm",title:e,body:t,onConfirm:a})},[l]),c=(0,s.useCallback)((e,t,a)=>{l({type:"prompt",title:e,body:t,onConfirm:a})},[l]),d=(0,s.useCallback)((e,t,a)=>{l({type:"qr-code",title:e,body:t,qrValue:a})},[l]);return{modalContent:e,showModal:l,hideModal:i,showErrorModal:r,showConfirmModal:o,showPromptModal:c,showQrCodeModal:d}}},7551:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(5043),n=a(9570),l=a(2465),i=a(5683),r=a(579);const o=e=>{let{children:t,title:a,icon:o,colSpan:c=1,className:d="",isCollapsible:h=!1,defaultCollapsed:x=!1}=e;const[m,p]=(0,s.useState)(x);return(0,r.jsxs)(l.P.div,{layout:!0,variants:i.lV,initial:"hidden",animate:"visible",exit:"exit",className:"glass-panel relative overflow-hidden flex flex-col ".concat(c>1?"md:col-span-".concat(c):""," ").concat(d),children:[(a||o||h)&&(0,r.jsxs)(l.P.div,{layout:"position",className:"flex items-center justify-between p-6 pb-2 z-20",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[o&&(0,r.jsx)("span",{className:"text-xl",children:o}),a&&(0,r.jsx)("h3",{className:"text-sm font-bold uppercase tracking-widest text-slate-400",children:a})]}),h&&(0,r.jsx)(l.P.button,{variants:i.XW,whileHover:"hover",whileTap:"tap",onClick:()=>p(!m),className:"p-2 rounded-full hover:bg-white/5 text-slate-500 hover:text-white transition-colors",children:(0,r.jsx)(l.P.svg,{animate:{rotate:m?180:0},className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),(0,r.jsx)(n.N,{initial:!1,mode:"wait",children:!m&&(0,r.jsx)(l.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2,ease:"easeInOut"},className:"flex-1 p-6 pt-2 z-10",children:t},"content")})]})}}}]);
//# sourceMappingURL=598.cbd82513.chunk.js.map