{"version":3,"file":"static/js/346.e4e37fd5.chunk.js","mappings":"iLAOA,MAAMA,EACW,2BADXA,EAEM,CACJC,QAAS,UACTC,QAAS,UACTC,QAAS,UACTC,UAAW,UACXC,KAAM,UACNC,QAAS,UACTC,KAAM,UACNC,cAAe,UACfC,kBAAmB,WAXrBT,EAaO,CACLU,SAAU,IACVC,UAAW,IACXC,mBAAoB,KAhBtBZ,EAkBO,CACLa,aAAc,IACdC,aAAc,KACdC,gBAAiB,IACjBC,eAAgB,IAChBC,kBAAmB,MAWrBC,EACe,SAACC,GAA2B,IAAnBC,EAAQC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,GACjC,GAAIF,EAAOG,OAAS,EAAG,MAAO,GAC9B,MAAME,EAAU,GACVC,EAAI,CAACN,EAAO,MAAOA,EAAQA,EAAOA,EAAOG,OAAS,IACxD,IAAK,IAAII,EAAI,EAAGA,EAAID,EAAEH,OAAS,EAAGI,IAAK,CACnC,MAAOC,EAAIC,EAAIC,EAAIC,GAAM,CAACL,EAAEC,GAAID,EAAEC,EAAI,GAAID,EAAEC,EAAI,GAAID,EAAEC,EAAI,IAC1D,IAAK,IAAIK,EAAI,EAAGA,EAAIX,EAAUW,IAAK,CAC/B,MAAMC,EAAID,EAAIX,EACRa,EAAKD,EAAIA,EACTE,EAAKD,EAAKD,EACVG,EAAW,EAAIF,EAATC,EAAcF,EACpBI,EAAK,EAAIF,EAAK,EAAID,EAAK,EACvBI,GAAM,EAAIH,EAAK,EAAID,EAAKD,EACxBM,EAAKJ,EAAKD,EACVM,EAAI,IAAOZ,EAAGY,EAAIJ,EAAKP,EAAGW,EAAIH,EAAKP,EAAGU,EAAIF,EAAKP,EAAGS,EAAID,GACtDE,EAAI,IAAOb,EAAGa,EAAIL,EAAKP,EAAGY,EAAIJ,EAAKP,EAAGW,EAAIH,EAAKP,EAAGU,EAAIF,GAC5Dd,EAAQiB,KAAK,CAAEF,IAAGC,KACtB,CACJ,CAEA,OADAhB,EAAQiB,KAAKtB,EAAOA,EAAOG,OAAS,IAC7BE,CACX,EAtBEN,EAuBYc,GAAa,IAANA,EAAU,EAAI,EAAIU,KAAKC,IAAI,GAAI,GAAKX,GAvBvDd,EAwBac,GAAM,EAAIU,KAAKC,IAAI,EAAIX,EAAG,GAxBvCd,EAyBW0B,CAACC,EAAKC,IAAQJ,KAAKK,UAAYD,EAAMD,GAAOA,EAzBvD3B,EA0BQ8B,CAACpB,EAAIC,IAAOa,KAAKO,KAAKP,KAAKC,IAAId,EAAGU,EAAIX,EAAGW,EAAG,GAAKG,KAAKC,IAAId,EAAGW,EAAIZ,EAAGY,EAAG,IAM/EU,EACUC,CAACC,EAAGC,KAAC,CACbd,EAAGrB,EAAsB,EAAGkC,GAC5BZ,EAAGtB,EAAsB,EAAGmC,GAC5BC,EAAGpC,EAAsB,GAAK,KAC9BqC,KAAMrC,EAAsB,GAAK,GACjCsC,MAAOd,KAAKK,SACZU,WAAYvC,EAAsB,KAAO,MACzCwC,GAAIxC,GAAuB,IAAM,KACjCyC,GAAIzC,GAAuB,IAAM,KACjC0C,MAAOlB,KAAKK,SAAW,GAAM/C,EAAcI,UAAY,OACvDyD,UAAU,IAXZX,EAac,SAACX,EAAGC,EAAGoB,GAA0B,IAAnBE,EAASzC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,EACtC,MAAM0C,EAAQrB,KAAKK,SAAWL,KAAKsB,GAAK,EAClCC,EAAQ/C,EAAsB,GAAK,KAAO4C,EAChD,MAAO,CACHvB,IAAGC,IACHkB,GAAIhB,KAAKwB,IAAIH,GAASE,EACtBN,GAAIjB,KAAKyB,IAAIJ,GAASE,EACtBG,KAAM,EACNC,MAAOnD,EAAsB,KAAO,MACpC0C,QACAL,KAAMrC,EAAsB,EAAG,GAC/BoD,KAAMtE,EAAeU,SAE7B,EA1BEwC,EA2BeqB,CAAChC,EAAGC,EAAGoB,KAAK,CACzBrB,IAAGC,IACHgC,OAAQ,EACRC,UAAWzE,EAAeY,mBAC1B4C,MAAO,EACPI,UAhCFV,EAkCmBwB,CAACnC,EAAGC,EAAGuB,EAAOH,KAC/B,MACMe,EAAaZ,EAAQrB,KAAKsB,GAAK9C,GAAsB,IAAa0D,KAClEX,EAAQ/C,EAAsB,EAAG,GACvC,MAAO,CACHqB,IAAGC,IACHkB,GAAIhB,KAAKwB,IAAIS,GAAcV,EAC3BN,GAAIjB,KAAKyB,IAAIQ,GAAcV,EAC3BG,KAAM,EACNC,MAAOnD,EAAsB,IAAM,KACnCqC,KAAMrC,EAAsB,EAAG,GAC/B0C,MAAOA,GAAK,OAAAiB,OAAW3D,EAAsB,IAAK,KAAI,kBAK5D4D,EACWC,CAACC,EAAO5B,EAAGC,KACpB2B,EAAMC,QAAQC,IACNA,EAAKrB,WACTqB,EAAK3C,GAAK2C,EAAKxB,GAAKwB,EAAK5B,EACzB4B,EAAK1C,GAAK0C,EAAKvB,GAAKuB,EAAK5B,EACrB4B,EAAK3C,GAAK,KAAI2C,EAAK3C,EAAIa,EAAI,IAC3B8B,EAAK3C,EAAIa,EAAI,KAAI8B,EAAK3C,GAAK,IAC3B2C,EAAK1C,GAAK,KAAI0C,EAAK1C,EAAIa,EAAI,IAC3B6B,EAAK1C,EAAIa,EAAI,KAAI6B,EAAK1C,GAAK,IAC/B0C,EAAK1B,OAAS0B,EAAKzB,YACfyB,EAAK1B,MAAQ,GAAK0B,EAAK1B,MAAQ,MAAK0B,EAAKzB,aAAe,OAXlEqB,EAcgBK,IACd,IAAK,IAAIzD,EAAIyD,EAAU7D,OAAS,EAAGI,GAAK,EAAGA,IAAK,CAC5C,MAAMD,EAAI0D,EAAUzD,GACpBD,EAAEc,GAAKd,EAAEiC,GACTjC,EAAEe,GAAKf,EAAEkC,GACLlC,EAAE6C,OACF7C,EAAEiC,IAAMjC,EAAE6C,KACV7C,EAAEkC,IAAMlC,EAAE6C,MAEd7C,EAAE2C,MAAQ3C,EAAE4C,MACR5C,EAAE2C,MAAQ,GAAGe,EAAUC,OAAO1D,EAAG,EACzC,GAzBFoD,EA2BiBO,IACf,IAAK,IAAI3D,EAAI2D,EAAW/D,OAAS,EAAGI,GAAK,EAAGA,IAAK,CAC7C,MAAM4D,EAAKD,EAAW3D,GACtB4D,EAAGd,QAAuC,IAA5Bc,EAAGb,UAAYa,EAAGd,QAChCc,EAAG9B,OAAS,IACR8B,EAAG9B,OAAS,GAAG6B,EAAWD,OAAO1D,EAAG,EAC5C,GAjCFoD,EAmCcS,CAACC,EAAKpC,EAAGC,EAAGoC,EAAOC,KAC/B,MAAMC,EAAWH,EAAII,qBAAqBxC,EAAI,EAAGC,EAAI,EAAG,EAAGD,EAAI,EAAGC,EAAI,EAAGD,GAMzE,GALAuC,EAASE,aAAa,EAAG7F,EAAcC,SACvC0F,EAASE,aAAa,EAAG7F,EAAcE,SACvCsF,EAAIM,UAAYH,EAChBH,EAAIO,SAAS,EAAG,EAAG3C,EAAGC,GAER,SAAVoC,GAA8B,qBAAVA,GAA0C,mBAAVA,EAA4B,CAChF,MACMjB,EAAS,KADuB,GAAxB9B,KAAKyB,IAAIuB,GAAqB,IAEtCM,EAAOR,EAAII,qBAAqBxC,EAAI,EAAGC,EAAI,EAAG,EAAGD,EAAI,EAAGC,EAAI,EAAGmB,GACrEwB,EAAKH,aAAa,EAAG,4BACrBG,EAAKH,aAAa,EAAG,iBACrBL,EAAIM,UAAYE,EAChBR,EAAIO,SAAS,EAAG,EAAG3C,EAAGC,EAC1B,GAlDFyB,EAoDcmB,CAACT,EAAKU,EAAYC,EAAUC,KACxC,GAAIF,EAAW5E,OAAS,GAAK8E,GAAW,IAAM,OAC9C,MAAMC,EAAY3D,KAAK4D,MAAMH,EAAWD,EAAW5E,QACnD,KAAI+E,EAAY,GAAhB,CAEAb,EAAIe,QAAU,QACdf,EAAIgB,SAAW,QACfhB,EAAIiB,YACJjB,EAAIkB,OAAOR,EAAW,GAAG3D,EAAG2D,EAAW,GAAG1D,GAC1C,IAAK,IAAId,EAAI,EAAGA,EAAI2E,EAAW3E,IAC3B8D,EAAImB,OAAOT,EAAWxE,GAAGa,EAAG2D,EAAWxE,GAAGc,GAG9CgD,EAAIoB,YAAW,sBAAA/B,OAAmC,GAAVuB,EAAa,KACrDZ,EAAIqB,UAAY,EAChBrB,EAAIsB,WAAa,GACjBtB,EAAIuB,YAAc/G,EAAcG,QAChCqF,EAAIwB,SAEJxB,EAAIoB,YAAW,uBAAA/B,OAA0BuB,EAAO,KAChDZ,EAAIqB,UAAY,EAChBrB,EAAIsB,WAAa,EACjBtB,EAAIwB,QAnBqB,GAvD3BlC,EA4EgBmC,CAACzB,EAAK0B,EAAOd,EAASe,KACpC,GAAKD,EAAL,CAMA,GALA1B,EAAI4B,OACJ5B,EAAI6B,YAAcjB,EAClBZ,EAAI8B,UAAUJ,EAAM3E,EAAG2E,EAAM1E,GAC7BgD,EAAI+B,OAAOL,EAAMnD,OAEboD,GAAYA,EAASK,SAAU,CAE/B,MAAMjE,EAAO,IACbiC,EAAIsB,WAAa,GACjBtB,EAAIuB,YAAc/G,EAAcM,QAChCkF,EAAIiC,UAAUN,GAAW5D,EAAK,GAAIA,EAAK,EAAGA,EAAMA,EACpD,MAEIiC,EAAIsB,WAAa,GACjBtB,EAAIuB,YAAc/G,EAAcM,QAChCkF,EAAIM,UAAY,OAChBN,EAAIiB,YACJjB,EAAIkC,QAAQ,EAAG,EAAG,GAAI,EAAG,EAAG,EAAa,EAAVhF,KAAKsB,IACpCwB,EAAImC,OAEJnC,EAAIM,UAAY9F,EAAcK,KAC9BmF,EAAIiB,YACJjB,EAAIoC,IAAI,EAAG,EAAG,EAAG,EAAa,EAAVlF,KAAKsB,IACzBwB,EAAImC,OAGRnC,EAAIqC,SA3Bc,GA7EpB/C,EA0GiBgD,CAACtC,EAAKjD,EAAGC,EAAGuF,EAAOC,EAAWb,EAAUc,EAAYC,KACnE1C,EAAI4B,OACJ5B,EAAI8B,UAAU/E,EAAGC,GACjBgD,EAAIuC,MAAMA,EAAOA,GAIjB,MACMI,EAAkBD,EAAoB,IAAVA,EAAiB,IAC7CE,EAAa1F,KAAKG,IAFP,IAEqBsF,GAChCE,EAAaD,EAAa,EAEhC,GAAIjB,GAAYA,EAASK,SAAU,CAC9BhC,EAAIsB,WAAa,GACjBtB,EAAIuB,YAAc,0BAGlB,MAAMuB,EAAYnB,EAASoB,MAAQpB,EAASqB,OAC5C,IAAIC,EAAQL,EACRM,EAAQN,EAERE,EAAY,EAEZI,EAAQN,EAAaE,EAGrBG,EAAQL,EAAaE,EAGzB9C,EAAIiC,UAAUN,GAAWsB,EAAQ,GAAIC,EAAQ,EAAGD,EAAOC,GACvDlD,EAAIsB,WAAa,CACtB,MACItB,EAAIoB,YAAc5G,EAAcK,KAChCmF,EAAIqB,UAAY,EAChBrB,EAAIsB,WAAa,GACjBtB,EAAIuB,YAAc/G,EAAcM,QAChCkF,EAAImD,YAAY,IAAK,GAAI,GAAI,IAC7BnD,EAAIwB,SAKR,GAFAxB,EAAIqC,UAEAE,EAAQ,GAAK,CACbvC,EAAIoD,UAAY,SAChBpD,EAAIsB,WAAa,GACjB,MAAM+B,EAAe,IAEfC,EAAcA,CAACvI,EAAMwI,EAAIC,EAAIC,EAAUC,KACzC1D,EAAI2D,KAAOF,EACX,MAAMV,EAAQ/C,EAAI4D,YAAY7I,GAAMgI,MACpC,GAAIA,EAAQW,EAAU,CAClB,MAAMG,EAAaH,EAAWX,EAC9B/C,EAAI4B,OACJ5B,EAAI8B,UAAUyB,EAAIC,GAClBxD,EAAIuC,MAAMsB,EAAYA,GACtB7D,EAAI8D,SAAS/I,EAAM,EAAG,GACtBiF,EAAIqC,SACR,MACIrC,EAAI8D,SAAS/I,EAAMwI,EAAIC,IAK/B,GAAIf,EAAY,CACZzC,EAAIM,UAAY9F,EAAcK,KAC9BmF,EAAI+D,aAAe,SAEnB,MAAMC,EAAShH,EAAI6F,EAAa,GAChCS,EAAYb,EAAWwB,cAAelH,EAAGiH,EAAO,2CAA6CX,EACjG,CAGArD,EAAIM,UAAY9F,EAAcM,QAC9BkF,EAAI+D,aAAe,MAMnBT,EAAYd,EAAWzF,EAFTC,EAAI6F,EAAa,GAEC,4CAA8CQ,GAE9ErD,EAAIsB,WAAa,CACrB,GAugBR,EAngBsB4C,KAClB,MAAMC,GAAYC,EAAAA,EAAAA,QAAO,OACnB,cAAEC,EAAeC,QAASC,IAAmBC,EAAAA,EAAAA,MAC5CC,EAAaC,IAAkBC,EAAAA,EAAAA,UAAS,GAEzCC,GAAWR,EAAAA,EAAAA,QAAO,CACpBnE,MAAO,OACPT,MAAO,GACPqF,YAAa,GACblF,UAAW,GACXE,WAAY,GACZiF,eAAgB,GAChBpE,WAAY,GACZqE,KAAM,CAAEnH,EAAG,EAAGC,EAAG,GACjBmH,UAAW,EACXC,cAAe,EACfC,gBAAiB,EACjBC,iBAAkB,EAClBC,aAAc,EACdC,eAAgB,EAChBnF,YAAa,EACboF,eAAe,EACfC,oBAAoB,EACpBC,aAAc,CAAEzI,EAAG,EAAGC,EAAG,EAAGyI,OAAQ,EAAGC,OAAQ,EAAGnH,MAAO,GACzDoH,aAAc,EACdC,iBAAkB,GAClBC,kBAAmB,GACnBC,WAAY,QAIhBC,EAAAA,EAAAA,WAAU,KACN,MAAMC,EAAU,IAAIC,iBAAiBzL,GAUrC,OATAwL,EAAQE,UAAaC,IACjB,MAAM,KAAEC,EAAI,OAAEC,EAAM,MAAEC,GAAUH,EAAMI,KACzB,eAATH,GACAI,QAAQC,IAAI,iCAAkCJ,GAC9CK,EAAeL,EAAQC,IACP,UAATF,GACPO,KAGD,IAAMX,EAAQY,SACtB,KAGHb,EAAAA,EAAAA,WAAU,KACN,IAAK1B,EAAe,OACpB,MAAMwC,EAAWC,YAAYC,UACzB,IACI,MAAMC,QAAcC,EAAAA,EAAAA,IAAe5C,EAAc6C,IAC7CF,EAAMG,iBAAmB1C,IACzBC,EAAesC,EAAMG,kBACA,YAAjBH,EAAMI,QAAyC,aAAjBJ,EAAMI,OACpCV,EAAeM,EAAMX,OAAQW,EAAMK,cACX,SAAjBL,EAAMI,QACbT,IAGZ,CAAE,MAAOW,GACL,GAEL,KACH,MAAO,IAAMC,cAAcV,IAC5B,CAACxC,EAAeI,IAEnB,MAAMkC,EAAiBA,KACnB,MAAMK,EAAQpC,EAAS4C,QACvBR,EAAM/G,MAAQ,OACd+G,EAAMxH,MAAMC,QAAQgI,GAAKA,EAAEpJ,UAAW,GACtC2I,EAAMnC,YAAc,GACpBmC,EAAM1B,eAAgB,EACtB0B,EAAMzB,oBAAqB,EAC3ByB,EAAMlB,WAAa,MAGjBY,EAAiBA,CAACL,EAAQC,KAC5B,IAAKD,EAAQ,OAEb,MAAMW,EAAQpC,EAAS4C,QAGvB,IAAIE,EAAQ,gBACRC,EAAS,GACTC,EAAS,KAeb,GAbqB,kBAAVtB,GAAgC,OAAVA,GAC7BoB,EAAQpB,EAAMuB,MAAQ,gBACtBF,EAASrB,EAAMwB,OAAS,GACxBF,EAAStB,EAAMyB,OACS,kBAAVzB,IACdoB,EAAQpB,GAGZU,EAAMpB,iBAAmB8B,EACzBV,EAAMnB,kBAAoB8B,EAC1BX,EAAMlB,WAAa,KAGf8B,EAAQ,CACR,MAAMI,EAAM,IAAIC,MAChBD,EAAIE,IAAG,YAAA7I,OAAeuI,GAUtBZ,EAAMlB,WAAakC,CACvB,CAEAhB,EAAM/G,MAAQ,YACd+G,EAAMhC,UAAYmD,YAAYC,MAC9BpB,EAAMrH,UAAY,GAClBqH,EAAMlC,eAAiB,GACvBkC,EAAMnH,WAAa,GACnBmH,EAAM1B,eAAgB,EACtB0B,EAAMzB,oBAAqB,EAC3ByB,EAAMrB,aAAe,EAGrBqB,EAAMxH,MAAMC,QAAQgI,GAAKA,EAAEpJ,UAAW,GAEtC,MAAM,EAAET,EAAC,EAAEC,GAAMmJ,EAAMjC,KACjBsD,EAAY,IAAIrB,EAAMxH,OACtB8I,EAAc,GAEdC,EAAS,IAITxN,GAAQsL,EAAOmC,WAAanC,EAAOoC,UAAYpC,EAAOwB,MAAM5D,cAE5DyE,EAAc,eAAeC,KAAK5N,GAElC6N,EAAQ7N,EAAK8N,MAAM,IACnBC,EAAYF,EAAM9M,OAExB,IAAK,IAAII,EAAI,EAAGA,EAAI4M,EAAW5M,IAAK,CAChC,IAAI6M,EAAW,KACf,IAAK,IAAIC,EAAU,EAAGA,EAAU,GAAIA,IAAW,CAC3C,MAAMC,EAAM/L,KAAK4D,MAAM5D,KAAKK,SAAW8K,EAAUvM,QAC3CoN,EAAYb,EAAUY,GAEtBE,EAAWb,EAAYc,KAAKnN,GAAKP,EAAmBO,EAAGiN,GAlBpD,KAmBHG,EAAWH,EAAUnM,EAAIwL,GAAUW,EAAUnM,EAAIa,EAAI2K,GAAUW,EAAUlM,EAAIuL,GAAUW,EAAUlM,EAAIa,EAAI0K,EAE/G,IAAKY,GAAYE,EAAU,CACvBN,EAAWG,EACXb,EAAUzI,OAAOqJ,EAAK,GACtBF,EAAS1K,UAAW,EACpB,KACJ,CACJ,CAEK0K,IACDA,EAAW,CAAEhM,EAAGa,EAAI,EAA0B,KAArB1B,EAAI4M,EAAY,GAAU9L,EAAGa,EAAI,EAAGE,KAAM,IASvE,IAAIuL,EAAcpN,EACdwM,IACaY,EAAH,IAANpN,EAAuB,EACZ,IAANA,EAAuB,EACbA,EAAI,GAK3BoM,EAAYrL,KAAK,CACbsM,MAAOR,EAAShM,EAChByM,MAAOT,EAAS/L,EAChByM,SAAUV,EAAShM,EACnB2M,SAAUX,EAAS/L,EACnBe,KAAMgL,EAAShL,MAAQ,EACvB4L,YAAaZ,EAAShL,MAAQ,EAC9B6L,SAAU,EACVC,MAAO,EACPC,KAAMlB,EAAM1M,GACZ6N,UAAW7N,EACXoN,YAAaA,EACbU,UAAU,GAElB,CACAhD,EAAMnC,YAAcyD,GAuSxB,OAnSAvC,EAAAA,EAAAA,WAAU,KACN,MAAMkE,EAAOA,KACT,MAAMC,EAAS/F,EAAUqD,QACzB,IAAK0C,EAAQ,OACb,MAAM,WAAEC,EAAU,YAAEC,GAAgBC,OAC9BC,EAAMD,OAAOE,kBAAoB,EAEvCL,EAAOnH,MAAQoH,EAAaG,EAC5BJ,EAAOlH,OAASoH,EAAcE,EAC9BJ,EAAOM,MAAMzH,MAAK,GAAA1D,OAAM8K,EAAU,MAClCD,EAAOM,MAAMxH,OAAM,GAAA3D,OAAM+K,EAAW,MAExBF,EAAOO,WAAW,MAC1BlI,MAAM+H,EAAKA,GAEf1F,EAAS4C,QAAQzC,KAAO,CAAEnH,EAAGuM,EAAYtM,EAAGuM,GACN,IAAlCxF,EAAS4C,QAAQhI,MAAM1D,SACvB8I,EAAS4C,QAAQhI,MAAQkL,MAAMC,KAAK,CAAE7O,OAAQtB,EAAeW,WAAa,IACtEuC,EAAyByM,EAAYC,MAOjD,OAFAH,IACAI,OAAOO,iBAAiB,SAAUX,GAC3B,IAAMI,OAAOQ,oBAAoB,SAAUZ,IACnD,KAGHlE,EAAAA,EAAAA,WAAU,KACN,IAAI+E,EACJ,MAAMZ,EAAS/F,EAAUqD,QAEnBuD,EAAUC,IACZ,MAAMhL,EAAY,OAANkK,QAAM,IAANA,OAAM,EAANA,EAAQO,WAAW,MAC/B,IAAKzK,EAAK,OAEV,MAAMgH,EAAQpC,EAAS4C,SACjB,EAAE5J,EAAC,EAAEC,GAAMmJ,EAAMjC,KASvB,GANAzF,EAAoB0H,EAAMxH,MAAO5B,EAAGC,GACpCyB,EAAwB0H,EAAMrH,WAC9BL,EAAwB0H,EAAMlC,gBAC9BxF,EAAyB0H,EAAMnH,YAGX,cAAhBmH,EAAM/G,MAAuB,CAC7B,MAAMgL,EAAUD,EAAOhE,EAAMhC,UAE7BgC,EAAMnC,YAAYpF,QAAQyL,IACtB,MAAMC,EAAQD,EAAM5B,YACpB,IAAI8B,GAAe,EAYnB,GAFIH,EAFgB,IADP,IACeE,IAEDC,GAAe,GAEtCA,IAAiBF,EAAMlB,SAAU,CACjCkB,EAAMlB,UAAW,EACjBkB,EAAMtB,SAAW,EACjBsB,EAAMrB,MAAQ,GACd7C,EAAMnH,WAAW5C,KAAKS,EAA8BwN,EAAMzB,SAAUyB,EAAMxB,SAAUlP,EAAcG,UAClG,IAAK,IAAI0Q,EAAI,EAAGA,EAAI,GAAIA,IAAKrE,EAAMrH,UAAU1C,KAAKS,EAA6BwN,EAAMzB,SAAUyB,EAAMxB,SAAUlP,EAAcG,QAAS,KAC1I,CACIuQ,EAAMlB,WACNkB,EAAMtB,UAAqC,KAAxB,EAAMsB,EAAMtB,UAC/BsB,EAAMvB,aAA0C,KAA1B,GAAKuB,EAAMvB,aAC7BuB,EAAMrB,MAAQ,IAAGqB,EAAMrB,OAAS,OAM5C,MAAMyB,EAAWpO,KAAKI,OAAO0J,EAAMnC,YAAY0G,IAAI9D,GAAKA,EAAE6B,aAAc,GAGxE,GAAI2B,EAFe,IAAmB,IAAXK,EAAkB,KAEnB,CACtBtE,EAAM/G,MAAQ,aACd+G,EAAM/B,cAAgB+F,EACtB,MACMQ,EAAgB,CAAC,CAAEzO,EAAG,EAAGC,EAAGa,EAAI,MADvB,IAAImJ,EAAMnC,aAAa4G,KAAK,CAACC,EAAGC,IAAMD,EAAE3B,UAAY4B,EAAE5B,WAChBwB,IAAI9D,IAAC,CAAO1K,EAAG0K,EAAEgC,SAAUzM,EAAGyK,EAAEiC,aACrF1C,EAAMtG,WAAahF,EAA0B8P,EAAe,GAChE,CACJ,CAEA,GAAoB,eAAhBxE,EAAM/G,MAAwB,CAC9B,MAAMgL,EAAUD,EAAOhE,EAAM/B,cAC7B+B,EAAM5B,aAAelI,KAAKG,IAAI4N,EAAUzQ,EAAee,gBAAiB,GACxEyL,EAAMnC,YAAYpF,QAAQgI,GAAKA,EAAEmC,UAAiC,KAApB,EAAMnC,EAAEmC,WAClD5C,EAAM5B,cAAgB,IACtB4B,EAAM/G,MAAQ,YACd+G,EAAM9B,gBAAkB8F,EAEhC,CAEA,GAAoB,cAAhBhE,EAAM/G,MAAuB,CAC7B,MAAMgL,EAAUD,EAAOhE,EAAM9B,gBAC7B8B,EAAM3B,eAAiBnI,KAAKG,IAAI4N,EAAUzQ,EAAegB,eAAgB,GACzE,MAAMoQ,EAAOlQ,EAAsBsL,EAAM3B,gBAInCwG,EAAc3O,KAAKG,IAAIO,EAAI,KAAM,GACjCkO,EAAY,GAAKD,EACjBE,EAAW,GAAKF,EAChBG,EAAW,GAAKH,EAGhBpG,EAAS7H,EAAI,EADAoJ,EAAMnC,YAAY/I,OAASgQ,EACV,EAAKA,EAAY,EAI/CG,EAAc,IAAJpO,EAEhBmJ,EAAMnC,YAAYpF,QAASgI,IACvB,MAAMyE,EAASzG,EAAUgC,EAAEsC,UAAY+B,EACjCK,EAASF,EAEfxE,EAAEgC,SAAWhC,EAAE8B,OAAS2C,EAASzE,EAAE8B,OAASqC,EAC5CnE,EAAEiC,SAAWjC,EAAE+B,OAAS2C,EAAS1E,EAAE+B,OAASoC,EAC5CnE,EAAEkC,YAAcoC,EAAYC,EAAWJ,IAG3C,MAEMJ,EAAgB,CAAC,CAAEzO,EAAG,EAAGC,EAAGa,EAAI,MAFvB,IAAImJ,EAAMnC,aAAa4G,KAAK,CAACC,EAAGC,IAAMD,EAAE3B,UAAY4B,EAAE5B,WAEhBwB,IAAI9D,IAAC,CAAO1K,EAAG0K,EAAEgC,SAAUzM,EAAGyK,EAAEiC,aAGrF,GAFA1C,EAAMtG,WAAahF,EAA0B8P,EAAe,IAExDxE,EAAM3B,gBAAkB,IACxB2B,EAAM/G,MAAQ,QACT+G,EAAM1B,eAAe,CACtB0B,EAAMnH,WAAW5C,KAAKS,EAA8BE,EAAI,EAAGqO,EAASzR,EAAcK,OAClF,IAAK,IAAIwQ,EAAI,EAAGA,EAAI,IAAKA,IAAKrE,EAAMrH,UAAU1C,KAAKS,EAA6BE,EAAI,EAAGqO,EAASzR,EAAcK,KAAM,IACpHmM,EAAM1B,eAAgB,EACtB0B,EAAM7B,iBAAmB6F,EAAO,GACpC,CAER,CAgBA,GAdoB,SAAhBhE,EAAM/G,OAAoB+K,EAAOhE,EAAM7B,mBAAqB6B,EAAMzB,qBAClEyB,EAAM/G,MAAQ,mBACd+G,EAAMxB,aAAe,CACjBC,OAAQ7H,EAAI,IACZ8H,QAAS,IACT3I,EAAGa,EAAI,IACPZ,GAAI,IACJoP,QAASxO,EAAI,EACbqO,QAAa,IAAJpO,EACTU,MAAO,GAEXyI,EAAM7B,iBAAmB6F,GAGT,qBAAhBhE,EAAM/G,MAA8B,CACpC,MAAMgL,EAAUD,EAAOhE,EAAM7B,iBACvBxE,EAAWzD,KAAKG,IAAI4N,EAAUzQ,EAAeiB,kBAAmB,GAChEmQ,EAAOlQ,EAAuBiF,GAE9B0L,EAAKrF,EAAMxB,aACX8G,EAAQD,EAAGtP,EACXwP,EAAQF,EAAGrP,EAEjBqP,EAAGtP,EAAIsP,EAAG5G,QAAU4G,EAAGD,QAAUC,EAAG5G,QAAUmG,EAC9CS,EAAGrP,EAAIqP,EAAG3G,QAAU2G,EAAGJ,QAAUI,EAAG3G,QAAUkG,EAC9CS,EAAG9N,MAAQrB,KAAKsP,MAAMH,EAAGrP,EAAIuP,EAAOF,EAAGtP,EAAIuP,GAE3C,IAAK,IAAIjB,EAAI,EAAGA,EAAI,EAAGA,IACnBrE,EAAMlC,eAAe7H,KAAKS,EAAkC2O,EAAGtP,EAAGsP,EAAGrP,EAAGqP,EAAG9N,MAAQrB,KAAKsB,GAAIhE,EAAcM,UAG9G,GAAI6F,GAAY,EAAG,CACfqG,EAAM/G,MAAQ,iBACd+G,EAAMzB,oBAAqB,EAC3ByB,EAAMrB,aAAe,EACrBqB,EAAMnH,WAAW5C,KAAKS,EAA8B2O,EAAGtP,EAAGsP,EAAGrP,EAAGxC,EAAcM,UAC9E,IAAK,IAAIuQ,EAAI,EAAGA,EAAI,GAAIA,IAAKrE,EAAMrH,UAAU1C,KAAKS,EAA6B2O,EAAGtP,EAAGsP,EAAGrP,EAAGxC,EAAcM,QAAS,KACtH,CACJ,CAEoB,mBAAhBkM,EAAM/G,QACN+G,EAAMrB,cAA6C,IAA5B,IAAMqB,EAAMrB,eAInB,SAAhBqB,EAAM/G,OAAoC,qBAAhB+G,EAAM/G,OAAgD,mBAAhB+G,EAAM/G,QAA4B+G,EAAM9G,aAAe,KAC3HZ,EAAuBU,EAAKpC,EAAGC,EAAGmJ,EAAM/G,MAAO+G,EAAM9G,aAErD8G,EAAMxH,MAAMC,QAAQC,IACZA,EAAKrB,WACT2B,EAAIiB,YACJjB,EAAIoC,IAAI1C,EAAK3C,EAAG2C,EAAK1C,EAAG0C,EAAK3B,KAAM,EAAa,EAAVb,KAAKsB,IAC3CwB,EAAIM,UAAYZ,EAAKtB,MACrB4B,EAAI6B,YAA2B,GAAbnC,EAAK1B,MACvBgC,EAAImC,OACJnC,EAAI6B,YAAc,KAGtB,MAAM4K,EAA8B,cAAhBzF,EAAM/G,MAAyB,EAAI+G,EAAM3B,eAAkB,EACzEqH,EAA+B,cAAhB1F,EAAM/G,MAAwB,EAAI+G,EAAM5B,aAE7D,IAAqB,eAAhB4B,EAAM/G,OAA0C,cAAhB+G,EAAM/G,QAA0B+G,EAAMtG,WAAW5E,OAAS,IAC3FwD,EAAuBU,EAAKgH,EAAMtG,WAAYgM,EAAcD,GACxC,eAAhBzF,EAAM/G,OAAwB,CAC9B,MAAM0M,EAAc3F,EAAMtG,WAAW5E,OAC/B8Q,EAAY1P,KAAK4D,MAAM4L,EAAeC,GAC5C,GAAIC,EAAY,EAAG,CACf,MAAMC,EAAM7F,EAAMtG,WAAWkM,EAAY,GACzC,GAAIC,EAAK,CACL,MAAMC,EAAO9F,EAAMtG,WAAWxD,KAAKI,IAAI,EAAGsP,EAAY,IAChDrO,EAAQrB,KAAKsP,MAAMK,EAAI7P,EAAI8P,EAAK9P,EAAG6P,EAAI9P,EAAI+P,EAAK/P,GACtD,IAAK,IAAIsO,EAAI,EAAGA,EAAI,EAAGA,IAAKrE,EAAMlC,eAAe7H,KAAKS,EAAkCmP,EAAI9P,EAAG8P,EAAI7P,EAAGuB,GAC1G,CACJ,CACJ,CAGgB,qBAAhByI,EAAM/G,OACNX,EAAyBU,EAAKgH,EAAMxB,aAAc,EAAGwB,EAAMlB,YAG/DkB,EAAMnH,WAAWJ,QAAQK,IACrBE,EAAIiB,YACJjB,EAAIoC,IAAItC,EAAG/C,EAAG+C,EAAG9C,EAAG8C,EAAGd,OAAQ,EAAa,EAAV9B,KAAKsB,IACvCwB,EAAIoB,YAActB,EAAG1B,MACrB4B,EAAIqB,UAAY,EAChBrB,EAAI6B,YAAc/B,EAAG9B,MACrBgC,EAAIwB,SACJxB,EAAI6B,YAAc,IAGtB,IAAImF,EAAMrH,aAAcqH,EAAMlC,gBAAgBrF,QAAQxD,IAClD+D,EAAI6B,YAAc5F,EAAE2C,KACpBoB,EAAIM,UAAYrE,EAAEmC,MAClB4B,EAAIiB,YACJjB,EAAIoC,IAAInG,EAAEc,EAAGd,EAAEe,EAAGf,EAAE8B,KAAO9B,EAAE2C,KAAM,EAAa,EAAV1B,KAAKsB,IAC3CwB,EAAImC,OACJnC,EAAI6B,YAAc,IAGtBmF,EAAMnC,YAAYpF,QAAQgI,IACtB,GAAIA,EAAEuC,SAAU,CACZ,IAAIzH,EAAQkF,EAAEmC,SACVmD,EAAYvS,EAAcG,QAC9B,GAAoB,SAAhBqM,EAAM/G,OAAoC,qBAAhB+G,EAAM/G,OAAgD,mBAAhB+G,EAAM/G,MAA4B,CAElGsC,GADqD,GAAvCrF,KAAKyB,IAAW,KAAPqM,EAAevD,EAAEsC,WAAmB,IAE3DgD,EAAS,OAAA1N,OAAU,IAA+B,GAAzBnC,KAAKyB,IAAW,KAAPqM,GAAkB,eACxD,CACA,IAAIgC,EAAQvF,EAAEgC,UAAYvM,KAAKK,SAAW,IAAOkK,EAAEoC,MAC/CoD,EAAQxF,EAAEiC,UAAYxM,KAAKK,SAAW,IAAOkK,EAAEoC,MAEnD,MAAMqD,EAAWhQ,KAAK4D,MAAM2G,EAAEkC,YAAcpH,GAC5CvC,EAAI2D,KAAI,QAAAtE,OAAW6N,EAAQ,+BAC3BlN,EAAIsB,WAAa,GAAKiB,EACtBvC,EAAIuB,YAAcwL,EAClB/M,EAAIM,UAAY9F,EAAcO,KAC9BiF,EAAIoD,UAAY,SAChBpD,EAAI+D,aAAe,SACnB/D,EAAI8D,SAAS2D,EAAEqC,KAAMkD,EAAOC,GAC5BjN,EAAIsB,WAAa,EACjBtB,EAAI8D,SAAS2D,EAAEqC,KAAMkD,EAAOC,EAChC,MACIjN,EAAIiB,YACJjB,EAAIoC,IAAIqF,EAAEgC,SAAUhC,EAAEiC,SAAmB,EAATjC,EAAE1J,KAAU,EAAa,EAAVb,KAAKsB,IACpDwB,EAAIM,UAAY,OAChBN,EAAIsB,WAAa,GACjBtB,EAAIuB,YAAc,OAClBvB,EAAImC,OACJnC,EAAIsB,WAAa,IAIL,mBAAhB0F,EAAM/G,OAENX,EAA0BU,EAAKpC,EAAI,EAAO,IAAJC,EAAUmJ,EAAMrB,aAAcqB,EAAMpB,iBAAkBoB,EAAMlB,WAAYkB,EAAMnB,kBAAmBhI,GAG3IiN,EAAmBqC,sBAAsBpC,IAI7C,OADAA,EAAO,GACA,IAAMqC,qBAAqBtC,IACnC,IAECvG,GAEI8I,EAAAA,EAAAA,KAAA,OAAKC,UAAU,oFAAmFC,UAC9FF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,gBAAeC,SAAC,uCAKtClJ,GAWDmJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,gEAA+DC,SAAA,EAC1EF,EAAAA,EAAAA,KAAA,UAAQI,IAAKtJ,EAAWmJ,UAAU,yBAClCE,EAAAA,EAAAA,MAAA,OAAKF,UAAU,2DAA0DC,SAAA,CAAC,uBACtDlJ,EAAcwD,KAAK5D,qBAZvCuJ,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8GAA6GC,SAAA,EACxHF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,yCAAwCC,SAAC,iBACvDF,EAAAA,EAAAA,KAAA,KAAAE,SAAG,uCACHF,EAAAA,EAAAA,KAAA,KAAGC,UAAU,eAAcC,SAAC,qD","sources":["components/CelestialRaffle/RaffleDisplay.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useEvent } from '../../context/EventContext';\nimport { getRaffleState } from '../../services/api';\n\n// ========================================== \n// 1. CONFIGURATION & SHARED CONSTANTS\n// ========================================== \nconst CONFIG = {\n    channelName: 'celestial_raffle_sync_v3',\n    colors: {\n        bgInner: '#020617',\n        bgOuter: '#000000',\n        primary: '#22d3ee', // Cyan\n        secondary: '#a5f3fc', // Light Cyan\n        gold: '#FFD700',\n        product: '#fbbf24', // Amber\n        text: '#ffffff',\n        placeholderBg: '#1e293b',\n        placeholderStroke: '#475569'\n    },\n    physics: {\n        friction: 0.96,\n        starCount: 600,\n        shockwaveMaxRadius: 100\n    },\n    timings: {\n        revealDelayL: 800,\n        revealDelayS: 1200,\n        connectDuration: 6000,\n        centerDuration: 3000,\n        productInDuration: 1200\n    },\n    defaults: {\n        attendees: \"LS-8821\\nXY-9921\\nAB-1102\\nCC-3321\\nJJ-2219\\nZZ-0012\\nMM-3311\",\n        prizes: \"MacBook Pro M3\\niPhone 15 Pro\\nSony WH-1000XM5\\n$500 Amazon Card\\nKeychron Q1 Pro\"\n    }\n};\n\n// ========================================== \n// 2. MATH UTILITIES\n// ========================================== \nconst MathUtils = {\n    getSplinePoints: (points, segments = 50) => {\n        if (points.length < 2) return [];\n        const results = [];\n        const p = [points[0], ...points, points[points.length - 1]];\n        for (let i = 0; i < p.length - 3; i++) {\n            const [p0, p1, p2, p3] = [p[i], p[i + 1], p[i + 2], p[i + 3]];\n            for (let j = 0; j < segments; j++) {\n                const t = j / segments;\n                const t2 = t * t;\n                const t3 = t2 * t;\n                const q0 = -t3 + 2 * t2 - t;\n                const q1 = 3 * t3 - 5 * t2 + 2;\n                const q2 = -3 * t3 + 4 * t2 + t;\n                const q3 = t3 - t2;\n                const x = 0.5 * (p0.x * q0 + p1.x * q1 + p2.x * q2 + p3.x * q3);\n                const y = 0.5 * (p0.y * q0 + p1.y * q1 + p2.y * q2 + p3.y * q3);\n                results.push({ x, y });\n            }\n        }\n        results.push(points[points.length - 1]);\n        return results;\n    },\n    easeElastic: (t) => (t === 1 ? 1 : 1 - Math.pow(2, -10 * t)),\n    easeOutCubic: (t) => 1 - Math.pow(1 - t, 3),\n    randomRange: (min, max) => Math.random() * (max - min) + min,\n    distance: (p1, p2) => Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2))\n};\n\n// ========================================== \n// 3. CANVAS ENTITY ENGINE\n// ========================================== \nconst EntityFactory = {\n    createStar: (w, h) => ({\n        x: MathUtils.randomRange(0, w),\n        y: MathUtils.randomRange(0, h),\n        z: MathUtils.randomRange(0.5, 2.5),\n        size: MathUtils.randomRange(0.5, 2.0),\n        alpha: Math.random(),\n        blinkSpeed: MathUtils.randomRange(0.001, 0.006),\n        vx: MathUtils.randomRange(-0.05, 0.05),\n        vy: MathUtils.randomRange(-0.05, 0.05),\n        color: Math.random() > 0.9 ? CONFIG.colors.secondary : '#fff',\n        isTarget: false\n    }),\n    createParticle: (x, y, color, speedMult = 1) => {\n        const angle = Math.random() * Math.PI * 2;\n        const speed = MathUtils.randomRange(0.5, 2.5) * speedMult;\n        return {\n            x, y,\n            vx: Math.cos(angle) * speed,\n            vy: Math.sin(angle) * speed,\n            life: 1.0,\n            decay: MathUtils.randomRange(0.005, 0.015),\n            color,\n            size: MathUtils.randomRange(1, 4),\n            drag: CONFIG.physics.friction\n        };\n    },\n    createShockwave: (x, y, color) => ({\n        x, y,\n        radius: 1,\n        maxRadius: CONFIG.physics.shockwaveMaxRadius,\n        alpha: 1,\n        color\n    }),\n    createTrailParticle: (x, y, angle, color) => {\n        const spread = 0.3;\n        const trailAngle = angle + Math.PI + MathUtils.randomRange(-spread / 2, spread / 2);\n        const speed = MathUtils.randomRange(1, 3);\n        return {\n            x, y,\n            vx: Math.cos(trailAngle) * speed,\n            vy: Math.sin(trailAngle) * speed,\n            life: 1.0,\n            decay: MathUtils.randomRange(0.03, 0.05),\n            size: MathUtils.randomRange(1, 4),\n            color: color || `hsl(${MathUtils.randomRange(180, 220)}, 100%, 70%)`\n        };\n    }\n};\n\nconst Systems = {\n    updateStars: (stars, w, h) => {\n        stars.forEach(star => {\n            if (star.isTarget) return;\n            star.x += star.vx * star.z;\n            star.y += star.vy * star.z;\n            if (star.x < -50) star.x = w + 50;\n            if (star.x > w + 50) star.x = -50;\n            if (star.y < -50) star.y = h + 50;\n            if (star.y > h + 50) star.y = -50;\n            star.alpha += star.blinkSpeed;\n            if (star.alpha > 1 || star.alpha < 0.2) star.blinkSpeed *= -1;\n        });\n    },\n    updateParticles: (particles) => {\n        for (let i = particles.length - 1; i >= 0; i--) {\n            const p = particles[i];\n            p.x += p.vx;\n            p.y += p.vy;\n            if (p.drag) {\n                p.vx *= p.drag;\n                p.vy *= p.drag;\n            }\n            p.life -= p.decay;\n            if (p.life <= 0) particles.splice(i, 1);\n        }\n    },\n    updateShockwaves: (shockwaves) => {\n        for (let i = shockwaves.length - 1; i >= 0; i--) {\n            const sw = shockwaves[i];\n            sw.radius += (sw.maxRadius - sw.radius) * 0.1;\n            sw.alpha -= 0.02;\n            if (sw.alpha <= 0) shockwaves.splice(i, 1);\n        }\n    },\n    drawBackground: (ctx, w, h, phase, nebulaPulse) => {\n        const gradient = ctx.createRadialGradient(w / 2, h / 2, 0, w / 2, h / 2, w);\n        gradient.addColorStop(0, CONFIG.colors.bgInner);\n        gradient.addColorStop(1, CONFIG.colors.bgOuter);\n        ctx.fillStyle = gradient;\n        ctx.fillRect(0, 0, w, h);\n\n        if (phase === 'done' || phase === 'product_incoming' || phase === 'product_reveal') {\n            const pulse = Math.sin(nebulaPulse) * 0.1 + 0.9;\n            const radius = 300 * pulse;\n            const glow = ctx.createRadialGradient(w / 2, h / 2, 0, w / 2, h / 2, radius);\n            glow.addColorStop(0, 'rgba(34, 211, 238, 0.15)');\n            glow.addColorStop(1, 'rgba(0,0,0,0)');\n            ctx.fillStyle = glow;\n            ctx.fillRect(0, 0, w, h);\n        }\n    },\n    drawSplineLine: (ctx, pathPoints, progress, opacity) => {\n        if (pathPoints.length < 2 || opacity <= 0.01) return;\n        const drawCount = Math.floor(progress * pathPoints.length);\n        if (drawCount < 2) return;\n\n        ctx.lineCap = 'round';\n        ctx.lineJoin = 'round';\n        ctx.beginPath();\n        ctx.moveTo(pathPoints[0].x, pathPoints[0].y);\n        for (let i = 1; i < drawCount; i++) {\n            ctx.lineTo(pathPoints[i].x, pathPoints[i].y);\n        }\n\n        ctx.strokeStyle = `rgba(34, 211, 238, ${opacity * 0.5})`;\n        ctx.lineWidth = 6;\n        ctx.shadowBlur = 20;\n        ctx.shadowColor = CONFIG.colors.primary;\n        ctx.stroke();\n\n        ctx.strokeStyle = `rgba(220, 255, 255, ${opacity})`;\n        ctx.lineWidth = 2;\n        ctx.shadowBlur = 0;\n        ctx.stroke();\n    },\n    drawProductComet: (ctx, comet, opacity, imageObj) => {\n        if (!comet) return;\n        ctx.save();\n        ctx.globalAlpha = opacity;\n        ctx.translate(comet.x, comet.y);\n        ctx.rotate(comet.angle);\n\n        if (imageObj && imageObj.complete) {\n            // Draw image as comet head\n            const size = 120; // Increased meteor scale\n            ctx.shadowBlur = 40;\n            ctx.shadowColor = CONFIG.colors.product;\n            ctx.drawImage(imageObj, -size/2, -size/2, size, size);\n        } else {\n            // Fallback Vector\n            ctx.shadowBlur = 40;\n            ctx.shadowColor = CONFIG.colors.product;\n            ctx.fillStyle = '#fff';\n            ctx.beginPath();\n            ctx.ellipse(0, 0, 16, 6, 0, 0, Math.PI * 2);\n            ctx.fill();\n\n            ctx.fillStyle = CONFIG.colors.gold;\n            ctx.beginPath();\n            ctx.arc(0, 0, 4, 0, Math.PI * 2);\n            ctx.fill();\n        }\n\n        ctx.restore();\n    },\n    drawProductReveal: (ctx, x, y, scale, prizeName, imageObj, prizeTitle, screenH) => {\n        ctx.save();\n        ctx.translate(x, y);\n        ctx.scale(scale, scale);\n\n        // Dynamic Image Size based on Screen Height\n        // Default 350px, but constrain to 35% of screen height for ultra-wide/short screens\n        const baseSize = 350;\n        const maxRelativeSize = screenH ? screenH * 0.35 : 350; \n        const targetSize = Math.min(baseSize, maxRelativeSize);\n        const targetHalf = targetSize / 2;\n\n        if (imageObj && imageObj.complete) {\n             ctx.shadowBlur = 50;\n             ctx.shadowColor = 'rgba(251, 191, 36, 0.4)'; \n             \n             // Aspect Ratio Logic (Object-Fit: Contain)\n             const imgAspect = imageObj.width / imageObj.height;\n             let drawW = targetSize;\n             let drawH = targetSize;\n\n             if (imgAspect > 1) {\n                 // Landscape: Width fills, Height scales\n                 drawH = targetSize / imgAspect;\n             } else {\n                 // Portrait: Height fills, Width scales\n                 drawW = targetSize * imgAspect;\n             }\n\n             ctx.drawImage(imageObj, -drawW / 2, -drawH / 2, drawW, drawH);\n             ctx.shadowBlur = 0;\n        } else {\n            ctx.strokeStyle = CONFIG.colors.gold;\n            ctx.lineWidth = 3;\n            ctx.shadowBlur = 20;\n            ctx.shadowColor = CONFIG.colors.product;\n            ctx.strokeRect(-25, -25, 50, 50);\n            ctx.stroke();\n        }\n\n        ctx.restore();\n\n        if (scale > 0.8) {\n            ctx.textAlign = 'center';\n            ctx.shadowBlur = 20;\n            const maxTextWidth = 1000;\n\n            const fillTextFit = (text, cx, cy, fontBase, maxWidth) => {\n                ctx.font = fontBase;\n                const width = ctx.measureText(text).width;\n                if (width > maxWidth) {\n                    const scaleRatio = maxWidth / width;\n                    ctx.save();\n                    ctx.translate(cx, cy);\n                    ctx.scale(scaleRatio, scaleRatio);\n                    ctx.fillText(text, 0, 0);\n                    ctx.restore();\n                } else {\n                    ctx.fillText(text, cx, cy);\n                }\n            };\n\n            // 1. Prize Title (ABOVE Image)\n            if (prizeTitle) {\n                ctx.fillStyle = CONFIG.colors.gold;\n                ctx.textBaseline = 'bottom';\n                // Reduced padding to 30px\n                const titleY = y - targetHalf - 30; \n                fillTextFit(prizeTitle.toUpperCase(), x, titleY, `900 36px \"Inter\", \"Segoe UI\", sans-serif`, maxTextWidth);\n            }\n\n            // 2. Prize Name (BELOW Image)\n            ctx.fillStyle = CONFIG.colors.product;\n            ctx.textBaseline = 'top';\n            \n            // \"Lower and just a bit higher than the image\" -> Below image, but closer gap.\n            // Reduced padding from 80px to 40px\n            const nameY = y + targetHalf + 40; \n            \n            fillTextFit(prizeName, x, nameY, `bold 60px \"Inter\", \"Segoe UI\", sans-serif`, maxTextWidth);\n            \n            ctx.shadowBlur = 0;\n        }\n    }\n};\n\nconst RaffleDisplay = () => {\n    const canvasRef = useRef(null);\n    const { selectedEvent, loading: contextLoading } = useEvent();\n    const [lastTrigger, setLastTrigger] = useState(0);\n\n    const stateRef = useRef({\n        phase: 'idle',\n        stars: [],\n        targetStars: [],\n        particles: [],\n        shockwaves: [],\n        trailParticles: [],\n        pathPoints: [],\n        dims: { w: 0, h: 0 },\n        startTime: 0,\n        lineStartTime: 0,\n        centerStartTime: 0,\n        productStartTime: 0,\n        lineProgress: 0,\n        centerProgress: 0,\n        nebulaPulse: 0,\n        hasCelebrated: false,\n        hasProductExploded: false,\n        productComet: { x: 0, y: 0, startX: 0, startY: 0, angle: 0 },\n        productScale: 0,\n        currentPrizeName: \"\",\n        currentPrizeTitle: \"\", // Added\n        prizeImage: null // Image object\n    });\n\n    // --- BROADCAST CHANNEL SYNC --- \n    useEffect(() => {\n        const channel = new BroadcastChannel(CONFIG.channelName);\n        channel.onmessage = (event) => {\n            const { type, winner, prize } = event.data;\n            if (type === 'START_DRAW') {\n                console.log('Broadcast received: START_DRAW', winner);\n                startAnimation(winner, prize);\n            } else if (type === 'RESET') {\n                resetAnimation();\n            }\n        };\n        return () => channel.close();\n    }, []);\n\n    // --- POLLING FALLBACK --- \n    useEffect(() => {\n        if (!selectedEvent) return;\n        const interval = setInterval(async () => {\n            try {\n                const state = await getRaffleState(selectedEvent.id);\n                if (state.animationTrigger > lastTrigger) {\n                    setLastTrigger(state.animationTrigger);\n                    if (state.status === 'DRAWING' || state.status === 'REVEALED') {\n                        startAnimation(state.winner, state.currentPrize);\n                    } else if (state.status === 'IDLE') {\n                        resetAnimation();\n                    }\n                }\n            } catch (err) {\n                // Silent fail\n            }\n        }, 1000);\n        return () => clearInterval(interval);\n    }, [selectedEvent, lastTrigger]);\n\n    const resetAnimation = () => {\n        const state = stateRef.current;\n        state.phase = 'idle';\n        state.stars.forEach(s => s.isTarget = false);\n        state.targetStars = [];\n        state.hasCelebrated = false;\n        state.hasProductExploded = false;\n        state.prizeImage = null;\n    };\n\n    const startAnimation = (winner, prize) => {\n        if (!winner) return;\n        \n        const state = stateRef.current;\n        \n        // Handle Prize Object/String\n        let pName = \"Mystery Prize\";\n        let pTitle = \"\";\n        let pImage = null;\n\n        if (typeof prize === 'object' && prize !== null) {\n            pName = prize.name || \"Mystery Prize\";\n            pTitle = prize.title || \"\";\n            pImage = prize.image;\n        } else if (typeof prize === 'string') {\n            pName = prize;\n        }\n\n        state.currentPrizeName = pName;\n        state.currentPrizeTitle = pTitle;\n        state.prizeImage = null;\n\n        // Load image if exists\n        if (pImage) {\n            const img = new Image();\n            img.src = `/uploads/${pImage}`; // Path relative to public or proxy?\n            // Since uploads are in backend/uploads, and we serve static via Express if configured,\n            // OR we need a route to serve them.\n            // Wait, we didn't add a static route for uploads!\n            // I need to add that to server.js or just assume user handles it?\n            // I'll assume '/uploads' is mounted. I should probably double check server.js.\n            // For now, let's just set the src.\n            // *Self-Correction*: I'll add the mount to server.js in a separate step if needed.\n            // Actually, server.js serves 'frontend/build' and 'scanner'. It does NOT serve 'uploads' yet.\n            // I will fix server.js after this file.\n            state.prizeImage = img; \n        }\n\n        state.phase = 'revealing';\n        state.startTime = performance.now();\n        state.particles = [];\n        state.trailParticles = [];\n        state.shockwaves = [];\n        state.hasCelebrated = false;\n        state.hasProductExploded = false;\n        state.productScale = 0;\n\n        // Reset previous targets\n        state.stars.forEach(s => s.isTarget = false);\n\n        const { w, h } = state.dims;\n        const available = [...state.stars];\n        const pickedStars = [];\n        const MIN_DIST = 120;\n        const MARGIN = 150;\n\n        // Masked ID logic: L[S/J]XXXXX\n        // We want to verify format to apply custom reveal order.\n        const text = (winner.studentId || winner.maskedId || winner.name).toUpperCase();\n        // Check for L[SJ] format\n        const isStudentId = /^L[SJ]\\d{5}$/.test(text);\n\n        const chars = text.split('');\n        const charCount = chars.length;\n\n        for (let i = 0; i < charCount; i++) {\n            let selected = null;\n            for (let attempt = 0; attempt < 50; attempt++) {\n                const idx = Math.floor(Math.random() * available.length);\n                const candidate = available[idx];\n\n                const tooClose = pickedStars.some(p => MathUtils.distance(p, candidate) < MIN_DIST);\n                const inBounds = candidate.x > MARGIN && candidate.x < w - MARGIN && candidate.y > MARGIN && candidate.y < h - MARGIN;\n\n                if (!tooClose && inBounds) {\n                    selected = candidate;\n                    available.splice(idx, 1);\n                    selected.isTarget = true;\n                    break;\n                }\n            }\n\n            if (!selected) {\n                selected = { x: w / 2 + (i - charCount / 2) * 100, y: h / 2, size: 2 };\n            }\n\n            // DETERMINE REVEAL ORDER\n            // Default: Left to Right (0, 1, 2...)\n            // Student ID (L S X X X X X): \n            // Indices:   0 1 2 3 4 5 6\n            // Order:     0 (L) -> 2,3,4,5,6 (Numbers) -> 1 (S/J)\n            \n            let revealOrder = i;\n            if (isStudentId) {\n                if (i === 0) revealOrder = 0; // L first\n                else if (i === 1) revealOrder = 7; // S/J LAST (after 5 nums)\n                else revealOrder = i - 1; // Numbers shift up (2->1, 3->2...) \n                // So nums reveal at \"time 1, 2, 3, 4, 5\"\n                // S/J reveals at \"time 7\" (or 6)\n            }\n\n            pickedStars.push({\n                origX: selected.x,\n                origY: selected.y,\n                currentX: selected.x,\n                currentY: selected.y,\n                size: selected.size || 2,\n                currentSize: selected.size || 2,\n                popScale: 1.0,\n                shake: 0,\n                char: chars[i],\n                charIndex: i,         // Position in string (for centering)\n                revealOrder: revealOrder, // Timing index\n                revealed: false\n            });\n        }\n        state.targetStars = pickedStars;\n    };\n\n    // Init Canvas\n    useEffect(() => {\n        const init = () => {\n            const canvas = canvasRef.current;\n            if (!canvas) return;\n            const { innerWidth, innerHeight } = window;\n            const dpr = window.devicePixelRatio || 1;\n\n            canvas.width = innerWidth * dpr;\n            canvas.height = innerHeight * dpr;\n            canvas.style.width = `${innerWidth}px`;\n            canvas.style.height = `${innerHeight}px`;\n\n            const ctx = canvas.getContext('2d');\n            ctx.scale(dpr, dpr);\n\n            stateRef.current.dims = { w: innerWidth, h: innerHeight };\n            if (stateRef.current.stars.length === 0) {\n                stateRef.current.stars = Array.from({ length: CONFIG.physics.starCount }, () =>\n                    EntityFactory.createStar(innerWidth, innerHeight)\n                );\n            }\n        };\n\n        init();\n        window.addEventListener('resize', init);\n        return () => window.removeEventListener('resize', init);\n    }, []);\n\n    // Main Loop\n    useEffect(() => {\n        let animationFrameId;\n        const canvas = canvasRef.current;\n\n        const render = (time) => {\n            const ctx = canvas?.getContext('2d');\n            if (!ctx) return;\n\n            const state = stateRef.current;\n            const { w, h } = state.dims;\n\n            // Updates\n            Systems.updateStars(state.stars, w, h);\n            Systems.updateParticles(state.particles);\n            Systems.updateParticles(state.trailParticles);\n            Systems.updateShockwaves(state.shockwaves);\n\n            // Logic Phases\n            if (state.phase === 'revealing') {\n                const elapsed = time - state.startTime;\n                \n                state.targetStars.forEach(tStar => {\n                    const order = tStar.revealOrder;\n                    let shouldReveal = false;\n\n                    // Custom Timing based on order\n                    // Base delay 800ms\n                    // Each step +1000ms? Or faster?\n                    // User wants dramatic reveal.\n                    \n                    const step = 800; // ms per char\n                    const triggerTime = 1000 + (order * step);\n\n                    if (elapsed > triggerTime) shouldReveal = true;\n\n                    if (shouldReveal && !tStar.revealed) {\n                        tStar.revealed = true;\n                        tStar.popScale = 5.0;\n                        tStar.shake = 10;\n                        state.shockwaves.push(EntityFactory.createShockwave(tStar.currentX, tStar.currentY, CONFIG.colors.primary));\n                        for (let k = 0; k < 20; k++) state.particles.push(EntityFactory.createParticle(tStar.currentX, tStar.currentY, CONFIG.colors.primary, 1.5));\n                    }\n                    if (tStar.revealed) {\n                        tStar.popScale += (1.0 - tStar.popScale) * 0.05;\n                        tStar.currentSize += (45 - tStar.currentSize) * 0.05;\n                        if (tStar.shake > 0) tStar.shake *= 0.9;\n                    }\n                });\n\n                // Check if all revealed\n                // const allRevealed = state.targetStars.every(s => s.revealed);\n                const maxOrder = Math.max(...state.targetStars.map(s => s.revealOrder), 0);\n                const finishTime = 1000 + (maxOrder * 800) + 1500; // Buffer\n\n                if (elapsed > finishTime) {\n                    state.phase = 'connecting';\n                    state.lineStartTime = time;\n                    const sorted = [...state.targetStars].sort((a, b) => a.charIndex - b.charIndex);\n                    const controlPoints = [{ x: 0, y: h / 2 }, ...sorted.map(s => ({ x: s.currentX, y: s.currentY }))];\n                    state.pathPoints = MathUtils.getSplinePoints(controlPoints, 50);\n                }\n            }\n\n            if (state.phase === 'connecting') {\n                const elapsed = time - state.lineStartTime;\n                state.lineProgress = Math.min(elapsed / CONFIG.timings.connectDuration, 1);\n                state.targetStars.forEach(s => s.popScale += (1.0 - s.popScale) * 0.05);\n                if (state.lineProgress >= 1) {\n                    state.phase = 'centering';\n                    state.centerStartTime = time;\n                }\n            }\n\n            if (state.phase === 'centering') {\n                const elapsed = time - state.centerStartTime;\n                state.centerProgress = Math.min(elapsed / CONFIG.timings.centerDuration, 1);\n                const ease = MathUtils.easeElastic(state.centerProgress);\n\n                // Dynamic Sizing based on Screen Width\n                // Base width 1920 -> charWidth 65, Size 45-80\n                const scaleFactor = Math.min(w / 1920, 1); \n                const charWidth = 65 * scaleFactor;\n                const baseSize = 45 * scaleFactor;\n                const growSize = 35 * scaleFactor;\n\n                const totalWidth = state.targetStars.length * charWidth;\n                const startX = w / 2 - totalWidth / 2 + (charWidth / 2);\n                \n                // Target Y: Move UP by ~25% of screen height from previous\n                // Previous was 0.35h. Moving up by 0.23h -> 0.12h.\n                const targetY = h * 0.12;\n\n                state.targetStars.forEach((s) => {\n                    const finalX = startX + (s.charIndex * charWidth);\n                    const finalY = targetY; \n                    \n                    s.currentX = s.origX + (finalX - s.origX) * ease;\n                    s.currentY = s.origY + (finalY - s.origY) * ease;\n                    s.currentSize = baseSize + (growSize * ease);\n                });\n\n                const sorted = [...state.targetStars].sort((a, b) => a.charIndex - b.charIndex);\n                // Control points should curve to new targetY\n                const controlPoints = [{ x: 0, y: h / 2 }, ...sorted.map(s => ({ x: s.currentX, y: s.currentY }))];\n                state.pathPoints = MathUtils.getSplinePoints(controlPoints, 50);\n\n                if (state.centerProgress >= 1) {\n                    state.phase = 'done';\n                    if (!state.hasCelebrated) {\n                        state.shockwaves.push(EntityFactory.createShockwave(w / 2, targetY, CONFIG.colors.gold));\n                        for (let k = 0; k < 150; k++) state.particles.push(EntityFactory.createParticle(w / 2, targetY, CONFIG.colors.gold, 2));\n                        state.hasCelebrated = true;\n                        state.productStartTime = time + 1000;\n                    }\n                }\n            }\n\n            if (state.phase === 'done' && time > state.productStartTime && !state.hasProductExploded) {\n                state.phase = 'product_incoming';\n                state.productComet = {\n                    startX: w + 100,\n                    startY: -100,\n                    x: w + 100,\n                    y: -100,\n                    targetX: w / 2,\n                    targetY: h * 0.55,\n                    angle: 0\n                };\n                state.productStartTime = time;\n            }\n\n            if (state.phase === 'product_incoming') {\n                const elapsed = time - state.productStartTime;\n                const progress = Math.min(elapsed / CONFIG.timings.productInDuration, 1);\n                const ease = MathUtils.easeOutCubic(progress);\n\n                const pc = state.productComet;\n                const prevX = pc.x;\n                const prevY = pc.y;\n\n                pc.x = pc.startX + (pc.targetX - pc.startX) * ease;\n                pc.y = pc.startY + (pc.targetY - pc.startY) * ease;\n                pc.angle = Math.atan2(pc.y - prevY, pc.x - prevX);\n\n                for (let k = 0; k < 2; k++) {\n                    state.trailParticles.push(EntityFactory.createTrailParticle(pc.x, pc.y, pc.angle + Math.PI, CONFIG.colors.product));\n                }\n\n                if (progress >= 1) {\n                    state.phase = 'product_reveal';\n                    state.hasProductExploded = true;\n                    state.productScale = 0;\n                    state.shockwaves.push(EntityFactory.createShockwave(pc.x, pc.y, CONFIG.colors.product));\n                    for (let k = 0; k < 50; k++) state.particles.push(EntityFactory.createParticle(pc.x, pc.y, CONFIG.colors.product, 1.5));\n                }\n            }\n\n            if (state.phase === 'product_reveal') {\n                state.productScale += (1.5 - state.productScale) * 0.1;\n            }\n\n            // --- DRAWING --- \n            if (state.phase === 'done' || state.phase === 'product_incoming' || state.phase === 'product_reveal') state.nebulaPulse += 0.02;\n            Systems.drawBackground(ctx, w, h, state.phase, state.nebulaPulse);\n\n            state.stars.forEach(star => {\n                if (star.isTarget) return;\n                ctx.beginPath();\n                ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);\n                ctx.fillStyle = star.color;\n                ctx.globalAlpha = star.alpha * 0.8;\n                ctx.fill();\n                ctx.globalAlpha = 1;\n            });\n\n            const lineOpacity = state.phase === 'centering' ? (1 - state.centerProgress) : 1;\n            const drawProgress = state.phase === 'centering' ? 1 : state.lineProgress;\n\n            if ((state.phase === 'connecting' || state.phase === 'centering') && state.pathPoints.length > 0) {\n                Systems.drawSplineLine(ctx, state.pathPoints, drawProgress, lineOpacity);\n                if (state.phase === 'connecting') {\n                    const totalPoints = state.pathPoints.length;\n                    const drawIndex = Math.floor(drawProgress * totalPoints);\n                    if (drawIndex > 4) {\n                        const tip = state.pathPoints[drawIndex - 1];\n                        if (tip) {\n                            const prev = state.pathPoints[Math.max(0, drawIndex - 4)];\n                            const angle = Math.atan2(tip.y - prev.y, tip.x - prev.x);\n                            for (let k = 0; k < 3; k++) state.trailParticles.push(EntityFactory.createTrailParticle(tip.x, tip.y, angle));\n                        }\n                    }\n                }\n            }\n\n            if (state.phase === 'product_incoming') {\n                Systems.drawProductComet(ctx, state.productComet, 1, state.prizeImage);\n            }\n\n            state.shockwaves.forEach(sw => {\n                ctx.beginPath();\n                ctx.arc(sw.x, sw.y, sw.radius, 0, Math.PI * 2);\n                ctx.strokeStyle = sw.color;\n                ctx.lineWidth = 2;\n                ctx.globalAlpha = sw.alpha;\n                ctx.stroke();\n                ctx.globalAlpha = 1;\n            });\n\n            [...state.particles, ...state.trailParticles].forEach(p => {\n                ctx.globalAlpha = p.life;\n                ctx.fillStyle = p.color;\n                ctx.beginPath();\n                ctx.arc(p.x, p.y, p.size * p.life, 0, Math.PI * 2);\n                ctx.fill();\n                ctx.globalAlpha = 1;\n            });\n\n            state.targetStars.forEach(s => {\n                if (s.revealed) {\n                    let scale = s.popScale;\n                    let glowColor = CONFIG.colors.primary;\n                    if (state.phase === 'done' || state.phase === 'product_incoming' || state.phase === 'product_reveal') {\n                        const pulse = Math.sin(time * 0.003 + s.charIndex) * 0.1 + 0.05;\n                        scale += pulse;\n                        glowColor = `hsl(${180 + Math.sin(time * 0.002) * 40}, 100%, 70%)`;\n                    }\n                    let drawX = s.currentX + (Math.random() - 0.5) * s.shake;\n                    let drawY = s.currentY + (Math.random() - 0.5) * s.shake;\n\n                    const fontSize = Math.floor(s.currentSize * scale);\n                    ctx.font = `bold ${fontSize}px \"Courier New\", monospace`;\n                    ctx.shadowBlur = 40 * scale;\n                    ctx.shadowColor = glowColor;\n                    ctx.fillStyle = CONFIG.colors.text;\n                    ctx.textAlign = 'center';\n                    ctx.textBaseline = 'middle';\n                    ctx.fillText(s.char, drawX, drawY);\n                    ctx.shadowBlur = 0;\n                    ctx.fillText(s.char, drawX, drawY);\n                } else {\n                    ctx.beginPath();\n                    ctx.arc(s.currentX, s.currentY, s.size * 2, 0, Math.PI * 2);\n                    ctx.fillStyle = '#FFF';\n                    ctx.shadowBlur = 15;\n                    ctx.shadowColor = '#fff';\n                    ctx.fill();\n                    ctx.shadowBlur = 0;\n                }\n            });\n\n            if (state.phase === 'product_reveal') {\n                // Move down to h * 0.55 to clear the Student ID at h * 0.12\n                Systems.drawProductReveal(ctx, w / 2, h * 0.55, state.productScale, state.currentPrizeName, state.prizeImage, state.currentPrizeTitle, h);\n            }\n\n            animationFrameId = requestAnimationFrame(render);\n        };\n\n        render(0);\n        return () => cancelAnimationFrame(animationFrameId);\n    }, []);\n\n    if (contextLoading) {\n        return (\n            <div className=\"w-full h-screen bg-black flex items-center justify-center text-cyan-500 font-mono\">\n                <div className=\"animate-pulse\">INITIALIZING CELESTIAL UPLINK...</div>\n            </div>\n        );\n    }\n\n    if (!selectedEvent) {\n        return (\n            <div className=\"w-full h-screen bg-black flex flex-col items-center justify-center text-slate-500 font-sans p-8 text-center\">\n                <h2 className=\"text-2xl font-bold text-slate-300 mb-2\">Signal Lost</h2>\n                <p>No active event channel detected.</p>\n                <p className=\"text-sm mt-4\">Please select an event in the Control Center.</p>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"relative w-full h-screen bg-black overflow-hidden cursor-none\">\n            <canvas ref={canvasRef} className=\"block w-full h-full\" />\n            <div className=\"absolute top-4 right-4 text-xs text-white/10 select-none\">\n                DISPLAY MODE  {selectedEvent.name.toUpperCase()}\n            </div>\n        </div>\n    );\n};\n\nexport default RaffleDisplay;"],"names":["CONFIG","bgInner","bgOuter","primary","secondary","gold","product","text","placeholderBg","placeholderStroke","friction","starCount","shockwaveMaxRadius","revealDelayL","revealDelayS","connectDuration","centerDuration","productInDuration","MathUtils","points","segments","arguments","length","undefined","results","p","i","p0","p1","p2","p3","j","t","t2","t3","q0","q1","q2","q3","x","y","push","Math","pow","randomRange","min","max","random","distance","sqrt","EntityFactory","createStar","w","h","z","size","alpha","blinkSpeed","vx","vy","color","isTarget","speedMult","angle","PI","speed","cos","sin","life","decay","drag","createShockwave","radius","maxRadius","createTrailParticle","trailAngle","spread","concat","Systems","updateStars","stars","forEach","star","particles","splice","shockwaves","sw","drawBackground","ctx","phase","nebulaPulse","gradient","createRadialGradient","addColorStop","fillStyle","fillRect","glow","drawSplineLine","pathPoints","progress","opacity","drawCount","floor","lineCap","lineJoin","beginPath","moveTo","lineTo","strokeStyle","lineWidth","shadowBlur","shadowColor","stroke","drawProductComet","comet","imageObj","save","globalAlpha","translate","rotate","complete","drawImage","ellipse","fill","arc","restore","drawProductReveal","scale","prizeName","prizeTitle","screenH","maxRelativeSize","targetSize","targetHalf","imgAspect","width","height","drawW","drawH","strokeRect","textAlign","maxTextWidth","fillTextFit","cx","cy","fontBase","maxWidth","font","measureText","scaleRatio","fillText","textBaseline","titleY","toUpperCase","RaffleDisplay","canvasRef","useRef","selectedEvent","loading","contextLoading","useEvent","lastTrigger","setLastTrigger","useState","stateRef","targetStars","trailParticles","dims","startTime","lineStartTime","centerStartTime","productStartTime","lineProgress","centerProgress","hasCelebrated","hasProductExploded","productComet","startX","startY","productScale","currentPrizeName","currentPrizeTitle","prizeImage","useEffect","channel","BroadcastChannel","onmessage","event","type","winner","prize","data","console","log","startAnimation","resetAnimation","close","interval","setInterval","async","state","getRaffleState","id","animationTrigger","status","currentPrize","err","clearInterval","current","s","pName","pTitle","pImage","name","title","image","img","Image","src","performance","now","available","pickedStars","MARGIN","studentId","maskedId","isStudentId","test","chars","split","charCount","selected","attempt","idx","candidate","tooClose","some","inBounds","revealOrder","origX","origY","currentX","currentY","currentSize","popScale","shake","char","charIndex","revealed","init","canvas","innerWidth","innerHeight","window","dpr","devicePixelRatio","style","getContext","Array","from","addEventListener","removeEventListener","animationFrameId","render","time","elapsed","tStar","order","shouldReveal","k","maxOrder","map","controlPoints","sort","a","b","ease","scaleFactor","charWidth","baseSize","growSize","targetY","finalX","finalY","targetX","pc","prevX","prevY","atan2","lineOpacity","drawProgress","totalPoints","drawIndex","tip","prev","glowColor","drawX","drawY","fontSize","requestAnimationFrame","cancelAnimationFrame","_jsx","className","children","_jsxs","ref"],"sourceRoot":""}