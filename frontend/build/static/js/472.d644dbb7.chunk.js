"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[472],{28:(e,t,a)=>{a.d(t,{A:()=>d});var s=a(2555),l=(a(5043),a(9570)),i=a(2465),n=a(1614),r=a(2136),o=a(5683),c=a(579);const d=e=>{let{isOpen:t,onClose:a,content:d}=e;const{t:h}=(0,r.o)();return(0,c.jsx)(l.N,{children:t&&(0,c.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{duration:.2}},className:"fixed inset-0 bg-black/80 backdrop-blur-md flex justify-center items-center z-50 p-4",onClick:a,children:(0,c.jsxs)(i.P.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},transition:o.Ux.spring,className:"glass-panel w-full max-w-md border border-white/10",onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{className:"p-6 border-b border-purple-500/20 flex justify-between items-center",children:[(0,c.jsx)("h3",{className:"text-xl font-bold text-white tracking-wider",children:(null===d||void 0===d?void 0:d.title)||h("modalDefaultTitle")}),(0,c.jsx)(i.P.button,{whileHover:{scale:1.05},whileTap:{scale:.9},onClick:a,"aria-label":"Close Modal",className:"text-gray-400 hover:text-white text-2xl w-8 h-8 flex items-center justify-center rounded-full hover:bg-white/10 transition-colors",children:"\xd7"})]}),(0,c.jsxs)("div",{className:"p-6 text-center",children:[d.contentComponent?d.contentComponent():(0,c.jsx)("p",{className:"text-gray-300 mb-6",children:d.body}),("qr-code"===d.type||"setup-qr"===d.type)&&(0,c.jsx)("div",{className:"flex justify-center bg-white p-4 rounded-lg",children:(0,c.jsx)(n.Xe,{value:d.qrValue,size:256,level:"H"})}),"alert"===d.type&&(0,c.jsx)("div",{className:"flex justify-center gap-4 mt-4",children:(0,c.jsx)(i.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"animated-gradient-bg text-white font-bold py-2 px-4 rounded-lg",children:h("btnOk")})}),"confirm"===d.type&&(0,c.jsxs)("div",{className:"flex justify-center gap-4 mt-4",children:[(0,c.jsx)(i.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg",children:h("btnCancel")}),(0,c.jsx)(i.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{d.onConfirm(),a()},className:"animated-gradient-bg text-white font-bold py-2 px-4 rounded-lg",children:h("btnConfirm")})]}),"prompt"===d.type&&(0,c.jsxs)("div",{className:"flex flex-col items-center gap-4 mt-4",children:[(0,c.jsx)("input",{type:"text",id:"prompt-input",className:"w-full bg-black border border-gray-700 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-purple-500 focus:outline-none transition-all"}),(0,c.jsxs)("div",{className:"flex justify-center gap-4 mt-4",children:[(0,c.jsx)(i.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg",children:h("btnCancel")}),(0,c.jsx)(i.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{const e=document.getElementById("prompt-input");d.onConfirm(e.value),a()},className:"animated-gradient-bg text-white font-bold py-2 px-4 rounded-lg",children:h("btnConfirm")})]})]}),"edit-ticket"===d.type&&(0,c.jsxs)("div",{className:"flex flex-col items-center gap-4 mt-4",children:[(0,c.jsx)("input",{type:"text",id:"edit-name-input",defaultValue:d.ticket.attendeeName,className:"w-full bg-black border border-gray-700 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-purple-500 focus:outline-none transition-all"}),(0,c.jsx)("input",{type:"email",id:"edit-email-input",defaultValue:d.ticket.attendeeEmail,className:"w-full bg-black border border-gray-700 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-purple-500 focus:outline-none transition-all"}),(0,c.jsxs)("div",{className:"flex justify-center gap-4 mt-4",children:[(0,c.jsx)(i.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg",children:h("btnCancel")}),(0,c.jsx)(i.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{const e=document.getElementById("edit-name-input"),t=document.getElementById("edit-email-input");d.onConfirm((0,s.A)((0,s.A)({},d.ticket),{},{attendeeName:e.value,attendeeEmail:t.value})),a()},className:"animated-gradient-bg text-white font-bold py-2 px-4 rounded-lg",children:h("btnSave")})]})]})]})]})})})}},570:(e,t,a)=>{a.d(t,{A:()=>u});var s=a(5043),l=a(2465),i=a(9570),n=a(6089),r=a(2136),o=a(5683),c=a(579);const d=e=>{let{onNewEvent:t,onDeleteEvent:a,onRaffle:d}=e;const{events:h,loading:x,eventId:m,selectEvent:p}=(0,n._)(),{t:u,cycleLanguage:v,language:g}=(0,r.o)(),[f,b]=(0,s.useState)(!1);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"xl:hidden fixed top-4 left-4 z-50",children:(0,c.jsx)(l.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>b(!f),"aria-label":f?"Close Sidebar":"Open Sidebar",className:"bg-gray-900/80 backdrop-blur text-white p-2.5 rounded-xl border border-gray-700 shadow-lg",children:f?(0,c.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):(0,c.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),(0,c.jsx)("div",{className:"fixed z-50 w-72 bg-gradient-to-b from-slate-900/80 to-slate-950/80 backdrop-blur-2xl border border-white/10 shadow-2xl transform transition-all duration-300 ease-out xl:translate-x-0 xl:top-4 xl:left-4 xl:bottom-4 xl:rounded-[2.5rem] inset-y-0 left-0 ".concat(f?"translate-x-0":"-translate-x-full"),children:(0,c.jsxs)("div",{className:"p-6 flex flex-col h-full relative overflow-hidden",children:[(0,c.jsx)("div",{className:"absolute top-0 left-0 w-full h-32 bg-violet-600/10 blur-3xl -z-10 pointer-events-none"}),(0,c.jsx)(l.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-8 mt-2 flex justify-between items-center",children:(0,c.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-2 cursor-pointer",onClick:()=>window.location.hash="",children:[(0,c.jsx)("span",{className:"w-8 h-8 bg-gradient-to-br from-violet-500 via-fuchsia-500 to-pink-500 rounded-lg flex items-center justify-center text-lg shadow-lg shadow-violet-500/20",children:"\ud83c\udfab"}),(0,c.jsx)("span",{className:"rainbow-text font-extrabold tracking-tight",children:u("appTitle")})]})}),(0,c.jsxs)(l.P.button,{variants:o.XW,whileHover:"hover",whileTap:"tap",onClick:v,className:"mb-6 w-full py-2 px-3 glass-interactive rounded-lg text-xs font-bold text-slate-400 uppercase tracking-wider flex justify-between items-center group",children:[(0,c.jsx)("span",{children:"Language"}),(0,c.jsx)("span",{className:"text-white group-hover:text-violet-300 transition-colors",children:"en"===g?"\ud83c\uddfa\ud83c\uddf8 EN":"\ud83c\uddf9\ud83c\uddfc TW"})]}),(0,c.jsxs)("div",{className:"flex-grow overflow-y-auto pr-2 custom-scrollbar",children:[(0,c.jsx)("h3",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-4 px-2",children:u("yourEvents")}),x&&(0,c.jsx)("div",{className:"flex justify-center py-4",children:(0,c.jsx)("div",{className:"w-6 h-6 border-2 border-pink-500 border-t-transparent rounded-full animate-spin"})}),(0,c.jsx)(l.P.div,{variants:o.tl,initial:"hidden",animate:"visible",className:"space-y-1",children:h.map(e=>{const t=m===e.id;return(0,c.jsxs)(l.P.div,{variants:o.tE,className:"relative group flex items-center",children:[(0,c.jsxs)("button",{onClick:()=>{var t;t=e.id,p(t),b(!1),b(!1)},className:"relative w-full text-left px-4 py-3.5 rounded-xl transition-all duration-300 ".concat(t?"text-white font-bold":"text-slate-400 hover:text-slate-200 hover:bg-white/5"),children:[t&&(0,c.jsx)(l.P.div,{layoutId:"activeEventBackground",className:"absolute inset-0 bg-gradient-to-r from-white/10 to-transparent border border-white/10 rounded-xl shadow-lg backdrop-blur-sm",initial:!1,transition:{type:"spring",stiffness:500,damping:30}}),t&&(0,c.jsx)(l.P.div,{layoutId:"activeEventIndicator",className:"absolute left-0 top-0 bottom-0 my-auto w-1 h-6 bg-gradient-to-b from-violet-500 via-fuchsia-500 to-pink-500 rounded-r-full shadow-[0_0_15px_rgba(168,85,247,0.6)]",initial:!1,transition:{type:"spring",stiffness:500,damping:30}}),(0,c.jsx)("span",{className:"relative z-10 truncate block pl-3 transition-transform duration-200 group-hover:translate-x-1",children:e.name||e.id})]}),(0,c.jsx)(l.P.button,{whileHover:{scale:1.1,color:"#ef4444"},whileTap:{scale:.9},onClick:t=>{t.stopPropagation(),a(e.id)},className:"absolute right-2 z-20 p-2 text-slate-500 opacity-0 group-hover:opacity-100 transition-all duration-200 hover:bg-white/10 rounded-lg",title:"Delete Event",children:(0,c.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},e.id)})}),m&&(0,c.jsxs)(l.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"mt-8 mb-4 px-1",children:[(0,c.jsx)("h3",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3 px-2",children:u("quickTools")}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,c.jsxs)(l.P.button,{variants:o.XW,whileHover:"hover",whileTap:"tap",onClick:d,className:"p-3 glass-interactive rounded-xl text-center group flex flex-col items-center justify-center gap-2",children:[(0,c.jsx)("div",{className:"text-xl group-hover:scale-110 transition-transform duration-300 drop-shadow-[0_0_8px_rgba(255,255,255,0.3)]",children:"\ud83c\udfb2"}),(0,c.jsx)("div",{className:"text-[10px] text-slate-400 font-medium",children:u("raffle")})]}),(0,c.jsxs)(l.P.button,{variants:o.XW,whileHover:"hover",whileTap:"tap",onClick:()=>window.location.hash="#email",className:"p-3 glass-interactive rounded-xl text-center group flex flex-col items-center justify-center gap-2",children:[(0,c.jsx)("div",{className:"text-xl group-hover:scale-110 transition-transform duration-300 drop-shadow-[0_0_8px_rgba(255,255,255,0.3)]",children:"\u2709\ufe0f"}),(0,c.jsx)("div",{className:"text-[10px] text-slate-400 font-medium",children:u("email")})]})]})]})]}),(0,c.jsx)("div",{className:"mt-auto pt-6 border-t border-white/5",children:(0,c.jsxs)(l.P.button,{variants:o.XW,whileHover:"hover",whileTap:"tap",onClick:t,className:"w-full group relative flex items-center justify-center gap-2 animated-gradient-bg text-white py-3.5 px-4 rounded-xl transition-all border border-white/10 shadow-lg",children:[(0,c.jsx)("span",{className:"text-xl font-light relative z-10 leading-none pb-1",children:"+"}),(0,c.jsx)("span",{className:"font-medium relative z-10",children:u("createEvent")})]})}),(0,c.jsx)("div",{className:"text-[10px] text-slate-600 text-center mt-6 pb-2 select-none opacity-50",children:u("sidebarFooter")})]})}),(0,c.jsx)(i.N,{children:f&&(0,c.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 lg:hidden",onClick:()=>b(!1)})})]})};var h=a(28);const x=e=>{let{children:t,className:a=""}=e;return(0,c.jsx)(l.P.div,{initial:{opacity:0,y:20,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.98},transition:{duration:.4,ease:[.22,1,.36,1]},className:"w-full h-full flex flex-col ".concat(a),children:t})};var m=a(6555),p=a(1200);const u=e=>{let{children:t}=e;const{eventId:a,selectEvent:s,triggerRefresh:l,fetchEvents:i}=(0,n._)(),{modalContent:o,hideModal:u,showErrorModal:v,showPromptModal:g,showConfirmModal:f,showModal:b}=(0,m.h)(),{t:w}=(0,r.o)();return(0,c.jsxs)("div",{className:"flex h-screen bg-transparent text-slate-200 font-sans overflow-hidden",children:[(0,c.jsx)(d,{currentEventId:a,onSelectEvent:s,onNewEvent:()=>{g(w("modalPromptTitle"),"Enter a unique ID for the new event (e.g., concert-2025).",async e=>{if(e){const a=e.trim().toLowerCase().replace(/\s+/g,"-");try{await(0,p.lh)(a),s(a),l()}catch(t){v("Failed to create event: ".concat(t.message))}}u()})},onDeleteEvent:e=>{f(w("modalDeleteEventTitle"),w("modalDeleteEventBody",e),async()=>{try{await(0,p.SX)(e),a===e&&s(null),i(),u()}catch(t){v("Failed to delete event: "+t.message)}})},onRaffle:async()=>{if(a)try{const e=await(0,p.ah)(a);b({type:"alert",title:w("raffleWinnerTitle"),contentComponent:()=>(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("div",{className:"text-6xl mb-4 animate-bounce",children:"\ud83c\udfc6"}),(0,c.jsx)("h3",{className:"text-2xl font-bold text-white mb-2",children:e.winner.name}),(0,c.jsx)("p",{className:"text-gray-400",children:e.winner.email}),(0,c.jsxs)("div",{className:"mt-6 text-xs text-gray-600 uppercase tracking-widest",children:[w("poolSize")," ",e.poolSize]})]})})}catch(e){v(e.message)}},refreshTrigger:0}),(0,c.jsx)("div",{className:"flex-1 flex flex-col min-w-0 relative xl:ml-80 transition-all duration-300 h-full",children:(0,c.jsx)(x,{children:t})}),(0,c.jsx)(h.A,{isOpen:!!o,onClose:u,content:o||{}})]})}},2472:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var s=a(2555),l=a(5043),i=a(2465),n=a(9570),r=a(570),o=a(5683),c=a(579);const d=e=>{let{children:t,title:a,icon:s,colSpan:r=1,className:d="",isCollapsible:h=!1,defaultCollapsed:x=!1}=e;const[m,p]=(0,l.useState)(x);return(0,c.jsxs)(i.P.div,{layout:!0,variants:o.lV,initial:"hidden",animate:"visible",exit:"exit",className:"glass-panel relative overflow-hidden flex flex-col ".concat(r>1?"md:col-span-".concat(r):""," ").concat(d),children:[(a||s||h)&&(0,c.jsxs)(i.P.div,{layout:"position",className:"flex items-center justify-between p-6 pb-2 z-20",children:[(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[s&&(0,c.jsx)("span",{className:"text-xl",children:s}),a&&(0,c.jsx)("h3",{className:"text-sm font-bold uppercase tracking-widest text-slate-400",children:a})]}),h&&(0,c.jsx)(i.P.button,{variants:o.XW,whileHover:"hover",whileTap:"tap",onClick:()=>p(!m),className:"p-2 rounded-full hover:bg-white/5 text-slate-500 hover:text-white transition-colors",children:(0,c.jsx)(i.P.svg,{animate:{rotate:m?180:0},className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),(0,c.jsx)(n.N,{initial:!1,mode:"wait",children:!m&&(0,c.jsx)(i.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{type:"spring",stiffness:300,damping:25},className:"flex-1 p-6 pt-2 z-10",children:t},"content")}),(0,c.jsx)("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-32 h-32 bg-gradient-to-tr from-white/5 to-transparent rounded-full blur-3xl pointer-events-none -z-0"})]})};var h=a(441),x=a(1915);const m=e=>{let{value:t}=e;const a=(0,h.z)(t,{mass:.8,stiffness:75,damping:15}),s=(0,x.G)(a,e=>Math.round(e).toLocaleString());return(0,l.useEffect)(()=>{a.set(t)},[a,t]),(0,c.jsx)(i.P.span,{children:s})},p={pink:{border:"border-pink-500/10 hover:border-pink-500/40",glow:"bg-pink-500/10",text:"text-pink-400",bar:"from-pink-500 to-rose-500"},blue:{border:"border-cyan-500/10 hover:border-cyan-500/40",glow:"bg-cyan-500/10",text:"text-cyan-400",bar:"from-cyan-500 to-blue-500"},green:{border:"border-emerald-500/10 hover:border-emerald-500/40",glow:"bg-emerald-500/10",text:"text-emerald-400",bar:"from-emerald-500 to-teal-500"},yellow:{border:"border-amber-500/10 hover:border-amber-500/40",glow:"bg-amber-500/10",text:"text-amber-400",bar:"from-amber-500 to-orange-500"}},u=e=>{let{title:t,value:a,total:s,showProgress:l,colorTheme:n="blue"}=e;const r=s>0?Math.round(a/s*100):0,o=p[n]||p.blue;return(0,c.jsxs)(d,{className:"group transition-colors duration-300 border ".concat(o.border," bg-slate-900/40"),children:[(0,c.jsx)("div",{className:"absolute -top-10 -right-10 w-40 h-40 rounded-full blur-3xl transition-all duration-700 opacity-20 group-hover:opacity-50 group-hover:scale-110 ".concat(o.glow," pointer-events-none")}),(0,c.jsx)("h3",{className:"text-[10px] font-bold uppercase tracking-widest mb-3 relative z-10 ".concat(o.text," opacity-90"),children:t}),(0,c.jsxs)("div",{className:"flex items-end gap-2 relative z-10",children:[(0,c.jsx)("span",{className:"text-5xl font-black text-white drop-shadow-lg tracking-tighter",children:(0,c.jsx)(m,{value:a})}),void 0!==s&&(0,c.jsxs)("span",{className:"text-slate-500 text-sm mb-1.5 font-bold",children:["/ ",s]})]}),l&&(0,c.jsx)("div",{className:"mt-5 h-2 w-full bg-white/5 rounded-full overflow-hidden relative z-10",children:(0,c.jsx)(i.P.div,{initial:{width:0},animate:{width:"".concat(r,"%")},transition:{duration:1.5,ease:"circOut"},className:"h-full bg-gradient-to-r shadow-[0_0_15px_currentColor] ".concat(o.bar)})})]})};var v=a(2136);const g=e=>{let{stats:t}=e;const{t:a}=(0,v.o)();return(0,c.jsxs)(i.P.div,{variants:o.tl,initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,c.jsx)(u,{title:a("statsContained"),value:t.checkedIn,colorTheme:"green"}),(0,c.jsx)(u,{title:a("statsAwol"),value:t.onLeave,colorTheme:"yellow"}),(0,c.jsx)(u,{title:a("statsCaptured"),value:t.checkedIn+t.onLeave,total:t.total,showProgress:!0,colorTheme:"pink"}),(0,c.jsx)(u,{title:a("statsAtLarge"),value:t.valid,colorTheme:"blue"})]})};var f=a(108),b=a(3083),w=a(7734),j=a(2185),y=a(6026),k=a(6150),N=a(3839);const C=e=>{let{tickets:t}=e;const{t:a}=(0,v.o)();if(!t||!Array.isArray(t))return(0,c.jsx)("div",{className:"glass-panel h-64 flex items-center justify-center text-gray-500",children:"No data available"});const s=t.flatMap(e=>e.checkInHistory&&0!==e.checkInHistory.length?e.checkInHistory.filter(e=>"check-in"===e.action).map(e=>e.timestamp._seconds?new Date(1e3*e.timestamp._seconds):new Date(e.timestamp)):[]).sort((e,t)=>e-t);if(0===s.length)return(0,c.jsx)("div",{className:"glass-panel h-64 flex items-center justify-center text-gray-500",children:"No check-in data available yet"});const l=9e5,i=new Map;if(s.length>0){const e=new Date(Math.floor(s[0].getTime()/l)*l),t=new Date(Math.ceil(s[s.length-1].getTime()/l)*l);for(let a=e.getTime();a<=t.getTime();a+=l)i.set(a,0);s.forEach(e=>{const t=Math.floor(e.getTime()/l)*l;i.set(t,(i.get(t)||0)+1)})}const n=Array.from(i.entries()).map(e=>{let[t,a]=e;return{time:new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),count:a}});return(0,c.jsxs)("div",{className:"glass-panel h-72 w-full p-6 relative overflow-hidden",children:[(0,c.jsx)("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 opacity-20"}),(0,c.jsx)("h3",{className:"text-gray-400 text-sm font-bold uppercase tracking-widest mb-6 pl-2 border-l-4 border-purple-500",children:a("chartTitle")}),(0,c.jsx)(f.u,{width:"100%",height:"100%",children:(0,c.jsxs)(b.Q,{data:n,children:[(0,c.jsx)("defs",{children:(0,c.jsxs)("linearGradient",{id:"colorCount",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,c.jsx)("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.3}),(0,c.jsx)("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:0})]})}),(0,c.jsx)(w.d,{strokeDasharray:"3 3",stroke:"#ffffff10",vertical:!1}),(0,c.jsx)(j.W,{dataKey:"time",stroke:"#6b7280",tick:{fill:"#9ca3af",fontSize:12},tickLine:!1,axisLine:!1}),(0,c.jsx)(y.h,{stroke:"#6b7280",tick:{fill:"#9ca3af",fontSize:12},tickLine:!1,axisLine:!1,allowDecimals:!1}),(0,c.jsx)(k.m,{contentStyle:{backgroundColor:"#111827",borderColor:"#374151",borderRadius:"12px",color:"#fff"},itemStyle:{color:"#a78bfa"},cursor:{stroke:"#ffffff20",strokeWidth:2}}),(0,c.jsx)(N.G,{type:"monotone",dataKey:"count",stroke:"#8b5cf6",strokeWidth:3,fillOpacity:1,fill:"url(#colorCount)"})]})})]})};var L=a(1200);const T=e=>{let{eventId:t,onTicketCreated:a,onApiError:s}=e;const[n,r]=(0,l.useState)(""),[d,h]=(0,l.useState)(""),[x,m]=(0,l.useState)(!1),{t:p}=(0,v.o)();return(0,c.jsxs)(i.P.div,{layout:!0,className:"glass-panel p-6 relative overflow-hidden group",children:[(0,c.jsx)("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-32 h-32 bg-gradient-to-tr from-violet-500/20 via-pink-500/20 to-blue-500/20 rounded-full blur-3xl group-hover:scale-110 transition-transform duration-500"}),(0,c.jsxs)("div",{className:"relative z-10",children:[(0,c.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,c.jsx)("div",{className:"p-3 bg-gradient-to-br from-violet-500/20 to-pink-500/20 rounded-xl text-white",children:(0,c.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})})}),(0,c.jsx)("h2",{className:"text-xl font-bold text-white",children:p("createTitle")})]}),(0,c.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),m(!0);try{const e=await(0,L.Z2)(t,n,d);a(e),r(""),h("")}catch(l){s(l.message)}finally{m(!1)}},className:"space-y-4",children:[(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider ml-1",children:p("labelIdentity")}),(0,c.jsx)(i.P.input,{whileFocus:{scale:1.01,borderColor:"#ec4899"},type:"text",placeholder:p("placeholderIdentity"),value:n,onChange:e=>r(e.target.value),required:!0,className:"w-full bg-black/50 border border-gray-700 rounded-xl px-4 py-3 text-white placeholder-gray-600 focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none transition-all hover:border-gray-600"})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider ml-1",children:p("labelEmail")}),(0,c.jsx)(i.P.input,{whileFocus:{scale:1.01,borderColor:"#ec4899"},type:"email",placeholder:p("placeholderEmail"),value:d,onChange:e=>h(e.target.value),required:!0,className:"w-full bg-black/50 border border-gray-700 rounded-xl px-4 py-3 text-white placeholder-gray-600 focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none transition-all hover:border-gray-600"})]}),(0,c.jsx)(i.P.button,{type:"submit",disabled:x,variants:o.XW,whileHover:"hover",whileTap:"tap",className:"w-full mt-6 animated-gradient-bg hover:brightness-110 text-white font-bold py-3.5 px-4 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-purple-500/20 flex items-center justify-center gap-2",children:x?(0,c.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{children:p("btnCreate")}),(0,c.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})]})})]})]})]})},P=e=>{let{status:t}=e;const a={"checked-in":{style:"bg-green-500/10 text-green-400 border-green-500/20",icon:(0,c.jsx)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}),label:"CHECKED IN"},"on-leave":{style:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",icon:(0,c.jsx)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),label:"ON LEAVE"},valid:{style:"bg-blue-500/10 text-blue-400 border-blue-500/20",icon:(0,c.jsx)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),label:"VALID"}}[t]||{style:"bg-gray-700 text-gray-400",icon:null,label:t};return(0,c.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 text-[10px] font-bold rounded-md border ".concat(a.style," transition-colors"),children:[a.icon,a.label]})},E=(0,l.memo)(e=>{let{ticket:t,onCheckIn:a,onShowQR:s,onEdit:l,onDelete:n}=e;const{t:r}=(0,v.o)();return(0,c.jsxs)(i.P.tr,{layout:!0,variants:o.tE,initial:"hidden",animate:"visible",exit:"exit",className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[(0,c.jsx)("td",{className:"p-4",children:(0,c.jsx)(P,{status:t.status})}),(0,c.jsxs)("td",{className:"p-4 font-medium text-slate-200 selectable",children:[t.attendeeName,(0,c.jsx)("br",{}),(0,c.jsx)("span",{className:"text-slate-500 text-sm selectable",children:t.attendeeEmail})]}),(0,c.jsxs)("td",{className:"p-4 text-slate-600 text-xs font-mono uppercase tracking-wider selectable",children:[t.id.substring(0,8),"..."]}),(0,c.jsx)("td",{className:"p-4 text-right",children:(0,c.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,c.jsx)(i.P.button,{variants:o.XW,whileHover:"hover",whileTap:"tap",onClick:()=>s(t.id,t.attendeeName),className:"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:r("btnMark"),"aria-label":"View QR Code",children:(0,c.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})}),"checked-in"!==t.status&&(0,c.jsxs)(i.P.button,{variants:o.XW,whileHover:"hover",whileTap:"tap",onClick:()=>a(t),className:"px-3 py-1.5 animated-gradient-bg text-white text-xs font-bold rounded-lg flex items-center gap-1.5",title:r("btnCapture"),"aria-label":"Check In",children:[(0,c.jsx)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),r("btnCapture").toUpperCase()]}),(0,c.jsx)(i.P.button,{variants:o.XW,whileHover:"hover",whileTap:"tap",onClick:()=>l(t),className:"p-2 text-sky-400 hover:text-sky-300 hover:bg-sky-500/10 rounded-lg transition-colors",title:r("btnRetcon"),"aria-label":"Edit Ticket",children:(0,c.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,c.jsx)(i.P.button,{variants:o.XW,whileHover:"hover",whileTap:"tap",onClick:()=>n(t),className:"p-2 text-rose-400 hover:text-rose-300 hover:bg-rose-500/10 rounded-lg transition-colors",title:r("btnPurge"),"aria-label":"Delete Ticket",children:(0,c.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]})}),M=e=>{let{ticket:t,onCheckIn:a,onShowQR:s,onEdit:l,onDelete:n}=e;return(0,c.jsxs)(i.P.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},className:"glass-panel p-5 mb-6 relative overflow-hidden border-l-0 rounded-3xl",children:[(0,c.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1.5 ".concat("checked-in"===t.status?"bg-emerald-500 shadow-[0_0_15px_rgba(16,185,129,0.6)]":"bg-violet-500 shadow-[0_0_15px_rgba(139,92,246,0.6)]")}),(0,c.jsxs)("div",{className:"flex justify-between items-start mb-3 pl-3",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"font-bold text-white text-lg tracking-tight selectable",children:t.attendeeName}),(0,c.jsx)("p",{className:"text-slate-400 text-sm selectable",children:t.attendeeEmail})]}),(0,c.jsx)(P,{status:t.status})]}),(0,c.jsx)("div",{className:"pl-3 mb-5",children:(0,c.jsxs)("p",{className:"text-[10px] text-slate-500 font-mono uppercase tracking-widest selectable",children:["ID: ",t.id]})}),(0,c.jsxs)("div",{className:"flex gap-3 pl-3 pb-1",children:[(0,c.jsx)("button",{onClick:()=>s(t.id,t.attendeeName),className:"flex-1 glass-interactive text-slate-300 hover:text-white text-sm font-semibold py-2.5 px-4 rounded-xl whitespace-nowrap","aria-label":"View QR Code",children:"QR Code"}),"checked-in"!==t.status&&(0,c.jsx)("button",{onClick:()=>a(t),className:"flex-1 animated-gradient-bg text-white text-sm font-bold py-2.5 px-4 rounded-xl whitespace-nowrap","aria-label":"Check In",children:"Check In"}),(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)("button",{onClick:()=>l(t),className:"glass-interactive w-10 flex items-center justify-center rounded-xl text-sky-400 hover:text-sky-300","aria-label":"Edit Ticket",children:(0,c.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),(0,c.jsx)("button",{onClick:()=>n(t),className:"glass-interactive w-10 flex items-center justify-center rounded-xl text-rose-400 hover:text-rose-300","aria-label":"Delete Ticket",children:(0,c.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})};var S=a(7302);const I=()=>(0,c.jsxs)("div",{className:"glass-panel p-6 rounded-3xl border border-white/5 bg-slate-900/40 backdrop-blur-xl space-y-6",children:[(0,c.jsxs)("div",{className:"flex gap-4",children:[(0,c.jsx)(S.A,{height:"48px",width:"100%",className:"rounded-xl"}),(0,c.jsx)(S.A,{height:"48px",width:"120px",className:"rounded-xl"})]}),(0,c.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/5",children:[(0,c.jsx)(S.A,{height:"16px",width:"60px"}),(0,c.jsx)(S.A,{height:"16px",width:"100px"}),(0,c.jsx)(S.A,{height:"16px",width:"80px"}),(0,c.jsx)(S.A,{height:"16px",width:"80px"})]}),(0,c.jsx)("div",{className:"space-y-0",children:[...Array(5)].map((e,t)=>(0,c.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-white/5 last:border-0",children:[(0,c.jsxs)("div",{className:"flex items-center gap-4",children:[(0,c.jsx)(S.A,{height:"24px",width:"80px",className:"rounded-full"}),(0,c.jsxs)("div",{children:[(0,c.jsx)(S.A,{height:"20px",width:"150px",className:"mb-2"}),(0,c.jsx)(S.A,{height:"14px",width:"200px"})]})]}),(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)(S.A,{height:"36px",width:"36px",className:"rounded-xl"}),(0,c.jsx)(S.A,{height:"36px",width:"100px",className:"rounded-xl"}),(0,c.jsx)(S.A,{height:"36px",width:"36px",className:"rounded-xl"}),(0,c.jsx)(S.A,{height:"36px",width:"36px",className:"rounded-xl"})]})]},t))})]}),A={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},H=e=>{let{filteredTickets:t,isLoading:a,searchTerm:s,setSearchTerm:l,onCheckIn:r,onShowQR:o,onEdit:d,onDelete:h}=e;const{t:x}=(0,v.o)();return(0,c.jsxs)(i.P.div,{variants:A,initial:"hidden",animate:"visible",className:"glass-panel p-6 rounded-3xl border border-white/5 bg-slate-900/40 backdrop-blur-xl",children:[(0,c.jsxs)("div",{className:"relative mb-6 flex flex-wrap gap-4",children:[(0,c.jsxs)("div",{className:"relative flex-1 min-w-[200px]",children:[(0,c.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,c.jsx)("svg",{className:"h-5 w-5 text-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,c.jsx)("input",{type:"text",placeholder:x("searchPlaceholder"),value:s,onChange:e=>l(e.target.value),className:"w-full glass-input pl-10 pr-10"}),s&&(0,c.jsx)("button",{onClick:()=>l(""),className:"absolute inset-y-0 right-0 pr-3 pl-3 flex items-center text-slate-500 hover:text-white transition-colors","aria-label":"Clear Search",children:(0,c.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,c.jsxs)("button",{onClick:()=>{const e=["ID,Name,Email,Status,LastActionTime,LastActionBy",...t.map(e=>{const t=e.checkInHistory&&e.checkInHistory.length>0?e.checkInHistory[e.checkInHistory.length-1]:null;return[e.id,'"'.concat(e.attendeeName,'"'),e.attendeeEmail,e.status,t?new Date(1e3*t.timestamp._seconds||t.timestamp).toLocaleString():"",t?t.scannedBy:""].join(",")})];!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"export.csv";if(!e||!e.length)return;const a="data:text/csv;charset=utf-8,"+e.join("\n"),s=encodeURI(a),l=document.createElement("a");l.setAttribute("href",s),l.setAttribute("download",t),document.body.appendChild(l),l.click(),document.body.removeChild(l)}(e,"tickets_export.csv")},className:"glass-interactive px-4 py-3 text-white rounded-xl font-bold flex items-center gap-2 whitespace-nowrap",children:[(0,c.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),x("btnExportCsv")]})]}),a?(0,c.jsx)(I,{}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,c.jsxs)("table",{className:"w-full text-left border-collapse relative",children:["                        ",(0,c.jsx)("thead",{className:"sticky top-0 bg-slate-950/70 backdrop-blur-xl z-10 border-b border-white/10 text-slate-400 text-sm uppercase tracking-wider shadow-sm",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"p-4 font-semibold rounded-tl-lg",children:x("colStatus")}),(0,c.jsx)("th",{className:"p-4 font-semibold",children:x("colAttendee")}),(0,c.jsx)("th",{className:"p-4 font-semibold",children:x("colTicketId")}),(0,c.jsx)("th",{className:"p-4 text-right font-semibold rounded-tr-lg",children:x("colActions")})]})}),(0,c.jsx)("tbody",{className:"divide-y divide-gray-800/50",children:(0,c.jsx)(n.N,{mode:"popLayout",children:t.map(e=>(0,c.jsx)(E,{ticket:e,onCheckIn:r,onShowQR:o,onEdit:d,onDelete:h},e.id))})})]})}),(0,c.jsx)("div",{className:"md:hidden space-y-4",children:(0,c.jsx)(n.N,{mode:"popLayout",children:t.map(e=>(0,c.jsx)(M,{ticket:e,onCheckIn:r,onShowQR:o,onEdit:d,onDelete:h},e.id))})}),!a&&0===t.length&&(0,c.jsxs)("div",{className:"text-center py-12",children:[(0,c.jsx)("div",{className:"text-4xl mb-3",children:"\ud83d\udd0d"}),(0,c.jsx)("h3",{className:"text-lg font-medium text-white",children:x("emptyTitle")}),(0,c.jsx)("p",{className:"text-gray-500",children:x("emptyDesc")})]})]})]})},W=e=>{let{status:t,error:a,isSyncing:s}=e;const{t:l}=(0,v.o)();let n="#22c55e",r=l("liveConnected"),o={scale:[1,1.2,1],opacity:[.7,1,.7]};return"error"===t?(n="#ef4444",r=l("liveOffline"),o={opacity:[1,.5,1]}):s&&(n="#3b82f6",r="Syncing...",o={scale:[1,1.3,1],opacity:[.8,1,.8]}),(0,c.jsxs)("div",{className:"relative group flex items-center gap-2",children:[(0,c.jsx)(i.P.div,{animate:o,transition:{duration:s?1:2,repeat:1/0,ease:"easeInOut"},className:"w-3 h-3 rounded-full",style:{backgroundColor:n,boxShadow:"0 0 8px ".concat(n)}}),(0,c.jsx)("span",{className:"text-sm text-gray-400",children:r}),"error"===t&&a&&(0,c.jsx)("div",{className:"absolute bottom-full mb-2 w-max max-w-xs bg-red-900 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none left-1/2 -translate-x-1/2 z-10 shadow-lg",children:a})]})};var z=a(28);var B=a(6555),D=a(6089);const _=()=>{const{modalContent:e,showModal:t,hideModal:h,showErrorModal:x,showConfirmModal:m,showPromptModal:p,showQrCodeModal:u}=(0,B.h)(),{eventId:f}=(0,D._)(),{t:b}=(0,v.o)(),[w,j]=(0,l.useState)(Date.now());(0,l.useEffect)(()=>{if(!f)return;const e=setInterval(async()=>{try{const e=await(0,L.qu)(f,w);if(e&&e.length>0){const a=e[e.length-1];j(a.timestamp),t({type:"alert",title:"\u26a0\ufe0f Scanner Reported Issue",body:"A volunteer reported an issue at ".concat(new Date(a.timestamp).toLocaleTimeString(),". Please check the gate."),onConfirm:h})}}catch(e){console.warn("Alert poll failed",e)}},5e3);return()=>clearInterval(e)},[f,w,t,h]);const{tickets:y,isLoading:k,isSyncing:N,connectionStatus:P,connectionError:E,handleTicketCreated:M,handleManualCheckIn:S,handleUpdateTicket:I,handleDeleteTicket:A,stats:_}=((e,t)=>{const[a,i]=(0,l.useState)([]),[n,r]=(0,l.useState)(!1),[o,c]=(0,l.useState)(!1),[d,h]=(0,l.useState)("disconnected"),[x,m]=(0,l.useState)(null);(0,l.useEffect)(()=>{if(!e)return h("disconnected"),i([]),r(!1),void c(!1);const t=async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?c(!0):(r(!0),h("connecting"),m(null));try{const a=await(0,L.oP)(e);i(Array.isArray(a)?a:[]),t||h("connected")}catch(a){console.error("API Error:",a),t||(h("error"),m(a.message),i([]))}finally{t?c(!1):r(!1)}};t();const a=setInterval(()=>{t(!0)},5e3);return()=>clearInterval(a)},[e]);const p=(0,l.useCallback)(e=>{i(t=>[...t,e.ticket])},[]),u=(0,l.useCallback)(async a=>{if(e)try{await(0,L.Rf)(e,a.id,"check-in"),i(e=>e.map(e=>e.id===a.id?(0,s.A)((0,s.A)({},e),{},{status:"checked-in"}):e))}catch(l){t("Manual check-in failed.")}},[e,t]),v=(0,l.useCallback)(async a=>{try{await(0,L.EZ)(e,a.id,a),i(e=>e.map(e=>e.id===a.id?a:e))}catch(s){t("Failed to update ticket.")}},[e,t]),g=(0,l.useCallback)(async a=>{try{await(0,L.cC)(e,a.id),i(e=>e.filter(e=>e.id!==a.id))}catch(s){t("Failed to delete ticket.")}},[e,t]),f=(0,l.useMemo)(()=>({total:a.length,checkedIn:a.filter(e=>"checked-in"===e.status).length,onLeave:a.filter(e=>"on-leave"===e.status).length,valid:a.filter(e=>"valid"===e.status).length}),[a]);return{tickets:a,isLoading:n,connectionStatus:d,connectionError:x,handleTicketCreated:p,handleManualCheckIn:u,handleUpdateTicket:v,handleDeleteTicket:g,stats:f,isSyncing:o}})(f,x),[V,R]=(0,l.useState)(""),[q,X]=(0,l.useState)(""),[Q,O]=(0,l.useState)({stats:!0,chart:!0,actions:!0}),[F,U]=(0,l.useState)(!1);(0,l.useEffect)(()=>{const e=setTimeout(()=>{X(V)},300);return()=>{clearTimeout(e)}},[V]);const G=async()=>{if(f)try{const e=await(0,L.qg)(),{url:t,localUrl:a}=await(0,L.lI)();let s=t,l="";if(a&&t&&a!==t){window.confirm("\ud83d\ude80 ".concat(b("scannerSpeedOpt"),"\n\n").concat(b("scannerLocalQ",a),"\n\n\u2705 ").concat(b("scannerLocalYes"),"\n\u274c ").concat(b("scannerLocalNo")))?(s=a,l=" [".concat(b("scannerLocalMode"),"]")):l=" [".concat(b("scannerPublicMode"),"]")}else!t&&a&&(s=a,l=" [".concat(b("scannerLocalOnly"),"]"));if(!s)throw new Error(b("errorBackendURL"));const i="".concat(b("headerEvent")," ").concat(f).concat(l,". ").concat(b("scannerConfigPrompt")),n={eventId:f,apiBaseUrl:s,token:e};u(b("qaScanner"),i,JSON.stringify(n))}catch(e){console.error(e),x("".concat(b("setupFailed"),": ").concat(e.message,"."))}else x(b("errorNoEventSelected"))},K=(0,l.useMemo)(()=>y.filter(e=>{var t,a;return((null===(t=e.attendeeName)||void 0===t?void 0:t.toLowerCase())||"").includes(q.toLowerCase())||((null===(a=e.attendeeEmail)||void 0===a?void 0:a.toLowerCase())||"").includes(q.toLowerCase())||e.id.toLowerCase().includes(q.toLowerCase())}),[y,q]);return(0,c.jsxs)(r.A,{children:[(0,c.jsxs)("header",{className:"sticky top-4 z-30 mx-4 sm:mx-6 rounded-3xl border border-white/10 bg-slate-900/60 backdrop-blur-3xl px-6 py-4 flex justify-between items-center shadow-2xl mb-4",children:[(0,c.jsx)("div",{className:"w-8 xl:hidden"})," ",(0,c.jsxs)("div",{className:"flex items-center gap-4 overflow-hidden",children:[(0,c.jsx)("h2",{className:"text-xl font-semibold text-white truncate flex items-center gap-2",children:f?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"text-slate-400 text-xs hidden sm:inline uppercase tracking-widest font-bold",children:b("headerEvent")}),(0,c.jsx)("span",{className:"rainbow-text text-2xl",children:f})]}):(0,c.jsx)("span",{className:"text-slate-500 italic",children:b("headerSelect")})}),(0,c.jsx)(W,{status:P,error:E,isSyncing:N})]}),f&&(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)(i.P.button,{variants:o.XW,whileHover:"hover",whileTap:"tap",onClick:()=>U(!F),className:"glass-interactive px-4 py-2 text-sm font-medium transition-colors rounded-xl flex items-center gap-2 ".concat(F?"bg-white/20 text-white":"text-slate-300 hover:text-white"),title:"Customize Dashboard",children:(0,c.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})})}),(0,c.jsx)(i.P.button,{variants:o.XW,whileHover:"hover",whileTap:"tap",onClick:async()=>{try{const{url:e}=await(0,L.lI)();e?(await navigator.clipboard.writeText("".concat(e,"/scanner")),alert(b("alertLinkCopied"))):alert(b("errorBackendURL"))}catch(e){console.error(e)}},className:"glass-interactive px-4 py-2 text-sm font-medium text-slate-300 hover:text-white flex items-center gap-2 shadow-lg",title:b("copyScannerLink"),children:(0,c.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})}),(0,c.jsxs)(i.P.button,{variants:o.XW,whileHover:"hover",whileTap:"tap",onClick:G,className:"animated-gradient-bg px-4 py-2 rounded-xl text-sm font-bold flex items-center gap-2",children:[(0,c.jsx)("span",{className:"text-lg",children:"\ud83d\udcf1"}),(0,c.jsx)("span",{className:"hidden sm:inline",children:b("qaScanner")})]})]})]}),(0,c.jsxs)("main",{className:"flex-1 overflow-y-auto p-6 md:p-10 custom-scrollbar relative",children:[(0,c.jsx)("div",{className:"fixed inset-0 pointer-events-none ambient-glow -z-10"}),(0,c.jsx)(n.N,{mode:"wait",children:f?(0,c.jsxs)(i.P.div,{variants:o.tl,initial:"hidden",animate:"visible",exit:{opacity:0,y:20,transition:{duration:.2}},className:"max-w-7xl mx-auto space-y-10 pb-24",children:[(0,c.jsx)(n.N,{children:F&&(0,c.jsx)(i.P.div,{initial:{height:0,opacity:0,marginBottom:0},animate:{height:"auto",opacity:1,marginBottom:32},exit:{height:0,opacity:0,marginBottom:0},className:"overflow-hidden",children:(0,c.jsx)(d,{title:"Customize Layout",icon:"\ud83c\udfa8",className:"bg-slate-800/80",children:(0,c.jsx)("div",{className:"flex gap-6 p-2",children:["stats","chart","actions"].map(e=>(0,c.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)("input",{type:"checkbox",checked:Q[e],onChange:()=>O((0,s.A)((0,s.A)({},Q),{},{[e]:!Q[e]})),className:"sr-only peer"}),(0,c.jsx)("div",{className:"w-10 h-6 bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),(0,c.jsx)("span",{className:"text-sm font-medium text-white capitalize",children:e})]},e))})})})}),(0,c.jsx)(n.N,{children:Q.stats&&(0,c.jsx)(i.P.section,{variants:o.tE,initial:"hidden",animate:"visible",exit:{opacity:0,height:0,overflow:"hidden"},children:(0,c.jsx)(g,{stats:_})},"stats")}),(0,c.jsx)(n.N,{children:Q.chart&&(0,c.jsx)(i.P.section,{variants:o.tE,initial:"hidden",animate:"visible",exit:{opacity:0,height:0,overflow:"hidden"},children:(0,c.jsx)(C,{tickets:y})},"chart")}),(0,c.jsxs)(i.P.div,{variants:o.tE,className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[(0,c.jsxs)("div",{className:"xl:col-span-1 space-y-8",children:[(0,c.jsx)(T,{eventId:f,onTicketCreated:e=>{M(e),u(b("modalQrCodeTitle"),"".concat(b("modalQrCodeBodyPrefix")," ").concat(e.ticket.attendeeName),e.ticket.id)},onApiError:x}),(0,c.jsx)(n.N,{children:Q.actions&&(0,c.jsx)(i.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:(0,c.jsx)(d,{title:b("qaTitle"),icon:"\u26a1",isCollapsible:!0,className:"p-0",children:(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)(i.P.button,{variants:o.XW,whileHover:"hover",whileTap:"tap",onClick:()=>window.location.hash="#email",className:"glass-interactive w-full flex items-center justify-between p-4 rounded-xl text-left group",children:[(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)("span",{className:"text-2xl group-hover:scale-110 transition-transform",children:"\ud83d\udce8"}),(0,c.jsx)("span",{className:"text-slate-200 font-medium group-hover:text-white",children:b("qaEmail")})]}),(0,c.jsx)("span",{className:"text-slate-500 group-hover:text-white transition-colors",children:"\u2192"})]}),(0,c.jsxs)(i.P.button,{variants:o.XW,whileHover:"hover",whileTap:"tap",onClick:G,className:"glass-interactive w-full flex items-center justify-between p-4 rounded-xl text-left group",children:[(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)("span",{className:"text-2xl group-hover:scale-110 transition-transform",children:"\ud83d\udcf1"}),(0,c.jsx)("span",{className:"text-slate-200 font-medium group-hover:text-white",children:b("qaScanner")})]}),(0,c.jsx)("span",{className:"text-slate-500 group-hover:text-white transition-colors",children:"\u2192"})]}),(0,c.jsxs)(i.P.label,{variants:o.XW,whileHover:"hover",whileTap:"tap",className:"glass-interactive w-full flex items-center justify-between p-4 rounded-xl text-left group cursor-pointer",children:[(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)("span",{className:"text-2xl group-hover:scale-110 transition-transform",children:"\ud83d\udcc2"}),(0,c.jsx)("span",{className:"text-slate-200 font-medium group-hover:text-white",children:b("qaImport")})]}),(0,c.jsx)("input",{type:"file",accept:".csv",onChange:e=>{const t=e.target.files[0];if(!t)return;const s=new FileReader;s.onload=async e=>{const t=e.target.result;try{const e=(e=>{if(!e)return[];const t=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n").filter(e=>e.trim());if(t.length<2)return[];const a=e=>{const t=[];let a="",s=!1;for(let l=0;l<e.length;l++){const i=e[l];'"'===i?s&&'"'===e[l+1]?(a+='"',l++):s=!s:","!==i||s?a+=i:(t.push(a.trim()),a="")}return t.push(a.trim()),t.map(e=>e.replace(/^"|"$/g,""))};let s=-1,l=-1,i=-1;for(let r=0;r<Math.min(5,t.length);r++){const e=a(t[r].toLowerCase()),n=e.findIndex(e=>e.includes("name")||e.includes("\u59d3\u540d")||e.includes("attendee")),o=e.findIndex(e=>e.includes("email")||e.includes("mail")||e.includes("\u4fe1\u7bb1"));if(-1!==n&&-1!==o){s=r,l=n,i=o;break}}-1===s&&(s=t[0].includes("@")?-1:0,l=0,i=1);const n=[];for(let r=s+1;r<t.length;r++){const e=a(t[r]);if(e.length>=2){const t=e[l],a=e[i];t&&a&&a.includes("@")&&n.push({attendeeName:t,attendeeEmail:a})}}return n})(t);if(0===e.length)throw new Error(b("errorNoValidAttendees"));m(b("qaImport"),b("importPrompt",e.length),async()=>{try{const t=await Promise.resolve().then(a.bind(a,1200)).then(t=>t.importAttendees(f,e));alert(t.message)}catch(t){x("".concat(b("importFailed"),": ").concat(t.message))}finally{h()}})}catch(s){x("".concat(b("errorCsvParse"),": ").concat(s.message))}},s.readAsText(t),e.target.value=null},className:"hidden"})]}),(0,c.jsx)(i.P.button,{variants:o.XW,whileHover:"hover",whileTap:"tap",onClick:()=>{alert(b("alertDelete"))},className:"w-full flex items-center justify-between p-4 rounded-xl bg-red-500/5 hover:bg-red-500/20 border border-red-500/10 hover:border-red-500/30 text-left transition-all group",children:(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)("span",{className:"text-2xl group-hover:rotate-12 transition-transform",children:"\u2622\ufe0f"}),(0,c.jsx)("span",{className:"text-red-400 font-medium group-hover:text-red-300",children:b("qaNuke")})]})})]})})},"actions")})]}),(0,c.jsx)("div",{className:"xl:col-span-2",children:(0,c.jsx)(H,{filteredTickets:K,isLoading:k,searchTerm:V,setSearchTerm:R,onCheckIn:e=>{m(b("modalCheckInTitle"),b("modalCheckInBody",e.attendeeName),async()=>{await S(e),h()})},onShowQR:(e,t)=>u(b("modalQrCodeTitle"),"".concat(b("modalQrCodeBodyPrefix")," ").concat(t),e),onEdit:e=>{t({type:"edit-ticket",title:b("modalEditTicketTitle"),body:b("modalEditTicketBody",e.attendeeName),ticket:e,onConfirm:async e=>{await I(e),h()}})},onDelete:e=>{m(b("modalDeleteTicketTitle"),b("modalDeleteTicketBody",e.attendeeName),async()=>{await A(e),h()})}},f)})]})]},"dashboard"):(0,c.jsx)(i.P.div,{className:"h-full flex flex-col items-center justify-center p-4",exit:{opacity:0,scale:.95,filter:"blur(10px)",transition:{duration:.3}},children:(0,c.jsxs)(i.P.div,{variants:o.lV,initial:"hidden",animate:"visible",whileHover:"hover",className:"glass-panel p-12 rounded-[2.5rem] max-w-lg w-full text-center border border-white/10 relative overflow-hidden",children:[(0,c.jsx)("div",{className:"absolute inset-0 bg-gradient-to-tr from-violet-500/10 via-transparent to-pink-500/10 pointer-events-none"}),(0,c.jsx)("div",{className:"text-8xl mb-6 opacity-30 animate-pulse grayscale filter blur-sm",children:"\ud83c\udf9f\ufe0f"}),(0,c.jsx)("h3",{className:"text-3xl font-black text-white mb-3 tracking-tight",children:b("limboTitle")}),(0,c.jsx)("p",{className:"text-lg text-slate-400 leading-relaxed",children:b("limboDesc")})]})},"limbo")})]}),(0,c.jsx)(z.A,{isOpen:!!e,onClose:h,content:e||{}})]})}},6555:(e,t,a)=>{a.d(t,{h:()=>i});var s=a(5043),l=a(2136);const i=()=>{const[e,t]=(0,s.useState)(null),{t:a}=(0,l.o)(),i=(0,s.useCallback)(e=>{t(e)},[]),n=(0,s.useCallback)(()=>{t(null)},[]),r=(0,s.useCallback)(e=>{i({type:"alert",title:a("modalError"),body:e})},[i,a]),o=(0,s.useCallback)((e,t,a)=>{i({type:"confirm",title:e,body:t,onConfirm:a})},[i]),c=(0,s.useCallback)((e,t,a)=>{i({type:"prompt",title:e,body:t,onConfirm:a})},[i]),d=(0,s.useCallback)((e,t,a)=>{i({type:"qr-code",title:e,body:t,qrValue:a})},[i]);return{modalContent:e,showModal:i,hideModal:n,showErrorModal:r,showConfirmModal:o,showPromptModal:c,showQrCodeModal:d}}}}]);
//# sourceMappingURL=472.d644dbb7.chunk.js.map